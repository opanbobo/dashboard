(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[623],{66887:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/analytic",function(){return n(11928)}])},11928:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return F}});var r=n(35666),a=n.n(r),i=n(85893),o=n(67294),s=n(61120),l=n.n(s);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(l){s=!0,a=l}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=n(27049),p=n(86031),g=n(13983),y=n(4792),f=n(48513);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var x=function(e){var t=e.className,n=e.charts,r=m(e,["className","charts"]);return(0,i.jsx)(p._W,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){h(e,t,n[t])}))}return e}({className:t,id:"summaryTone",type:"line"},n,r))},b=n(99883);function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){v(e,t,n[t])}))}return e}function _(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var k=function(e){var t=e.className,n=e.visibility,r=e.pie,a=e.headline,o=_(e,["className","visibility","pie","headline"]);return(0,i.jsxs)(p.X2,{children:[(0,i.jsx)(p.JX,{span:24,children:(0,i.jsx)(p.Zb,j({title:n.title},o,{children:(0,i.jsx)("div",{ref:n.ref,children:(0,i.jsx)(p._W,j({className:t,type:"line"},n))})}))}),(0,i.jsx)(p.JX,{xs:24,md:24,lg:a?12:24,xl:a?12:24,children:(0,i.jsx)(p.Zb,j({title:r.title},o,{children:(0,i.jsx)(p._W,j({className:t,id:"pie",type:"pie"},r))}))}),a&&(0,i.jsx)(p.JX,{xs:24,md:24,lg:12,xl:12,children:(0,i.jsx)(p.Zb,j({title:"Trending Highlight"},o,{children:a}))})]})};function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){w(e,t,n[t])}))}return e}function S(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var P=function(e){var t=e.className,n=e.coverage,r=e.selection,a=e.media,o=e.onLoading,s=e.onLoadingMedia,l=e.onLoadingCategory,c=e.pie,u=e.full,d=S(e,["className","coverage","selection","media","onLoading","onLoadingMedia","onLoadingCategory","pie","full"]);return(0,i.jsxs)(p.X2,{gutter:[p.v5,p.v5],children:[(0,i.jsx)(p.JX,{xs:24,md:24,lg:u?12:24,xl:u?24:12,children:(0,i.jsx)(p.Zb,O({title:n.title,onLoading:o},d,{children:(0,i.jsx)(p._W,O({className:t,id:"coverage",type:"bar"},n))}))}),(0,i.jsx)(p.JX,{xs:24,md:24,lg:u?12:24,xl:u?24:12,children:(0,i.jsx)(p.Zb,O({title:c.title},d,{children:(0,i.jsx)(p._W,O({className:t,id:"pietone",type:"pie"},c))}))}),(0,i.jsx)(p.JX,{xs:24,md:24,lg:u?24:12,xl:u?24:12,children:(0,i.jsx)(p.Zb,O({title:r.title,onLoading:s},d,{children:(0,i.jsx)(p._W,O({className:t,id:"selection",type:"bar"},r))}))}),(0,i.jsx)(p.JX,{xs:24,md:24,lg:u?24:12,xl:u?24:12,children:(0,i.jsx)(p.Zb,O({title:a.title,onLoading:l},d,{children:(0,i.jsx)(p._W,O({className:t,id:"media",type:"bar"},a))}))})]})},E=n(25617),X=n(84865),C=n(73939),N=n(63820),z=n(58742);function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){D(e,t,n[t])}))}return e}var L=function(e){var t=e.selectall,n=e.group;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.XZ,I({},t,{children:t.label})),(0,i.jsx)(d.Z,{style:{margin:"6px 0"}}),(0,i.jsx)(p.XZ,I({style:{display:"flex",alignItems:"flex-start",flexDirection:"column",height:200,width:"100%",overflow:"auto"},type:"group"},n))]})},T=n(56267),Z=n(99761);function J(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(r,a)}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){A(e,t,n[t])}))}return e}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(l){a=!0,i=l}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var R={tablet:"(min-width: 300px) and (max-width: 780px)"},M={height:"90%"},F=function(){var e,t,n,r,s=(0,E.I0)(),u=(0,E.v9)((function(e){return e.analytic})),h=(0,E.v9)((function(e){return e.filter})),m=(0,E.v9)((function(e){return e.excellconfig})),v=u.mediaVisibility,j=u.coverageTonality,_=u.trendingHighLights,w=u.toneCategory,O=u.toneMedia,S=u.ews,D=u.article,I=h.filter,A=h.category,F=m.excelCol,U=(0,o.useState)(!1),Y=U[0],H=U[1],V=(0,o.useState)(!0),B=V[0],q=V[1],G=(0,o.useState)({}),K=G[0],Q=G[1],ee=(0,o.useState)({}),te=ee[0],ne=ee[1],re=(0,o.useState)(!1),ae=re[0],ie=re[1],oe=(0,o.useState)(!1),se=oe[0],le=oe[1],ce=(0,o.useState)(!1),ue=ce[0],de=ce[1],pe=(0,o.useState)(!0),ge=pe[0],ye=pe[1],fe=(0,o.useState)([]),he=fe[0],me=fe[1],xe=(0,o.useState)(!1),be=xe[0],ve=xe[1],je=(0,o.useState)(),_e=je[0],ke=je[1],we=(0,o.useState)(!0),Oe=we[0],Se=(we[1],(0,o.useState)($({},I.result,{columns:[]}))),Pe=Se[0],Ee=Se[1],Xe=(0,o.useState)($({},I.result,{columns:[]})),Ce=Xe[0],Ne=Xe[1];(0,o.useEffect)((function(){(0,f.Z)(R,ke)}),[_e]);var ze=(0,o.useMemo)((function(){var e;return(null===(e=A.result.results)||void 0===e?void 0:e.filter((function(e){return 0!==e.category_set})).map((function(e){return $({},e,{checked:!1})})))||[]}),[A]);(0,o.useEffect)((function(){s((0,X.$i)(I.result)),s((0,X.R9)(I.result)),s((0,X.Zx)(I.result)),s((0,X.ZX)(I.result)),s((0,X.GL)(I.result)),s((0,X.kI)(I.result))}),[I]),(0,o.useEffect)((function(){setTimeout((function(){q(!1)}),200)}),[B]),(0,o.useEffect)((function(){setTimeout((function(){ye(!1)}),1e5)}),[ge]);var De,Ie=function(e){var t=e.data.x,n=e.data.x,r=new Date(e.data.x),a=e.data.y,i=e.data.y,o=new Date(e.data.y),l=new Date(I.result.start_date),c=new Date(I.result.end_date);if(Math.abs(l-c)/864e5>31)if("tonality"!==e.type){var u=e.data.x.split("-"),d=new Date(r.getFullYear(),r.getMonth()+1,0).getDate();u[2]=d,n=u=u.join("-")}else{var p=e.data.y.split("-"),g=new Date(o.getFullYear(),o.getMonth()+1,0).getDate();p[2]=g,i=p=p.join("-")}"visibility"==e.type?(s((0,X.yU)($({},I.result,{category_id:e.data.y,start_date:t,end_date:n,page:e.page,maxSize:e.maxSize}))),Q($({},e,{desc:{Category:e.data.y,"Start Date":t,"End Date":n}}))):"pie"==e.type?(s((0,X.yU)($({},I.result,{category_id:e.data.y,start_date:I.result.start_date,end_date:I.result.end_date,page:e.page,maxSize:e.maxSize}))),Q($({},e,{desc:{Category:e.data.y}}))):"pie-cov"==e.type?(s((0,X.yU)($({},I.result,{tone:e.data.y,start_date:I.result.start_date,end_date:I.result.end_date,page:e.page,maxSize:e.maxSize}))),Q($({},e,{desc:{Tone:1==e.data.y?"Positive":-1==e.data.y?"Negative":"Neutral"}}))):"coverage"==e.type?(s((0,X.yU)($({},I.result,{tone:e.data.y,start_date:t,end_date:n,page:e.page,maxSize:e.maxSize}))),Q($({},e,{desc:{Tone:1==e.data.y?"Positive":-1==e.data.y?"Negative":"Neutral","Start Date":t,"End Date":n}}))):"coverage-bar"==e.type?(s((0,X.yU)($({},I.result,{tone:e.data.x,media_id:e.data.y,start_date:I.result.start_date,end_date:I.result.end_date,page:e.page,maxSize:e.maxSize}))),Q($({},e,{desc:{Tone:1==e.data.x?"Positive":-1==e.data.x?"Negative":"Neutral",Date:e.data.media_name}}))):"coverage-barhor"==e.type?(s((0,X.yU)($({},I.result,{category_id:e.data.y,tone:e.data.x,start_date:I.result.start_date,end_date:I.result.end_date,page:e.page,maxSize:e.maxSize}))),Q($({},e,{desc:{Tone:1==e.data.x?"Positive":-1==e.data.x?"Negative":"Neutral",Category:e.data.y}}))):"ews"==e.type?(s((0,X.yU)($({},I.result,{category_id:e.data.y,start_date:t,end_date:n,page:e.page,maxSize:e.maxSize}))),Q($({},e,{desc:{Category:e.data.y,"Start Date":t,"End Date":n}}))):"tonality"==e.type&&(s((0,X.yU)($({},I.result,{tone:e.data.x,start_date:a,end_date:i,page:e.page,maxSize:e.maxSize}))),Q($({},e,{desc:{Tone:1==e.data.x?"Positive":-1==e.data.x?"Negative":"Neutral","Start Date":a,"End Date":i}}))),H(!0)},Le=function(){var e;return(0,i.jsx)(C.Z,{onDetailClick:function(e){setArticleDetail(e),setDetailOpen(!0)},onLoading:D.loading,modal:{title:"Article List ".concat(K.desc?"("+Object.keys(K.desc).map((function(e){return e+": "+K.desc[e]}))+")":""),visible:Y&&!D.loading,close:function(){return H(!1)}},data:(null===(e=D.result.data)||void 0===e?void 0:e.map((function(e){return{id:e.article_id,title:e.title,content:e.content,detail:e}})))||[],pagination:{showSizeChanger:!0,total:D.result.recordsTotal||0,showTotal:function(e){return"Total ".concat(D.result.recordsTotal," data")},defaultPageSize:K.maxSize||0,defaultCurrent:K.page+1||0,onChange:function(e,t){return Ie($({},K,{page:e-1,maxSize:t}))}}})},Te=function(e){var t=[],n=[],r=[];return e.forEach((function(e){e.tones.forEach((function(e){e.negative?t.push(e.negative):e.positive?n.push(e.positive):e.neutral&&r.push(e.neutral)}))})),[{name:"Negative",data:t},{name:"Neutral",data:r},{name:"Positive",data:n}]},Ze=(0,o.useRef)(null),Je=(0,o.useRef)(null),Ae=(0,o.useRef)(null),$e=(0,o.useRef)(null),We=(0,o.useRef)(null),Re=(0,o.useRef)(null),Me=W(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=e.quality,r=c((0,o.useState)(null),2),a=r[0],i=r[1],s=c((0,o.useState)(null),2),u=s[0],d=s[1];return[a,function(e){if(!e)throw new Error("You should provide correct html node.");return l()(e).then((function(e){var r=document.createElement("canvas"),a=r.getContext("2d"),o=e.width,s=e.height;r.width=o,r.height=s,a.drawImage(e,0,0);var l=r.toDataURL(t,n);return i(l),l})).catch(d)},{error:u}]}({type:"image/jpeg",quality:1}),2),Fe=(Me[0],Me[1]),Ue=(De=a().mark((function e(){var t,n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.t6.info({message:"Currently downloading the power point. Please wait for a while because this process will take some time until the process is complete, thank you"}),t=[],n=[Ze,Je,Ae,$e,We,Re],r=0;case 4:if(!(r<n.length)){e.next=12;break}return e.next=7,Fe(n[r].current);case 7:i=e.sent,t.push(i);case 9:r++,e.next=4;break;case 12:(0,X.hN)(t).then((function(e){return e.json()})).then((function(e){200==e.code&&window.open(e.data)})).catch((function(e){p.t6.error({message:e.message})}));case 13:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=De.apply(e,t);function i(e){J(a,n,r,i,o,"next",e)}function o(e){J(a,n,r,i,o,"throw",e)}i(void 0)}))}),Ye=(0,o.useMemo)((function(){return"https://ojk.media-insight.id"===(window.location.origin?window.location.origin:"")}),[]),He=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.zx,{style:Be,icons:"FilePptFilled",shape:"round",type:"primary",danger:"true",onClick:function(){le(!0)},children:"PPT File"}),(0,i.jsx)("span",{style:{margin:"4px 0"}}),(0,i.jsx)(p.zx,{style:{background:"#06d6a0",border:"#06d6a0"},icons:"FileExcelFilled",shape:"round",type:"primary",onClick:function(){s((0,T.R_)(I.result)),s((0,Z.Ou)()),de(!0),0!==I.result.category_set?Ne($({},Ce,{columns:[I.result.category_set]})):Ne($({},Ce,{columns:ze.map((function(e){return e.category_set}))}))},children:"Excel File"})]}),Ve=function(){var e;return(0,i.jsx)(p.u_,{title:"Download PPT File",closable:!0,onCancel:function(){return le(!1)},visible:se,onOk:function(){Ue()},children:(0,i.jsxs)(p.X2,{children:[(0,i.jsx)(p.JX,{span:24,children:(0,i.jsx)("div",{ref:Ze,children:(0,i.jsx)(p.Zb,{title:"Visibility Chart",children:(0,i.jsx)(p._W,{type:"line",title:"visibility chart",series:v.result.data?v.result.data.map((function(e){return{name:e.key,data:e.category_id_per_day.buckets.map((function(e){return e.doc_count}))}})):[],chartOptions:y.$E.chartOptions,options:{markers:y.$E.markers,xaxis:{categories:(null===(e=v.result.data)||void 0===e?void 0:e.length)>0?v.result.data[0].category_id_per_day.buckets.map((function(e){return e.key_as_string})):[]},legend:y.$E.legend}})})})}),(0,i.jsx)(p.JX,{span:24,children:(0,i.jsx)("div",{ref:Je,children:(0,i.jsx)(p.Zb,{title:"Visibility Pie",children:(0,i.jsx)(p._W,{id:"pie",type:"pie",title:"visibility pie",series:v.result.data?v.result.data.map((function(e){return e.doc_count})):[],options:{labels:v.result.data?v.result.data.map((function(e){return e.key})):[]},chartOptions:{type:"pie",height:300}})})})}),(0,i.jsx)(p.JX,{span:24,children:(0,i.jsx)("div",{ref:Ae,children:(0,i.jsx)(p.Zb,{title:"Coverage Tone",children:(0,i.jsx)(p._W,{id:"coverage",type:"bar",title:"coverage tone",series:j.result.data?j.result.data.chart_bar.sort((function(e,t){return e.key>t.key?1:-1})).map((function(e){return{name:1==e.key?"Positive":0==e.key?"Neutral":"Negative",data:e.tone_per_day.buckets.map((function(e){return e.doc_count}))}})):[],chartOptions:y.X6.chartOptions,options:{colors:y.X6.colors,plotOptions:{bar:{horizontal:!1,borderRadius:6}},xaxis:{categories:j.result.data?j.result.data.chart_bar[0].tone_per_day.buckets.map((function(e){return e.key_as_string})):[]},legend:y.X6.legend}})})})}),(0,i.jsx)(p.JX,{span:24,children:(0,i.jsx)("div",{ref:$e,children:(0,i.jsx)(p.Zb,{title:"Tone by Media Selection",children:(0,i.jsx)(p._W,{id:"selection",type:"bar",title:"tone by media selection",series:O.result.data?Te(O.result.data):[],chartOptions:y.X6.chartOptions,options:{colors:y.X6.colors,plotOptions:y.X6.plotOptions,xaxis:{categories:O.result.data?O.result.data.map((function(e){return e.media_name})):[]},legend:y.X6.legend}})})})}),(0,i.jsx)(p.JX,{span:24,children:(0,i.jsx)("div",{ref:We,children:(0,i.jsx)(p.Zb,{title:"Tone by Category",children:(0,i.jsx)(p._W,{id:"media",type:"bar",title:"tone by category",series:w.result.data?Te(w.result.data):[],chartOptions:y.X6.chartOptions,options:{colors:y.X6.colors,plotOptions:{bar:{horizontal:!1,borderRadius:6}},xaxis:{categories:w.result.data?w.result.data.filter((function(e){return e.tones.length>0?1:0})).map((function(e){return e.category_id})):[]},legend:y.X6.legend}})})})}),(0,i.jsx)("div",{style:{width:"100%"},ref:Re,children:(0,i.jsx)(p.Zb,{onLoading:S.loading,title:"Early Warning System",children:(0,i.jsx)(b.Z,{height:300,width:"100%",charts:{series:S.result.series,options:{tooltip:{shared:!0},markers:y.$E.markers,stroke:y.$E.stroke,colors:y.$E.colors,xaxis:{categories:S.result.date},yaxis:{show:!0,tickAmount:3,min:0,max:20,labels:{formatter:function(e,t){return 0==e&&e<5?"Potential":e>5&&e<9?"Emerging":e>10&&e<20?"Current":"Crisis"}}}}}})})})]})})},Be={boxShadow:"3px 0px 20px -12px rgba(54, 65, 76, 0.5)"},qe=[{key:"1",title:"Media Visibility",content:(0,i.jsx)("div",{id:"media-visibility-chart",children:(0,i.jsx)(k,{onLoading:v.loading,visibility:{title:"visibility chart",series:v.result.data?v.result.data.map((function(e){return{name:e.key,data:e.category_id_per_day.buckets.map((function(e){return e.doc_count}))}})):[],chartOptions:y.$E.chartOptions,events:{markerClick:function(e,t,n){return Ie({type:"visibility",page:0,maxSize:10,order_by:"datee",order:"desc",data:{x:v.result.data[n.seriesIndex].category_id_per_day.buckets[n.dataPointIndex].key_as_string,y:v.result.data[n.seriesIndex].key}})}},options:{markers:y.$E.markers,xaxis:{categories:(null===(e=v.result.data)||void 0===e?void 0:e.length)>0?v.result.data[0].category_id_per_day.buckets.map((function(e){return e.key_as_string})):[]},legend:y.$E.legend}},pie:{title:"visibility pie",series:v.result.data?v.result.data.map((function(e){return e.doc_count})):[],options:{labels:v.result.data?v.result.data.map((function(e){return e.key})):[]},chartOptions:{type:"pie",height:300},events:{dataPointSelection:function(e,t,n){return Ie({type:"pie",page:0,maxSize:10,order_by:"datee",order:"desc",data:{y:v.result.data[n.dataPointIndex].key}})}}},headline:(0,i.jsx)("div",{style:{overflowY:"auto",overflowX:"hidden",height:300},children:(0,i.jsx)(p.X2,{children:null===(t=_.result.data)||void 0===t?void 0:t.map((function(e){return(0,i.jsx)(p.JX,{span:24,children:(0,i.jsx)(p.TH,{ellipsis:!0,title:e.title,content:e.content,onClick:function(){(0,z.Mr)({article_id:e.article_id}).then((function(e){return e.json()})).then((function(t){ne(e),ie(!0),me(t.data)})).catch((function(e){return console.log(e)}))}})},e.article_id)}))})})})})},{key:"2",title:"Coverage Tone",content:(0,i.jsx)("div",{id:"coverage-tone-chart",children:(0,i.jsx)(P,{onLoading:j.loading,onLoadingMedia:O.loading,onLoadingCategory:w.loading,coverage:{title:"coverage tone",series:j.result.data?j.result.data.chart_bar.sort((function(e,t){return e.key>t.key?1:-1})).map((function(e){return{name:1==e.key?"Positive":0==e.key?"Neutral":"Negative",data:e.tone_per_day.buckets.map((function(e){return e.doc_count}))}})):[],chartOptions:y.X6.chartOptions,events:{dataPointSelection:function(e,t,n){return console.log(h),Ie({type:"coverage",page:0,maxSize:10,order_by:"datee",order:"desc",data:{y:"2"==n.seriesIndex?"1":"0"==n.seriesIndex?"-1":"0",x:j.result.data.chart_bar.find((function(e){var t="2"==n.seriesIndex?"1":"0"==n.seriesIndex?"-1":"0";return e.key==t?e:-1})).tone_per_day.buckets[n.dataPointIndex].key_as_string}})}},options:{colors:y.X6.colors,plotOptions:{bar:{horizontal:!1,borderRadius:6}},xaxis:{categories:j.result.data?j.result.data.chart_bar[0].tone_per_day.buckets.map((function(e){return e.key_as_string})):[]},legend:y.X6.legend}},pie:{title:"Coverage pie",series:j.result.data?j.result.data.chart_bar.sort((function(e,t){return e.key>t.key?1:-1})).map((function(e){return e.doc_count})):[],options:{labels:["Negative","Neutral","Positive"],colors:y.X6.colors,legend:{position:"right",horizontalAlign:"center",verticalAlign:"center",markers:{width:8,height:8,radius:2,offsetY:0}}},chartOptions:{type:"pie",height:300},events:{dataPointSelection:function(e,t,n){return Ie({type:"pie-cov",page:0,maxSize:10,order_by:"datee",order:"desc",data:{y:j.result.data.chart_bar.sort((function(e,t){return e.key>t.key?1:-1}))[n.dataPointIndex].key}})}}},selection:{title:"tone by media selection",series:O.result.data?Te(O.result.data):[],chartOptions:y.X6.chartOptions,events:{dataPointSelection:function(e,t,n){return Ie({type:"coverage-bar",page:0,maxSize:10,order_by:"datee",order:"desc",data:{y:O.result.data[n.dataPointIndex].media_id,x:n.seriesIndex-1},media_name:O.result.data[n.dataPointIndex].media_name})}},options:{colors:y.X6.colors,plotOptions:y.X6.plotOptions,xaxis:{categories:O.result.data?O.result.data.map((function(e){return e.media_name})):[]},legend:y.X6.legend}},media:{title:"tone by category",series:w.result.data?Te(w.result.data):[],chartOptions:y.X6.chartOptions,events:{click:function(e,t,n){return Ie({type:"coverage-barhor",page:0,maxSize:10,order_by:"datee",order:"desc",data:{y:w.result.data[n.dataPointIndex].category_id,x:n.seriesIndex-1}})}},options:{colors:y.X6.colors,plotOptions:{bar:{horizontal:!1,borderRadius:6}},xaxis:{categories:w.result.data?w.result.data.filter((function(e){return e.tones.length>0?1:0})).map((function(e){return e.category_id})):[]},legend:y.X6.legend}}})})},{key:"3",title:"Early Warning",content:(0,i.jsx)("div",{id:"ews-chart",children:(0,i.jsx)(p.Zb,{onLoading:S.loading,title:"Early Warning System",children:(0,i.jsx)(b.Z,{height:350,charts:{series:S.result.series,events:{markerClick:function(e,t,n){Ie({type:"ews",page:0,maxSize:10,order_by:"datee",order:"desc",data:{x:S.result.date[n.dataPointIndex],y:S.result.series[n.seriesIndex].name}})}},options:{tooltip:{shared:!0},markers:y.$E.markers,stroke:y.$E.stroke,colors:y.$E.colors,xaxis:{categories:S.result.date},yaxis:{show:!0,tickAmount:3,min:0,max:20,labels:{formatter:function(e,t){return e>=0&&e<=5?"Potential":e>5&&e<=10?"Emerging":e>10&&e<20?"Current":"Crisis"}}}}}})})})}];return(0,i.jsxs)("div",{style:{height:"100%",marginBottom:"1rem"},children:[(0,i.jsx)("div",{style:{position:"absolute",zIndex:999,right:20,bottom:"tablet"==_e?"30%":100},children:(0,i.jsx)(p.Lt,{direction:"vertical",trigger:"hover",overlayStyle:{background:"transparent"},placement:"topCenter",overlayHeight:"100%",overlay:He,children:(0,i.jsx)(p.zx,{loading:be,style:Be,onClick:function(e){return e.preventDefault()},type:"primary",icons:"DownloadOutlined",shape:"round",children:"Download"})})}),(0,i.jsxs)(p.X2,{children:[(0,i.jsx)(p.JX,{md:24,lg:6,children:(0,i.jsx)(p.X2,{children:j.result.data?j.result.data.widget.map((function(e){return(0,i.jsx)(p.JX,{xs:24,md:8,lg:24,xl:24,order:"positive"==e.type?1:"negative"==e.type?3:(e.type,2),children:(0,i.jsx)(p.$L,{onLoading:j.loading,id:e.id,type:e.type,label:e.label,description:e.description,total:e.total,status:e.status,percent:"".concat(e.percent,"%")})},e.id)})):g.HC.map((function(e){return(0,i.jsx)(p.JX,{xs:24,md:8,lg:24,xl:24,children:(0,i.jsx)(p.$L,{onLoading:j.loading,id:e.id,type:e.type,label:e.label,description:e.description,total:e.total,status:e.status,percent:"".concat(e.percent,"%")})},e.id)}))})}),(0,i.jsx)(p.JX,{xs:24,md:24,lg:18,children:(0,i.jsx)(p.Zb,{onLoading:j.loading,children:(0,i.jsx)("div",{id:"coverage-tonality-chart",children:(0,i.jsx)(x,{height:290,charts:{events:{markerClick:function(e,t,n){return Ie({type:"tonality",page:0,maxSize:10,order_by:"datee",order:"desc",data:{x:n.seriesIndex-1,y:S.result.date[n.dataPointIndex]}})}},options:{title:{text:"Media Sentiment Breakdown",align:"left",offsetY:5,floating:!0,style:{fontSize:"14px",fontWeight:500,color:"#263238"}},tooltip:{shared:!0},markers:y.$E.markers,xaxis:{categories:j.result.data?j.result.data.chart_bar[0].tone_per_day.buckets.map((function(e){return e.key_as_string})):[" "]},stroke:y.$E.stroke,colors:["#ff6b6b","#1990ff","#06d6a0"],legend:{position:"top",horizontalAlign:"right",markers:y.$E.legend.markers}},series:j.result.data?j.result.data.chart_bar.sort((function(e,t){return e.key>t.key?1:-1})).map((function(e){return{name:1==e.key?"Positive":-1==e.key?"Negative":"Neutral",data:e.tone_per_day.buckets.map((function(e){return e.doc_count}))}})):[]}})})})}),(0,i.jsx)(d.Z,{}),(0,i.jsx)(p.JX,{span:24,style:M,children:(0,i.jsx)(p.li,{style:M,defaultActiveKey:"1",data:qe})})]}),(0,i.jsx)(N.Z,{clippingDrawer:te,setClippingDrawer:ne,clipListPop:ae,setclipListPop:ie,saveArticlePop:!1,keyword:he}),(0,i.jsx)(Le,{}),(0,i.jsx)(Ve,{}),(0,i.jsxs)(p.u_,{title:"Download Excell File",closable:!0,onCancel:function(){return de(!1)},visible:ue,footer:[(0,i.jsx)(p.zx,{type:"dashed",danger:!0,disabled:!!(0==Pe.columns.length&0==Ce.columns.length),onClick:function(){Ee($({},I.result,{columns:[]})),Ne($({},I.result,{columns:[]}))},children:"Reset"},"reset"),(0,i.jsx)(p.zx,{type:"primary",disabled:!(Pe.columns.length>0&Ce.columns.length>0),loading:be,onClick:function(){ve(!0),(0,X.r8)($({url:Ye,columns:Pe.columns},I.result,{category_set:Ce.columns.join(",")})).then((function(e){return e.json()})).then((function(e){window.open(e.data),ve(!1),de(!1),Ee($({},I.result,{columns:[]}))})).catch((function(e){p.t6.error({message:"Error when download excel!"}),ve(!1),de(!1),Ee($({},I.result,{columns:[]}))}))},children:"Download File"},"submit")],children:[(0,i.jsx)("p",{children:"Columns:"}),(0,i.jsx)(L,{id:"columns",selectall:{indeterminate:Oe,onChange:function(e){e.target.checked?Ee($({},Pe,{columns:F.result.data.map((function(e){return e.name}))})):Ee($({},Pe,{columns:[]}))},checked:Pe.columns.length==(null===(n=F.result.data)||void 0===n?void 0:n.length),label:"Select All (".concat(Pe.columns.length,"/").concat(null===(r=F.result.data)||void 0===r?void 0:r.length,")")},group:{onChange:function(e){Ee($({},Pe,{columns:e}))},value:Pe.columns,options:F.result.data?F.result.data.map((function(e){return{value:e.name,label:e.name,checked:e.checked}})):[]}}),(0,i.jsx)("p",{style:{marginTop:"20px"},children:"Categories:"}),(0,i.jsx)(L,{id:"columns",selectall:{indeterminate:Oe,onChange:function(e){e.target.checked?Ne($({},Ce,{columns:ze.map((function(e){return e.category_set}))})):Ne($({},Ce,{columns:[]}))},checked:Ce.columns.length==ze.length,label:"Select All (".concat(Ce.columns.length,"/").concat(ze.length,")")},group:{onChange:function(e){Ne($({},Ce,{columns:e}))},value:Ce.columns,options:ze?null===ze||void 0===ze?void 0:ze.map((function(e){return{value:e.category_set,label:e.descriptionz,checked:e.checked}})):[]}}),(0,i.jsxs)("div",{style:{margin:"6px 0 0"},children:[(0,i.jsx)("b",{children:"Note:"})," you can only download the columns that are selected."]})]})]})}},56267:function(e,t,n){"use strict";n.d(t,{R_:function(){return c},uL:function(){return u},d4:function(){return d},Sg:function(){return p}});var r=n(35666),a=n.n(r),i=n(86763),o=n(74034);function s(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(r,a)}var l="dashboard/excel/columns",c=function(e){return t=a().mark((function t(n,r){var s,c;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:i.AU}),s=JSON.parse(localStorage.getItem("userToken")),t.next=5,(0,o.Be)(l,s.token,e);case 5:return c=t.sent,t.next=8,c.json();case 8:c=t.sent,n({type:i.pL,result:c}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),n({type:i.mV,result:t.t0});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})),function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(e){s(i,r,a,o,l,"next",e)}function l(e){s(i,r,a,o,l,"throw",e)}o(void 0)}))};var t},u=function(e){return new Promise((function(t,n){var r=JSON.parse(localStorage.getItem("userToken"));return(0,o.SD)(l,r.token,e).then((function(e){return t(e)}))}))},d=function(e){return new Promise((function(t,n){var r=JSON.parse(localStorage.getItem("userToken"));return(0,o._o)(l,r.token,e).then((function(e){return t(e)}))}))},p=function(e,t){return new Promise((function(n,r){var a=JSON.parse(localStorage.getItem("userToken"));return(0,o.Y2)("".concat(l,"/").concat(e),a.token,t).then((function(e){return n(e)}))}))}}},function(e){e.O(0,[443,840,874,774,888,179],(function(){return t=66887,e(e.s=t);var t}));var t=e.O();_N_E=t}]);