(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[623],{28036:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/analytic",function(){return a(26394)}])},26394:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return I}});var n=a(47568),r=a(14924),i=a(26042),o=a(69396),s=a(828),l=a(97582),d=a(85893),c=a(67294),u=a(61120),p=a.n(u);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,i=[],o=!0,s=!1;try{for(a=a.call(e);!(o=(n=a.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(l){s=!0,r=l}finally{try{o||null==a.return||a.return()}finally{if(s)throw r}}return i}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return y(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var x=a(27049),h=a(18975),m=a(13983),f=a(4792),v=a(48513),_=a(99534);var Z=function(e){var t=e.className,a=e.charts,n=(0,_.Z)(e,["className","charts"]);return(0,d.jsx)(h._W,(0,i.Z)({className:t,id:"summaryTone",type:"line"},a,n))},b=a(99883),j=function(e){var t=e.className,a=e.visibility,n=e.pie,r=e.headline,s=(0,_.Z)(e,["className","visibility","pie","headline"]);return(0,d.jsxs)(h.X2,{children:[(0,d.jsx)(h.JX,{span:24,children:(0,d.jsx)(h.Zb,(0,o.Z)((0,i.Z)({title:a.title},s),{children:(0,d.jsx)("div",{ref:a.ref,children:(0,d.jsx)(h._W,(0,i.Z)({className:t,type:"line"},a))})}))}),r&&(0,d.jsx)(h.JX,{xs:24,md:24,lg:8,xl:8,children:(0,d.jsx)(h.Zb,(0,o.Z)((0,i.Z)({title:"Latest News"},s),{children:r}))}),(0,d.jsx)(h.JX,{xs:24,md:24,lg:16,xl:16,children:(0,d.jsx)(h.Zb,(0,o.Z)((0,i.Z)({title:n.title},s),{children:(0,d.jsx)(h._W,(0,i.Z)({className:t,id:"pie",type:"pie"},n))}))})]})},S=function(e){var t=e.className,a=e.coverage,n=e.selection,r=e.media,s=e.onLoading,l=e.onLoadingMedia,c=e.onLoadingCategory,u=e.pie,p=e.full,g=(e.positive,e.neutral,e.negative,(0,_.Z)(e,["className","coverage","selection","media","onLoading","onLoadingMedia","onLoadingCategory","pie","full","positive","neutral","negative"]));return(0,d.jsxs)(h.X2,{gutter:[h.v5,h.v5],children:[(0,d.jsx)(h.JX,{xs:24,md:24,lg:p?12:24,xl:p?24:12,children:(0,d.jsx)(h.Zb,(0,o.Z)((0,i.Z)({title:a.title,onLoading:s},g),{children:(0,d.jsx)(h._W,(0,i.Z)({className:t,id:"coverage",type:"bar"},a))}))}),(0,d.jsx)(h.JX,{xs:24,md:24,lg:p?12:24,xl:p?24:12,children:(0,d.jsx)(h.Zb,(0,o.Z)((0,i.Z)({title:u.title},g),{children:(0,d.jsx)(h._W,(0,i.Z)({className:t,id:"pietone",type:"pie"},u))}))}),(0,d.jsx)(h.JX,{xs:24,md:24,lg:p?24:12,xl:p?24:12,children:(0,d.jsx)(h.Zb,(0,o.Z)((0,i.Z)({title:n.title,onLoading:l},g),{children:(0,d.jsx)(h._W,(0,i.Z)({className:t,id:"selection",type:"bar"},n))}))}),(0,d.jsx)(h.JX,{xs:24,md:24,lg:p?24:12,xl:p?24:12,children:(0,d.jsx)(h.Zb,(0,o.Z)((0,i.Z)({title:r.title,onLoading:c},g),{children:(0,d.jsx)(h._W,(0,i.Z)({className:t,id:"media",type:"bar"},r))}))})]})},k=a(25617),w=a(84865),z=a(73939),C=a(3698),F=a(63820),X=a(58742),N={display:"-webkit-box",maxWidth:"100%",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},D=function(e){var t=e.data,a=(e.modal,e.pagination),n=e.onLoading,r=(e.onDetailClick,e.selfOnClick),o=(0,c.useState)({}),s=o[0],l=o[1],u=(0,c.useState)(!1),p=u[0],g=u[1],y=(0,c.useState)(!1),x=y[0],m=y[1],f=(0,c.useState)(),v=f[0],_=f[1],Z=function(){return(0,d.jsx)(F.Z,{clippingDrawer:s,setClippingDrawer:l,clipListPop:p,setclipListPop:g,saveArticlePop:x,setsaveArticlePop:m,keyword:v})};return(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{style:{minHeight:100,maxHeight:"50vh",overflowY:"scroll"},children:[1==n&&(0,d.jsx)(h.gb,{}),t.length>0?t.map((function(e,t){return(0,d.jsx)(h.TH,{style:{background:t%2==0?"rgba(54, 65, 76, 0.1)":null,paddingLeft:6,paddingRight:6,paddingTop:8,paddingBottom:8,marginBottom:12},onClick:function(){r||(0,X.Mr)({article_id:e.id}).then((function(e){return e.json()})).then((function(t){_(t.data),l(e.detail),g(!0)})).catch((function(e){return console.log(e)}))},ellipsis:!0,title:(0,d.jsx)("a",{style:{color:"rgb(0, 143, 251)",fontWeight:600},children:e.title}),content:(0,d.jsx)(h.X2,{gutter:[0],children:(0,d.jsxs)(h.JX,{span:24,children:[(0,d.jsxs)("div",{style:{margin:"5px 0",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,d.jsx)("div",{style:{fontWeight:600},children:e.detail.media_name.length>0?e.detail.media_name:"undifined"}),(0,d.jsx)("div",{children:e.detail.datee.length>0?e.detail.datee.split("T").join(" "):"undifined"})]}),(0,d.jsx)("div",{style:N,children:e.content})]})})},e.id)})):(0,d.jsx)("div",{style:{minHeight:300,height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,d.jsx)(h.HY,{})})]}),(0,d.jsx)(Z,{}),(0,d.jsx)(C.Z,(0,i.Z)({size:"small"},a))]})},P=function(e){var t=e.selectall,a=e.group;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(h.XZ,(0,o.Z)((0,i.Z)({},t),{children:t.label})),(0,d.jsx)(x.Z,{style:{margin:"6px 0"}}),(0,d.jsx)(h.XZ,(0,i.Z)({style:{display:"flex",alignItems:"flex-start",flexDirection:"column",height:200,width:"100%",overflow:"auto"},type:"group"},a))]})},T=a(56267),O=a(99761),E={tablet:"(min-width: 300px) and (max-width: 780px)"},L={height:"90%"},I=function(e){var t,a,u,y,_=(0,k.I0)(),C=(0,k.v9)((function(e){return e.analytic})),N=(0,k.v9)((function(e){return e.filter})),I=(0,k.v9)((function(e){return e.excellconfig})),J=(0,c.useState)({}),M=(J[0],J[1]),W=(0,c.useState)(!1),A=(W[0],W[1]),U=(0,c.useState)(!1),R=(U[0],U[1],(0,c.useState)([])),$=(R[0],R[1],C.mediaVisibility),Y=C.coverageTonality,H=C.trendingHighLights,B=C.toneCategory,V=C.toneMedia,q=C.ews,G=C.article,K=C.articlePositive,Q=C.articleNegative,ee=C.articleNeutral,te=N.filter,ae=N.category,ne=I.excelCol,re=(0,c.useState)(!1),ie=re[0],oe=re[1],se=(0,c.useState)(!1),le=(se[0],se[1]),de=(0,c.useState)(!0),ce=de[0],ue=de[1],pe=(0,c.useState)({}),ge=pe[0],ye=pe[1],xe=(0,c.useState)({}),he=xe[0],me=xe[1],fe=(0,c.useState)({}),ve=fe[0],_e=fe[1],Ze=(0,c.useState)({}),be=Ze[0],je=Ze[1],Se=(0,c.useState)({}),ke=Se[0],we=Se[1],ze=(0,c.useState)(!1),Ce=ze[0],Fe=ze[1],Xe=(0,c.useState)(!1),Ne=Xe[0],De=Xe[1],Pe=(0,c.useState)(!1),Te=Pe[0],Oe=Pe[1],Ee=(0,c.useState)(!0),Le=Ee[0],Ie=Ee[1],Je=(0,c.useState)([]),Me=Je[0],We=Je[1],Ae=(0,c.useState)(!1),Ue=Ae[0],Re=Ae[1],$e=(0,c.useState)(),Ye=$e[0],He=$e[1],Be=(0,c.useState)(!0),Ve=Be[0],qe=(Be[1],(0,c.useState)((0,o.Z)((0,i.Z)({},te.result),{columns:[]}))),Ge=qe[0],Ke=qe[1],Qe=(0,c.useState)((0,o.Z)((0,i.Z)({},te.result),{columns:[]})),et=Qe[0],tt=Qe[1];(0,c.useEffect)((function(){(0,v.Z)(E,He)}),[Ye]);var at=(0,c.useMemo)((function(){var e;return(null===(e=ae.result.results)||void 0===e?void 0:e.filter((function(e){return 0!==e.category_set})).map((function(e){return(0,o.Z)((0,i.Z)({},e),{checked:!1})})))||[]}),[ae]);(0,c.useEffect)((function(){_((0,w.$i)(te.result)),_((0,w.R9)(te.result)),_((0,w.Zx)(te.result)),_((0,w.ZX)(te.result)),_((0,w.GL)(te.result)),_((0,w.kI)(te.result))}),[te]),(0,c.useEffect)((function(){nt(),it(),rt()}),[]),(0,c.useEffect)((function(){setTimeout((function(){ue(!1)}),200)}),[ce]),(0,c.useEffect)((function(){setTimeout((function(){Ie(!1)}),1e5)}),[Le]);var nt=function(e,t,a){return ot({type:"article-positive",page:0,maxSize:10,order_by:"datee",order:"desc",showModal:!1,data:{y:1}})},rt=function(e,t,a){return ot({type:"article-negative",page:0,maxSize:10,order_by:"datee",order:"desc",showModal:!1,data:{y:-1}})},it=function(e,t,a){return ot({type:"article-neutral",page:0,maxSize:10,order_by:"datee",order:"desc",showModal:!1,data:{y:0}})},ot=function(e){var t=e.data.x,a=e.data.x,n=new Date(e.data.x),r=e.data.y,s=e.data.y,l=new Date(e.data.y),d=new Date(te.result.start_date),c=new Date(te.result.end_date);if(Math.abs(d-c)/864e5>31)if("tonality"!==e.type){var u=e.data.x.split("-"),p=new Date(n.getFullYear(),n.getMonth()+1,0).getDate();u[2]=p,a=u=u.join("-")}else{var g=e.data.y.split("-"),y=new Date(l.getFullYear(),l.getMonth()+1,0).getDate();g[2]=y,s=g=g.join("-")}"visibility"==e.type?(_((0,w.yU)((0,o.Z)((0,i.Z)({},te.result),{category_id:e.data.y,start_date:t,end_date:a,page:e.page,maxSize:e.maxSize}))),ye((0,o.Z)((0,i.Z)({},e),{desc:{Category:e.data.y,"Start Date":t,"End Date":a}}))):"pie"==e.type?(_((0,w.yU)((0,o.Z)((0,i.Z)({},te.result),{category_id:e.data.y,start_date:te.result.start_date,end_date:te.result.end_date,page:e.page,maxSize:e.maxSize}))),ye((0,o.Z)((0,i.Z)({},e),{desc:{Category:e.data.y}}))):"article-positive"==e.type?(_((0,w.zi)((0,o.Z)((0,i.Z)({},te.result),{tone:1,start_date:te.result.start_date,end_date:te.result.end_date,page:e.page,maxSize:e.maxSize}))),me((0,o.Z)((0,i.Z)({},e),{desc:{Tone:"Positive"}}))):"article-negative"==e.type?(_((0,w.Wm)((0,o.Z)((0,i.Z)({},te.result),{tone:-1,start_date:te.result.start_date,end_date:te.result.end_date,page:e.page,maxSize:e.maxSize}))),je((0,o.Z)((0,i.Z)({},e),{desc:{Tone:"Negative"}}))):"article-neutral"==e.type?(_((0,w.DV)((0,o.Z)((0,i.Z)({},te.result),{tone:0,start_date:te.result.start_date,end_date:te.result.end_date,page:e.page,maxSize:e.maxSize}))),_e((0,o.Z)((0,i.Z)({},e),{desc:{Tone:"Neutral"}}))):"coverage"==e.type?(_((0,w.yU)((0,o.Z)((0,i.Z)({},te.result),{tone:e.data.y,start_date:t,end_date:a,page:e.page,maxSize:e.maxSize}))),ye((0,o.Z)((0,i.Z)({},e),{desc:{Tone:1==e.data.y?"Positive":-1==e.data.y?"Negative":"Neutral","Start Date":t,"End Date":a}}))):"coverage-bar"==e.type?(_((0,w.yU)((0,o.Z)((0,i.Z)({},te.result),{tone:e.data.x,media_id:e.data.y,start_date:te.result.start_date,end_date:te.result.end_date,page:e.page,maxSize:e.maxSize}))),ye((0,o.Z)((0,i.Z)({},e),{desc:{Tone:1==e.data.x?"Positive":-1==e.data.x?"Negative":"Neutral",Date:e.data.media_name}}))):"coverage-barhor"==e.type?(_((0,w.yU)((0,o.Z)((0,i.Z)({},te.result),{category_id:e.data.y,tone:e.data.x,start_date:te.result.start_date,end_date:te.result.end_date,page:e.page,maxSize:e.maxSize}))),ye((0,o.Z)((0,i.Z)({},e),{desc:{Tone:1==e.data.x?"Positive":-1==e.data.x?"Negative":"Neutral",Category:e.data.y}}))):"ews"==e.type?(_((0,w.yU)((0,o.Z)((0,i.Z)({},te.result),{category_id:e.data.y,start_date:t,end_date:a,page:e.page,maxSize:e.maxSize}))),ye((0,o.Z)((0,i.Z)({},e),{desc:{Category:e.data.y,"Start Date":t,"End Date":a}}))):"tonality"==e.type&&(_((0,w.yU)((0,o.Z)((0,i.Z)({},te.result),{tone:e.data.x,start_date:r,end_date:s,page:e.page,maxSize:e.maxSize}))),ye((0,o.Z)((0,i.Z)({},e),{desc:{Tone:1==e.data.x?"Positive":-1==e.data.x?"Negative":"Neutral","Start Date":r,"End Date":s}}))),le(!0)},st=function(e){var t=e.data.x,a=e.data.x,n=new Date(e.data.x),r=e.data.y,s=e.data.y,l=new Date(e.data.y),d=new Date(te.result.start_date),c=new Date(te.result.end_date);if(Math.abs(d-c)/864e5>31)if("tonality"!==e.type){var u=e.data.x.split("-"),p=new Date(n.getFullYear(),n.getMonth()+1,0).getDate();u[2]=p,a=u=u.join("-")}else{var g=e.data.y.split("-"),y=new Date(l.getFullYear(),l.getMonth()+1,0).getDate();g[2]=y,s=g=g.join("-")}"visibility"==e.type?(_((0,w.yU)((0,o.Z)((0,i.Z)({},te.result),{category_id:e.data.y,start_date:t,end_date:a,page:e.page,maxSize:e.maxSize}))),ye((0,o.Z)((0,i.Z)({},e),{desc:{Category:e.data.y,"Start Date":t,"End Date":a}}))):"pie"==e.type?(_((0,w.yU)((0,o.Z)((0,i.Z)({},te.result),{category_id:e.data.y,start_date:te.result.start_date,end_date:te.result.end_date,page:e.page,maxSize:e.maxSize}))),ye((0,o.Z)((0,i.Z)({},e),{desc:{Category:e.data.y}}))):"pie-cov"==e.type?(_((0,w.yU)((0,o.Z)((0,i.Z)({},te.result),{tone:e.data.y,start_date:te.result.start_date,end_date:te.result.end_date,page:e.page,maxSize:e.maxSize}))),ye((0,o.Z)((0,i.Z)({},e),{desc:{Tone:1==e.data.y?"Positive":-1==e.data.y?"Negative":"Neutral"}}))):"coverage"==e.type?(_((0,w.yU)((0,o.Z)((0,i.Z)({},te.result),{tone:e.data.y,start_date:t,end_date:a,page:e.page,maxSize:e.maxSize}))),ye((0,o.Z)((0,i.Z)({},e),{desc:{Tone:1==e.data.y?"Positive":-1==e.data.y?"Negative":"Neutral","Start Date":t,"End Date":a}}))):"coverage-bar"==e.type?(_((0,w.yU)((0,o.Z)((0,i.Z)({},te.result),{tone:e.data.x,media_id:e.data.y,start_date:te.result.start_date,end_date:te.result.end_date,page:e.page,maxSize:e.maxSize}))),ye((0,o.Z)((0,i.Z)({},e),{desc:{Tone:1==e.data.x?"Positive":-1==e.data.x?"Negative":"Neutral",Date:e.data.media_name}}))):"coverage-barhor"==e.type?(_((0,w.yU)((0,o.Z)((0,i.Z)({},te.result),{category_id:e.data.y,tone:e.data.x,start_date:te.result.start_date,end_date:te.result.end_date,page:e.page,maxSize:e.maxSize}))),ye((0,o.Z)((0,i.Z)({},e),{desc:{Tone:1==e.data.x?"Positive":-1==e.data.x?"Negative":"Neutral",Category:e.data.y}}))):"ews"==e.type?(_((0,w.yU)((0,o.Z)((0,i.Z)({},te.result),{category_id:e.data.y,start_date:t,end_date:a,page:e.page,maxSize:e.maxSize}))),ye((0,o.Z)((0,i.Z)({},e),{desc:{Category:e.data.y,"Start Date":t,"End Date":a}}))):"tonality"==e.type&&(_((0,w.yU)((0,o.Z)((0,i.Z)({},te.result),{tone:e.data.x,start_date:r,end_date:s,page:e.page,maxSize:e.maxSize}))),ye((0,o.Z)((0,i.Z)({},e),{desc:{Tone:1==e.data.x?"Positive":-1==e.data.x?"Negative":"Neutral","Start Date":r,"End Date":s}}))),oe(!0)},lt=function(){var e;return console.log(C),(0,d.jsx)(D,{onDetailClick:function(e){M(e),A(!0)},data:(null===(e=K.result.data)||void 0===e?void 0:e.map((function(e){return{id:e.article_id,title:e.title,content:e.content,detail:e}})))||[],onLoading:K.loading,pagination:{showSizeChanger:!0,total:K.result.recordsTotal||0,showTotal:function(e){return"Total ".concat(K.result.recordsTotal," data")},defaultPageSize:he.maxSize||0,defaultCurrent:he.page+1||0,onChange:function(e,t){return st((0,o.Z)((0,i.Z)({},he),{page:e-1,maxSize:t}))}}})},dt=function(){var e;return console.log(C),(0,d.jsx)(D,{onDetailClick:function(e){M(e),A(!0)},data:(null===(e=ee.result.data)||void 0===e?void 0:e.map((function(e){return{id:e.article_id,title:e.title,content:e.content,detail:e}})))||[],onLoading:ee.loading,pagination:{showSizeChanger:!0,total:ee.result.recordsTotal||0,showTotal:function(e){return"Total ".concat(ee.result.recordsTotal," data")},defaultPageSize:ve.maxSize||0,defaultCurrent:ve.page+1||0,onChange:function(e,t){return st((0,o.Z)((0,i.Z)({},ve),{page:e-1,maxSize:t}))}}})},ct=function(){var e;return console.log(C),(0,d.jsx)(D,{onDetailClick:function(e){M(e),A(!0)},data:(null===(e=Q.result.data)||void 0===e?void 0:e.map((function(e){return{id:e.article_id,title:e.title,content:e.content,detail:e}})))||[],onLoading:Q.loading,pagination:{showSizeChanger:!0,total:Q.result.recordsTotal||0,showTotal:function(e){return"Total ".concat(Q.result.recordsTotal," data")},defaultPageSize:be.maxSize||0,defaultCurrent:be.page+1||0,onChange:function(e,t){return st((0,o.Z)((0,i.Z)({},be),{page:e-1,maxSize:t}))}}})},ut=function(){var e;return console.log(C),(0,d.jsx)(z.Z,{onDetailClick:function(e){M(e),A(!0)},onLoading:G.loading,modal:{title:"Article List ".concat(ge.desc?"("+Object.keys(ge.desc).map((function(e){return e+": "+ge.desc[e]}))+")":""),visible:ie&&!G.loading,close:function(){return oe(!1)}},data:(null===(e=G.result.data)||void 0===e?void 0:e.map((function(e){return{id:e.article_id,title:e.title,content:e.content,detail:e}})))||[],pagination:{showSizeChanger:!0,total:G.result.recordsTotal||0,showTotal:function(e){return"Total ".concat(G.result.recordsTotal," data")},defaultPageSize:ge.maxSize||0,defaultCurrent:ge.page+1||0,onChange:function(e,t){return st((0,o.Z)((0,i.Z)({},ge),{page:e-1,maxSize:t}))}}})},pt=function(e){var t=[],a=[],n=[];return e.forEach((function(e){e.tones.forEach((function(e){e.negative?t.push(e.negative):e.positive?a.push(e.positive):e.neutral&&n.push(e.neutral)}))})),[{name:"Negative",data:t},{name:"Neutral",data:n},{name:"Positive",data:a}]},gt=(0,c.useRef)(null),yt=(0,c.useRef)(null),xt=(0,c.useRef)(null),ht=(0,c.useRef)(null),mt=(0,c.useRef)(null),ft=(0,c.useRef)(null),vt=(0,s.Z)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,a=e.quality,n=g((0,c.useState)(null),2),r=n[0],i=n[1],o=g((0,c.useState)(null),2),s=o[0],l=o[1];return[r,function(e){if(!e)throw new Error("You should provide correct html node.");return p()(e).then((function(e){var n=document.createElement("canvas"),r=n.getContext("2d"),o=e.width,s=e.height;n.width=o,n.height=s,r.drawImage(e,0,0);var l=n.toDataURL(t,a);return i(l),l})).catch(l)},{error:s}]}({type:"image/jpeg",quality:1}),2),_t=(vt[0],vt[1]),Zt=function(){var e=(0,n.Z)((function(){var e,t,a,n;return(0,l.__generator)(this,(function(r){switch(r.label){case 0:h.t6.info({message:"Currently downloading the power point. Please wait for a while because this process will take some time until the process is complete, thank you"}),e=[],t=[gt,yt,xt,ht,mt,ft],a=0,r.label=1;case 1:return a<t.length?[4,_t(t[a].current)]:[3,4];case 2:n=r.sent(),e.push(n),r.label=3;case 3:return a++,[3,1];case 4:return(0,w.hN)(e).then((function(e){return e.json()})).then((function(e){200==e.code&&window.open(e.data)})).catch((function(e){h.t6.error({message:e.message})})),[2]}}))}));return function(){return e.apply(this,arguments)}}(),bt=(0,c.useMemo)((function(){return"https://ojk.media-insight.id"===(window.location.origin?window.location.origin:"")}),[]),jt=(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(h.zx,{style:kt,icons:"FilePptFilled",shape:"round",type:"primary",danger:"true",onClick:function(){De(!0)},children:"PPT File"}),(0,d.jsx)("span",{style:{margin:"4px 0"}}),(0,d.jsx)(h.zx,{style:{background:"#06d6a0",border:"#06d6a0"},icons:"FileExcelFilled",shape:"round",type:"primary",onClick:function(){_((0,T.R_)(te.result)),_((0,O.Ou)()),Oe(!0),0!==te.result.category_set?tt((0,o.Z)((0,i.Z)({},et),{columns:[te.result.category_set]})):tt((0,o.Z)((0,i.Z)({},et),{columns:at.map((function(e){return e.category_set}))}))},children:"Excel File"})]}),St=function(){var e;return(0,d.jsx)(h.u_,{title:"Download PPT File",closable:!0,onCancel:function(){return De(!1)},visible:Ne,onOk:function(){Zt()},children:(0,d.jsxs)(h.X2,{children:[(0,d.jsx)(h.JX,{span:24,children:(0,d.jsx)("div",{ref:gt,children:(0,d.jsx)(h.Zb,{title:"Visibility Chart",children:(0,d.jsx)(h._W,{type:"line",title:"visibility chart",series:$.result.data?$.result.data.map((function(e){return{name:e.key,data:e.category_id_per_day.buckets.map((function(e){return e.doc_count}))}})):[],chartOptions:f.$E.chartOptions,options:{markers:f.$E.markers,xaxis:{categories:(null===(e=$.result.data)||void 0===e?void 0:e.length)>0?$.result.data[0].category_id_per_day.buckets.map((function(e){return e.key_as_string})):[]},legend:f.$E.legend,tooltip:{theme:"dark",fillSeriesColor:!1}}})})})}),(0,d.jsx)(h.JX,{span:24,children:(0,d.jsx)("div",{ref:yt,children:(0,d.jsx)(h.Zb,{title:"Visibility Pie",children:(0,d.jsx)(h._W,{id:"pie",type:"pie",title:"visibility pie",series:$.result.data?$.result.data.map((function(e){return e.doc_count})):[],options:{labels:$.result.data?$.result.data.map((function(e){return e.key})):[]},chartOptions:{type:"pie",height:300}})})})}),(0,d.jsx)(h.JX,{span:24,children:(0,d.jsx)("div",{ref:xt,children:(0,d.jsx)(h.Zb,{title:"Coverage Tone",children:(0,d.jsx)(h._W,{id:"coverage",type:"bar",title:"coverage tone",series:Y.result.data?Y.result.data.chart_bar.sort((function(e,t){return e.key>t.key?1:-1})).map((function(e){return{name:1==e.key?"Positive":0==e.key?"Neutral":"Negative",data:e.tone_per_day.buckets.map((function(e){return e.doc_count}))}})):[],chartOptions:f.X6.chartOptions,options:{colors:f.X6.colors,plotOptions:{bar:{horizontal:!1,borderRadius:6}},xaxis:{categories:Y.result.data?Y.result.data.chart_bar[0].tone_per_day.buckets.map((function(e){return e.key_as_string})):[]},yaxis:{labels:{style:{colors:"#FFFFFF"}}},legend:f.X6.legend}})})})}),(0,d.jsx)(h.JX,{span:24,children:(0,d.jsx)("div",{ref:ht,children:(0,d.jsx)(h.Zb,{title:"Tone by Media Selection",children:(0,d.jsx)(h._W,{id:"selection",type:"bar",title:"tone by media selection",series:V.result.data?pt(V.result.data):[],chartOptions:f.X6.chartOptions,options:{colors:f.X6.colors,plotOptions:f.X6.plotOptions,xaxis:{categories:V.result.data?V.result.data.map((function(e){return e.media_name})):[]},legend:f.X6.legend}})})})}),(0,d.jsx)(h.JX,{span:24,children:(0,d.jsx)("div",{ref:mt,children:(0,d.jsx)(h.Zb,{title:"Tone by Category",children:(0,d.jsx)(h._W,{id:"media",type:"bar",title:"tone by category",series:B.result.data?pt(B.result.data):[],chartOptions:f.X6.chartOptions,options:{colors:f.X6.colors,plotOptions:{bar:{horizontal:!1,borderRadius:6}},xaxis:{categories:B.result.data?B.result.data.filter((function(e){return e.tones.length>0?1:0})).map((function(e){return e.category_id})):[]},legend:f.X6.legend}})})})}),(0,d.jsx)("div",{style:{width:"100%"},ref:ft,children:(0,d.jsx)(h.Zb,{onLoading:q.loading,title:"Early Warning System",children:(0,d.jsx)(b.Z,{height:300,width:"100%",charts:{series:q.result.series,options:{tooltip:{shared:!0},markers:f.$E.markers,stroke:f.$E.stroke,colors:f.$E.colors,xaxis:{categories:q.result.date},yaxis:{show:!0,tickAmount:3,min:0,max:20,labels:{formatter:function(e,t){return 0==e&&e<5?"Potential":e>5&&e<9?"Emerging":e>10&&e<20?"Current":"Crisis"}}}}}})})})]})})},kt={boxShadow:"3px 0px 20px -12px rgba(54, 65, 76, 0.5)"},wt=[{key:"1",title:"Media Visibility",content:(0,d.jsx)("div",{id:"media-visibility-chart",children:(0,d.jsx)(j,{onLoading:$.loading,visibility:{title:"visibility chart",series:$.result.data?$.result.data.map((function(e){return{name:e.key,data:e.category_id_per_day.buckets.map((function(e){return e.doc_count}))}})):[],chartOptions:f.$E.chartOptions,events:{markerClick:function(e,t,a){return st({type:"visibility",page:0,maxSize:10,order_by:"datee",order:"desc",data:{x:$.result.data[a.seriesIndex].category_id_per_day.buckets[a.dataPointIndex].key_as_string,y:$.result.data[a.seriesIndex].key}})}},options:{markers:f.$E.markers,xaxis:{categories:(null===(t=$.result.data)||void 0===t?void 0:t.length)>0?$.result.data[0].category_id_per_day.buckets.map((function(e){return e.key_as_string})):[],labels:{style:{colors:"#FFFFFF"}}},yaxis:{labels:{style:{colors:"#FFFFFF"}}},legend:f.$E.legend,tooltip:{theme:"dark",fillSeriesColor:!1}}},pie:{title:"visibility pie",series:$.result.data?$.result.data.map((function(e){return e.doc_count})):[],options:{labels:$.result.data?$.result.data.map((function(e){return e.key})):[]},chartOptions:{type:"pie",height:300},events:{dataPointSelection:function(e,t,a){return st({type:"pie",page:0,maxSize:10,order_by:"datee",order:"desc",data:{y:$.result.data[a.dataPointIndex].key}})}}},headline:(0,d.jsx)("div",{style:{overflowY:"auto",overflowX:"hidden",height:300},children:(0,d.jsx)(h.X2,{children:null===(a=H.result.data)||void 0===a?void 0:a.map((function(e){return(0,d.jsx)(h.JX,{span:24,children:(0,d.jsx)(h.TH,{ellipsis:!0,title:(0,d.jsx)(h.X2,{children:(0,d.jsxs)(h.JX,{span:24,children:[(0,d.jsx)("span",{children:e.title}),(0,d.jsx)("span",{style:{fontSize:"12px",fontWeight:"bold",display:"block"},children:e.datee})]})}),content:e.content,onClick:function(){(0,X.Mr)({article_id:e.article_id}).then((function(e){return e.json()})).then((function(t){we(e),Fe(!0),We(t.data)})).catch((function(e){return console.log(e)}))}})},e.article_id)}))})})})})},{key:"2",title:"Coverage Tone",content:(0,d.jsx)("div",{id:"coverage-tone-chart",children:(0,d.jsx)(S,{onLoading:Y.loading,onLoadingMedia:V.loading,onLoadingCategory:B.loading,coverage:{title:"coverage tone",series:Y.result.data?Y.result.data.chart_bar.sort((function(e,t){return e.key>t.key?1:-1})).map((function(e){return{name:1==e.key?"Positive":0==e.key?"Neutral":"Negative",data:e.tone_per_day.buckets.map((function(e){return e.doc_count}))}})):[],chartOptions:f.X6.chartOptions,events:{dataPointSelection:function(e,t,a){return st({type:"coverage",page:0,maxSize:10,order_by:"datee",order:"desc",data:{y:"2"==a.seriesIndex?"1":"0"==a.seriesIndex?"-1":"0",x:Y.result.data.chart_bar.find((function(e){var t="2"==a.seriesIndex?"1":"0"==a.seriesIndex?"-1":"0";return e.key==t?e:-1})).tone_per_day.buckets[a.dataPointIndex].key_as_string}})}},options:{colors:f.X6.colors,plotOptions:{bar:{horizontal:!1,borderRadius:6}},xaxis:{categories:Y.result.data?Y.result.data.chart_bar[0].tone_per_day.buckets.map((function(e){return e.key_as_string})):[]},yaxis:{labels:{style:{colors:"#FFFFFF"}}},legend:f.X6.legend,tooltip:{theme:"dark",fillSeriesColor:!1}}},pie:{title:"Coverage pie",series:Y.result.data?Y.result.data.chart_bar.sort((function(e,t){return e.key>t.key?1:-1})).map((function(e){return e.doc_count})):[],options:{labels:["Negative","Neutral","Positive"],colors:f.X6.colors,legend:{position:"right",horizontalAlign:"center",verticalAlign:"center",markers:{width:8,height:8,radius:2,offsetY:0}}},chartOptions:{type:"pie",height:300},events:{dataPointSelection:function(e,t,a){return st({type:"pie-cov",page:0,maxSize:10,order_by:"datee",order:"desc",data:{y:Y.result.data.chart_bar.sort((function(e,t){return e.key>t.key?1:-1}))[a.dataPointIndex].key}})}}},selection:{title:"tone by media selection",series:V.result.data?pt(V.result.data):[],chartOptions:f.X6.chartOptions,events:{dataPointSelection:function(e,t,a){return st({type:"coverage-bar",page:0,maxSize:10,order_by:"datee",order:"desc",data:{y:V.result.data[a.dataPointIndex].media_id,x:a.seriesIndex-1},media_name:V.result.data[a.dataPointIndex].media_name})}},options:{colors:f.X6.colors,plotOptions:f.X6.plotOptions,xaxis:{categories:V.result.data?V.result.data.map((function(e){return e.media_name})):[]},yaxis:{labels:{style:{colors:"#FFFFFF"}}},legend:f.X6.legend,tooltip:{theme:"dark",fillSeriesColor:!1}}},media:{title:"tone by category",series:B.result.data?pt(B.result.data):[],chartOptions:f.X6.chartOptions,events:{click:function(e,t,a){return st({type:"coverage-barhor",page:0,maxSize:10,order_by:"datee",order:"desc",data:{y:B.result.data[a.dataPointIndex].category_id,x:a.seriesIndex-1}})}},options:{colors:f.X6.colors,plotOptions:{bar:{horizontal:!1,borderRadius:6}},xaxis:{categories:B.result.data?B.result.data.filter((function(e){return e.tones.length>0?1:0})).map((function(e){return e.category_id})):[],labels:{style:{colors:"#FFFFFF"}}},yaxis:{labels:{style:{colors:"#FFFFFF"}}},legend:f.X6.legend,tooltip:{theme:"dark",fillSeriesColor:!1}}}})})}];return(0,d.jsxs)("div",{style:{height:"100%",marginBottom:"1rem"},children:[(0,d.jsx)("div",{style:{position:"absolute",zIndex:999,right:20,bottom:"tablet"==Ye?"30%":100},children:(0,d.jsx)(h.Lt,{direction:"vertical",trigger:"hover",overlayStyle:{background:"transparent"},placement:"topCenter",overlayHeight:"100%",overlay:jt,children:(0,d.jsx)(h.zx,{loading:Ue,style:kt,onClick:function(e){return e.preventDefault()},type:"primary",icons:"DownloadOutlined",shape:"round",children:"Download"})})}),(0,d.jsxs)(h.X2,{children:[(0,d.jsx)(h.JX,{md:24,lg:6,children:(0,d.jsx)(h.X2,{children:Y.result.data?Y.result.data.widget.map((function(e){return(0,d.jsx)(h.JX,{xs:24,md:8,lg:24,xl:24,order:"positive"==e.type?1:"negative"==e.type?3:(e.type,2),children:(0,d.jsx)(h.$L,{onLoading:Y.loading,id:e.id,type:e.type,label:e.label,description:e.description,total:e.total,status:e.status,percent:"".concat(e.percent,"%")})},e.id)})):m.HC.map((function(e){return(0,d.jsx)(h.JX,{xs:24,md:8,lg:24,xl:24,children:(0,d.jsx)(h.$L,{onLoading:Y.loading,id:e.id,type:e.type,label:e.label,description:e.description,total:e.total,status:e.status,percent:"".concat(e.percent,"%")})},e.id)}))})}),(0,d.jsx)(h.JX,{xs:24,md:24,lg:18,children:(0,d.jsx)(h.Zb,{onLoading:Y.loading,children:(0,d.jsx)("div",{id:"coverage-tonality-chart",children:(0,d.jsx)(Z,{height:290,charts:{events:{markerClick:function(e,t,a){return st({type:"tonality",page:0,maxSize:10,order_by:"datee",order:"desc",data:{x:a.seriesIndex-1,y:q.result.date[a.dataPointIndex]}})}},options:(0,r.Z)({title:{text:"Media Sentiment Breakdown",align:"left",offsetY:5,floating:!0,style:{fontSize:"14px",fontWeight:500,color:"#fff"}},tooltip:{shared:!0},markers:f.$E.markers,xaxis:{categories:Y.result.data?Y.result.data.chart_bar[0].tone_per_day.buckets.map((function(e){return e.key_as_string})):[" "]},stroke:f.$E.stroke,colors:["#ff6b6b","#1990ff","#06d6a0"],yaxis:{labels:{style:{colors:"#FFFFFF"}}},legend:{position:"top",horizontalAlign:"right",markers:f.$E.legend.markers}},"tooltip",{theme:"dark",fillSeriesColor:!1}),series:Y.result.data?Y.result.data.chart_bar.sort((function(e,t){return e.key>t.key?1:-1})).map((function(e){return{name:1==e.key?"Positive":-1==e.key?"Negative":"Neutral",data:e.tone_per_day.buckets.map((function(e){return e.doc_count}))}})):[]}})})})}),(0,d.jsx)(x.Z,{}),(0,d.jsxs)(h.X2,{children:[(0,d.jsx)(h.JX,{xs:24,md:24,lg:8,xl:8,children:(0,d.jsx)(h.Zb,{title:"Positive",children:(0,d.jsx)(lt,{})})}),(0,d.jsx)(h.JX,{xs:24,md:24,lg:8,xl:8,children:(0,d.jsx)(h.Zb,{title:"Neutral",children:(0,d.jsx)(dt,{})})}),(0,d.jsx)(h.JX,{xs:24,md:24,lg:8,xl:8,children:(0,d.jsx)(h.Zb,{title:"negative",children:(0,d.jsx)(ct,{})})})]}),(0,d.jsx)(x.Z,{}),(0,d.jsx)(h.JX,{span:24,style:L,children:(0,d.jsx)(h.li,{style:L,defaultActiveKey:"1",data:wt})})]}),(0,d.jsx)(F.Z,{clippingDrawer:ke,setClippingDrawer:we,clipListPop:Ce,setclipListPop:Fe,saveArticlePop:!1,keyword:Me}),(0,d.jsx)(ut,{}),(0,d.jsx)(St,{}),(0,d.jsxs)(h.u_,{title:"Download Excell File",closable:!0,onCancel:function(){return Oe(!1)},visible:Te,footer:[(0,d.jsx)(h.zx,{type:"dashed",danger:!0,disabled:!!(0==Ge.columns.length&0==et.columns.length),onClick:function(){Ke((0,o.Z)((0,i.Z)({},te.result),{columns:[]})),tt((0,o.Z)((0,i.Z)({},te.result),{columns:[]}))},children:"Reset"},"reset"),(0,d.jsx)(h.zx,{type:"primary",disabled:!(Ge.columns.length>0&et.columns.length>0),loading:Ue,onClick:function(){Re(!0),(0,w.r8)((0,o.Z)((0,i.Z)({url:bt,columns:Ge.columns},te.result),{category_set:et.columns.join(",")})).then((function(e){return e.json()})).then((function(e){window.open(e.data),Re(!1),Oe(!1),Ke((0,o.Z)((0,i.Z)({},te.result),{columns:[]}))})).catch((function(e){h.t6.error({message:"Error when download excel!"}),Re(!1),Oe(!1),Ke((0,o.Z)((0,i.Z)({},te.result),{columns:[]}))}))},children:"Download File"},"submit")],children:[(0,d.jsx)("p",{children:"Columns:"}),(0,d.jsx)(P,{id:"columns",selectall:{indeterminate:Ve,onChange:function(e){e.target.checked?Ke((0,o.Z)((0,i.Z)({},Ge),{columns:ne.result.data.map((function(e){return e.name}))})):Ke((0,o.Z)((0,i.Z)({},Ge),{columns:[]}))},checked:Ge.columns.length==(null===(u=ne.result.data)||void 0===u?void 0:u.length),label:"Select All (".concat(Ge.columns.length,"/").concat(null===(y=ne.result.data)||void 0===y?void 0:y.length,")")},group:{onChange:function(e){Ke((0,o.Z)((0,i.Z)({},Ge),{columns:e}))},value:Ge.columns,options:ne.result.data?ne.result.data.map((function(e){return{value:e.name,label:e.name,checked:e.checked}})):[]}}),(0,d.jsx)("p",{style:{marginTop:"20px"},children:"Categories:"}),(0,d.jsx)(P,{id:"columns",selectall:{indeterminate:Ve,onChange:function(e){e.target.checked?tt((0,o.Z)((0,i.Z)({},et),{columns:at.map((function(e){return e.category_set}))})):tt((0,o.Z)((0,i.Z)({},et),{columns:[]}))},checked:et.columns.length==at.length,label:"Select All (".concat(et.columns.length,"/").concat(at.length,")")},group:{onChange:function(e){tt((0,o.Z)((0,i.Z)({},et),{columns:e}))},value:et.columns,options:at?null===at||void 0===at?void 0:at.map((function(e){return{value:e.category_set,label:e.descriptionz,checked:e.checked}})):[]}}),(0,d.jsxs)("div",{style:{margin:"6px 0 0"},children:[(0,d.jsx)("b",{children:"Note:"})," you can only download the columns that are selected."]})]})]})}},56267:function(e,t,a){"use strict";a.d(t,{R_:function(){return l},Sg:function(){return u},d4:function(){return c},uL:function(){return d}});var n=a(47568),r=a(97582),i=a(86763),o=a(74034),s="dashboard/excel/columns",l=function(e){return function(){var t=(0,n.Z)((function(t,a){var n,l,d;return(0,r.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),t({type:i.AU}),n=JSON.parse(localStorage.getItem("userToken")),[4,(0,o.Be)(s,n.token,e)];case 1:return[4,(l=a.sent()).json()];case 2:return l=a.sent(),t({type:i.pL,result:l}),[3,4];case 3:return d=a.sent(),t({type:i.mV,result:d}),[3,4];case 4:return[2]}}))}));return function(e,a){return t.apply(this,arguments)}}()},d=function(e){return new Promise((function(t,a){var n=JSON.parse(localStorage.getItem("userToken"));return(0,o.SD)(s,n.token,e).then((function(e){return t(e)}))}))},c=function(e){return new Promise((function(t,a){var n=JSON.parse(localStorage.getItem("userToken"));return(0,o._o)(s,n.token,e).then((function(e){return t(e)}))}))},u=function(e,t){return new Promise((function(a,n){var r=JSON.parse(localStorage.getItem("userToken"));return(0,o.Y2)("".concat(s,"/").concat(e),r.token,t).then((function(e){return a(e)}))}))}}},function(e){e.O(0,[443,840,874,774,888,179],(function(){return t=28036,e(e.s=t);var t}));var t=e.O();_N_E=t}]);