(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[673],{35156:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/search",function(){return n(96532)}])},96532:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var r=n(26042),a=n(69396),i=n(85893),s=n(67294),c=n(25617),l=n(86785),o=n(47568),u=n(97582),d=n(13448),h=n(27049),f=n(58742),g=n(894),m=(n(36093),function(e){var t=e.data,n=void 0===t?[]:t,a=e.pagination,m=(e.dataPag,e.searchForm),p=e.handleSearch,_=((0,c.I0)(),(0,s.useState)(!1)),x=_[0],j=_[1],v=(0,s.useState)({}),y=v[0],S=v[1],Z=(0,s.useState)([]),w=Z[0],b=Z[1],P=(0,s.useState)(!1),k=P[0],C=P[1],E=(0,s.useState)(!1),I=E[0],T=E[1],z=(0,s.useState)(!1),N=z[0],X=z[1],F=function(){var e=(0,o.Z)((function(e,t,n,r,a){var i;return(0,u.__generator)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),X(!0),null,[4,(0,f.yz)({article_id:y.article_id,category_ids:y.categories,datee:y.datee.split(" ")[0],media_id:y.media_id,tone:t,advalue_fc:y.rate_fc,circulation:y.circulation,advalue_bw:y.rate_bw})];case 1:return e.sent(),j(!1),S({}),C(!1),p(m),X(!1),d.Z.success({message:"Data has been Updated",duration:3}),[3,3];case 2:return i=e.sent(),console.log(i),d.Z.error({message:"Please check your update request!!",duration:3}),[3,3];case 3:return[2]}}))}));return function(t,n,r,a,i){return e.apply(this,arguments)}}();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:{padding:"12px 0"},children:[0==n?(0,i.jsx)("div",{style:{display:"flex",minHeight:500,width:"100%",maxHeight:600,overflowY:"auto",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)(l.HY,{description:"Please Search Article"})}):n.map((function(e){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.TH,{ellipsis:!0,title:(0,i.jsxs)("div",{style:{display:"flex",width:"100%",position:"relative",flexDirection:"column","&:hover":{background:"red"}},children:[(0,i.jsx)("h5",{style:{margin:0,cursor:"pointer"},onClick:function(){return e.article_id,t=e,void(0,f.Mr)({article_id:t.article_id}).then((function(e){return e.json()})).then((function(e){b(e.data),j(!0),S(t)})).catch((function(e){return console.log(e)}));var t},className:"title-search",children:e.title}),(0,i.jsxs)("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"space-between",minWidth:"100%",margin:"6px 0"},children:[(0,i.jsx)("a",{style:{textTransform:"initial"},href:e.file_pdf,target:"_BLANK",rel:"noreferrer",children:e.media_name}),(0,i.jsx)("div",{children:e.datee})]})]}),content:e.content},e.article_id),(0,i.jsx)(h.Z,{})]})})),(0,i.jsx)(i.Fragment,{children:0==n?null:(0,i.jsx)(l.tl,(0,r.Z)({size:"small"},a))})]}),x?(0,i.jsx)(g.Z,{setclipEditingPop:j,setEditingDrawerTemp:S,clipEditingPop:x,editingDrawerTemp:y,handleSubmitEditingModal:F,summaryEdit:I,setsummaryEdit:T,setsaveArticlePop:C,saveArticlePop:k,buttonLoading:N,setbuttonLoading:X,keyword:w,search:!0}):null]})}),p=n(63426),_=(n(49552),n(83401)),x=function(e){return new Promise((function(t,n){var r=JSON.parse(localStorage.getItem("userToken"));return(0,_.SD)("search/",r.token,e).then((function(e){return t(e)}))}))},j=function(){var e,t=(0,c.I0)(),n=(0,c.v9)((function(e){return e.searching})),d=(0,c.v9)((function(e){return e.filter})),h=n.searchMedia,f=(n.searchSubcat,d.filter),g=(0,s.useState)(0),j=g[0],v=g[1],y=(0,s.useState)(10),S=y[0],Z=y[1],w=(0,s.useState)({page:0,maxSize:10}),b=w[0],P=w[1];(0,s.useEffect)((function(){var e;h.loaded||t(function(){var t=(0,o.Z)((function(t,n){var r,a,i;return(0,u.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),t({type:p.pTE}),r=JSON.parse(localStorage.getItem("userToken")),[4,(0,_.Be)("media-categories/",r.token,e)];case 1:return[4,(a=n.sent()).json()];case 2:return a=n.sent(),t({type:p.rgi,result:a}),[3,4];case 3:return i=n.sent(),t({type:p.WqH,result:i}),[3,4];case 4:return[2]}}))}));return function(e,n){return t.apply(this,arguments)}}())}),[]);var k=function(e){x((0,a.Z)((0,r.Z)({},b),{page:0,maxSize:10,term:b.term,search_field:b.search_field,media_category:b.media_category,start_date:f.result.start_date,end_date:f.result.end_date})).then((function(e){return e.json()})).then((function(e){P((0,r.Z)((0,a.Z)((0,r.Z)({},b),{page:0,maxSize:10}),e)),v(0),Z(10)})).catch((function(e){return console.log(e)}))};return(0,i.jsxs)(l.Zb,{shadow:"false",children:[(0,i.jsx)(l.l0,{children:(0,i.jsxs)(l.X2,{align:"middle",justify:"center",children:[(0,i.jsx)(l.JX,{xs:24,sm:24,md:8,xl:8,children:(0,i.jsxs)(l.X2,{children:[(0,i.jsx)(l.JX,{span:12,children:(0,i.jsx)(l.l0.Item,{children:(0,i.jsx)(l.Ph,{placeholder:"Select Media",optionFilterProp:"children",id:"media_category",onChange:function(e){P((0,a.Z)((0,r.Z)({},b),{media_category:e,category_id:"all"}))},options:(null===(e=h.result.results)||void 0===e?void 0:e.map((function(e){return{value:e.key,label:e.value}})))||[]})})}),(0,i.jsx)(l.JX,{span:12,children:(0,i.jsx)(l.l0.Item,{children:(0,i.jsx)(l.Ph,{placeholder:"Select by Content",id:"search_field",defaultValue:b.search_field,onChange:function(e){P((0,a.Z)((0,r.Z)({},b),{search_field:e}))},options:[{value:"title",label:"Title"},{value:"content",label:"Content"}]})})})]})}),(0,i.jsx)(l.JX,{xs:24,sm:24,md:16,xl:16,children:(0,i.jsx)(l.l0.Item,{children:(0,i.jsx)(l.II,{type:"search",id:"term",onChange:function(e){P((0,a.Z)((0,r.Z)({},b),{term:e.target.value}))},value:b.term,allowClear:!0,enterButton:(0,i.jsx)(l.JO,{type:"SearchOutlined"}),onSearch:function(){return k()}})})})]})}),(0,i.jsx)(m,{searchForm:b,handleSearch:k,dataPag:{searchPage:j,searchPageSize:S},data:b.results,pagination:{showSizeChanger:!0,total:b.totalItems,showTotal:function(e){return"Article Found ".concat(e)},current:j+1,pageSize:S,onChange:function(e,t){P((0,a.Z)((0,r.Z)({},b),{page:e-1,maxSize:t}),v(e-1),Z(t)),x((0,a.Z)((0,r.Z)({},(0,a.Z)((0,r.Z)({},b),{page:e-1,maxSize:t})),{term:b.term,search_field:b.search_field,media_category:b.media_category,start_date:f.result.start_date,end_date:f.result.end_date})).then((function(e){return e.json()})).then((function(e){P((0,r.Z)({},b,e))})).catch((function(e){return console.log(e)}))}}})]})}}},function(e){e.O(0,[840,89,774,888,179],(function(){return t=35156,e(e.s=t);var t}));var t=e.O();_N_E=t}]);