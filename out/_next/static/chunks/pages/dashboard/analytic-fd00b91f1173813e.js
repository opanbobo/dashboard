(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[623],{28036:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/analytic",function(){return n(26394)}])},26394:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return L}});var a=n(47568),i=n(14924),r=n(26042),l=n(69396),o=n(828),s=n(97582),d=n(85893),u=n(67294),c=n(61120),p=n.n(c);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,i,r=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(a=n.next()).done)&&(r.push(a.value),!t||r.length!==t);l=!0);}catch(s){o=!0,i=s}finally{try{l||null==n.return||n.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var f=n(27049),v=n(46097),x=(n(13983),n(4792)),y=n(48513),m=n(99534);var _=function(e){var t=e.className,n=e.charts,a=(0,m.Z)(e,["className","charts"]);return(0,d.jsx)(v._W,(0,r.Z)({className:t,id:"summaryTone",type:"line"},n,a))},b=n(99883),j=function(e){var t=e.className,n=e.visibility,a=e.pie,i=(e.headline,(0,m.Z)(e,["className","visibility","pie","headline"]));return(0,d.jsxs)(v.X2,{children:[(0,d.jsx)(v.JX,{span:24,children:(0,d.jsx)(v.Zb,(0,l.Z)((0,r.Z)({title:n.title},i),{children:(0,d.jsx)("div",{ref:n.ref,children:(0,d.jsx)(v._W,(0,r.Z)({className:t,type:"line"},n))})}))}),(0,d.jsx)(v.JX,{xs:24,md:24,lg:24,xl:24,children:(0,d.jsx)(v.Zb,(0,l.Z)((0,r.Z)({title:a.title},i),{children:(0,d.jsx)(v._W,(0,r.Z)({className:t,id:"pie",type:"pie"},a))}))})]})},Z=function(e){var t=e.className,n=e.coverage,a=e.selection,i=e.media,o=e.onLoading,s=e.onLoadingMedia,u=e.onLoadingCategory,c=e.pie,p=e.full,g=(e.positive,e.neutral,e.negative,(0,m.Z)(e,["className","coverage","selection","media","onLoading","onLoadingMedia","onLoadingCategory","pie","full","positive","neutral","negative"]));return(0,d.jsxs)(v.X2,{gutter:[v.v5,v.v5],children:[(0,d.jsx)(v.JX,{xs:24,md:24,lg:p?12:24,xl:p?24:12,children:(0,d.jsx)(v.Zb,(0,l.Z)((0,r.Z)({title:n.title,onLoading:o},g),{children:(0,d.jsx)(v._W,(0,r.Z)({className:t,id:"coverage",type:"bar"},n))}))}),(0,d.jsx)(v.JX,{xs:24,md:24,lg:p?12:24,xl:p?24:12,children:(0,d.jsx)(v.Zb,(0,l.Z)((0,r.Z)({title:c.title},g),{children:(0,d.jsx)(v._W,(0,r.Z)({className:t,id:"pietone",type:"pie"},c))}))}),(0,d.jsx)(v.JX,{xs:24,md:24,lg:p?24:12,xl:p?24:12,children:(0,d.jsx)(v.Zb,(0,l.Z)((0,r.Z)({title:a.title,onLoading:s},g),{children:(0,d.jsx)(v._W,(0,r.Z)({className:t,id:"selection",type:"bar"},a))}))}),(0,d.jsx)(v.JX,{xs:24,md:24,lg:p?24:12,xl:p?24:12,children:(0,d.jsx)(v.Zb,(0,l.Z)((0,r.Z)({title:i.title,onLoading:u},g),{children:(0,d.jsx)(v._W,(0,r.Z)({className:t,id:"media",type:"bar"},i))}))})]})},k=n(25617),S=n(84865),w=n(73939),F=n(3698),C=n(63820),z=n(58742),X={display:"-webkit-box",maxWidth:"100%",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},N=function(e){var t=e.data,n=(e.modal,e.pagination),a=e.onLoading,i=(e.onDetailClick,e.selfOnClick),l=(0,u.useState)({}),o=l[0],s=l[1],c=(0,u.useState)(!1),p=c[0],g=c[1],h=(0,u.useState)(!1),f=h[0],x=h[1],y=(0,u.useState)(),m=y[0],_=y[1],b=function(){return(0,d.jsx)(C.Z,{clippingDrawer:o,setClippingDrawer:s,clipListPop:p,setclipListPop:g,saveArticlePop:f,setsaveArticlePop:x,keyword:m})};return(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{style:{minHeight:100,maxHeight:"50vh",overflowY:"scroll"},children:[1==a&&(0,d.jsx)(v.gb,{}),t.length>0?t.map((function(e,t){return(0,d.jsx)(v.TH,{style:{background:t%2==0?"rgba(54, 65, 76, 0.1)":null,paddingLeft:6,paddingRight:6,paddingTop:8,paddingBottom:8,marginBottom:12},onClick:function(){i||(0,z.Mr)({article_id:e.id}).then((function(e){return e.json()})).then((function(t){_(t.data),s(e.detail),g(!0)})).catch((function(e){return console.log(e)}))},ellipsis:!0,title:(0,d.jsx)("a",{style:{color:"rgb(0, 143, 251)",fontWeight:600},children:e.title}),content:(0,d.jsx)(v.X2,{gutter:[0],children:(0,d.jsxs)(v.JX,{span:24,children:[(0,d.jsxs)("div",{style:{margin:"5px 0",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,d.jsx)("div",{style:{fontWeight:600},children:e.detail.media_name.length>0?e.detail.media_name:"undifined"}),(0,d.jsx)("div",{children:e.detail.datee.length>0?e.detail.datee.split("T").join(" "):"undifined"})]}),(0,d.jsx)("div",{style:X,children:e.content})]})})},e.id)})):(0,d.jsx)("div",{style:{minHeight:300,height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,d.jsx)(v.HY,{})})]}),(0,d.jsx)(b,{}),(0,d.jsx)(F.Z,(0,r.Z)({size:"small"},n))]})},P=function(e){var t=e.selectall,n=e.group;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(v.XZ,(0,l.Z)((0,r.Z)({},t),{children:t.label})),(0,d.jsx)(f.Z,{style:{margin:"6px 0"}}),(0,d.jsx)(v.XZ,(0,r.Z)({style:{display:"flex",alignItems:"flex-start",flexDirection:"column",height:200,width:"100%",overflow:"auto"},type:"group"},n))]})},T=n(56267),O=n(99761),D={tablet:"(min-width: 300px) and (max-width: 780px)"},E={height:"90%"},L=function(e){var t,n,c,h,m,F,X,L,I=(0,k.I0)(),J=(0,k.v9)((function(e){return e.analytic})),W=(0,k.v9)((function(e){return e.filter})),A=(0,k.v9)((function(e){return e.excellconfig})),M=(0,u.useState)({}),R=(M[0],M[1]),$=(0,u.useState)(!1),U=($[0],$[1]),Y=(0,u.useState)(!1),H=(Y[0],Y[1],J.mediaVisibility),B=J.coverageTonality,V=J.trendingHighLights,q=J.toneCategory,G=J.toneMedia,K=J.ews,Q=J.article,ee=J.articlePositive,te=J.articleNegative,ne=J.articleNeutral,ae=W.filter,ie=W.category,re=A.excelCol,le=(0,u.useState)(!1),oe=le[0],se=le[1],de=(0,u.useState)(!1),ue=(de[0],de[1]),ce=(0,u.useState)(!0),pe=ce[0],ge=ce[1],he=(0,u.useState)({}),fe=he[0],ve=he[1],xe=(0,u.useState)({}),ye=xe[0],me=xe[1],_e=(0,u.useState)({}),be=_e[0],je=_e[1],Ze=(0,u.useState)({}),ke=Ze[0],Se=Ze[1],we=(0,u.useState)({}),Fe=we[0],Ce=we[1],ze=(0,u.useState)(!1),Xe=ze[0],Ne=ze[1],Pe=(0,u.useState)(!1),Te=Pe[0],Oe=Pe[1],De=(0,u.useState)(!1),Ee=De[0],Le=De[1],Ie=(0,u.useState)(!0),Je=Ie[0],We=Ie[1],Ae=(0,u.useState)([]),Me=Ae[0],Re=Ae[1],$e=(0,u.useState)(!1),Ue=$e[0],Ye=$e[1],He=(0,u.useState)(),Be=He[0],Ve=He[1],qe=(0,u.useState)(!0),Ge=qe[0],Ke=(qe[1],(0,u.useState)((0,l.Z)((0,r.Z)({},ae.result),{columns:[]}))),Qe=Ke[0],et=Ke[1],tt=(0,u.useState)((0,l.Z)((0,r.Z)({},ae.result),{columns:[]})),nt=tt[0],at=tt[1];(0,u.useEffect)((function(){(0,y.Z)(D,Ve)}),[Be]);var it=(0,u.useMemo)((function(){var e;return(null===(e=ie.result.results)||void 0===e?void 0:e.filter((function(e){return 0!==e.category_set})).map((function(e){return(0,l.Z)((0,r.Z)({},e),{checked:!1})})))||[]}),[ie]);(0,u.useEffect)((function(){I((0,S.$i)(ae.result)),I((0,S.R9)(ae.result)),I((0,S.Zx)(ae.result)),I((0,S.ZX)(ae.result)),I((0,S.GL)(ae.result)),I((0,S.kI)(ae.result)),rt(ae.result),ot(ae.result),lt(ae.result),!B.result.data||B.result.data.chart_bar.sort((function(e,t){return e.key>t.key?1:-1})).map((function(e){return e.doc_count}))}),[ae]),(0,u.useEffect)((function(){setTimeout((function(){ge(!1)}),200)}),[pe]),(0,u.useEffect)((function(){setTimeout((function(){We(!1)}),1e5)}),[Je]);var rt=function(e,t,n){return st({type:"article-positive",page:0,maxSize:10,order_by:"datee",order:"desc",showModal:!1,data:{y:1}})},lt=function(e,t,n){return st({type:"article-negative",page:0,maxSize:10,order_by:"datee",order:"desc",showModal:!1,data:{y:-1}})},ot=function(e,t,n){return st({type:"article-neutral",page:0,maxSize:10,order_by:"datee",order:"desc",showModal:!1,data:{y:0}})},st=function(e){"article-positive"==e.type?setTimeout((function(){I((0,S.zi)((0,l.Z)((0,r.Z)({},ae.result),{tone:1,start_date:ae.result.start_date,end_date:ae.result.end_date,page:e.page,maxSize:e.maxSize}))),me((0,l.Z)((0,r.Z)({},e),{desc:{Tone:"Positive"}}))}),100):"article-negative"==e.type?setTimeout((function(){I((0,S.Wm)((0,l.Z)((0,r.Z)({},ae.result),{tone:-1,start_date:ae.result.start_date,end_date:ae.result.end_date,page:e.page,maxSize:e.maxSize}))),Se((0,l.Z)((0,r.Z)({},e),{desc:{Tone:"Negative"}}))}),100):"article-neutral"==e.type&&setTimeout((function(){I((0,S.DV)((0,l.Z)((0,r.Z)({},ae.result),{tone:0,start_date:ae.result.start_date,end_date:ae.result.end_date,page:e.page,maxSize:e.maxSize}))),je((0,l.Z)((0,r.Z)({},e),{desc:{Tone:"Neutral"}}))}),100),ue(!0)},dt=function(e){var t=e.data.x,n=e.data.x,a=new Date(e.data.x),i=e.data.y,o=e.data.y,s=new Date(e.data.y),d=new Date(ae.result.start_date),u=new Date(ae.result.end_date);if(Math.abs(d-u)/864e5>31)if("tonality"!==e.type){var c=e.data.x.split("-"),p=new Date(a.getFullYear(),a.getMonth()+1,0).getDate();c[2]=p,n=c=c.join("-")}else{var g=e.data.y.split("-"),h=new Date(s.getFullYear(),s.getMonth()+1,0).getDate();g[2]=h,o=g=g.join("-")}"visibility"==e.type?(I((0,S.yU)((0,l.Z)((0,r.Z)({},ae.result),{category_id:e.data.y,start_date:t,end_date:n,page:e.page,maxSize:e.maxSize}))),ve((0,l.Z)((0,r.Z)({},e),{desc:{Category:e.data.y,"Start Date":t,"End Date":n}}))):"pie"==e.type?(I((0,S.yU)((0,l.Z)((0,r.Z)({},ae.result),{category_id:e.data.y,start_date:ae.result.start_date,end_date:ae.result.end_date,page:e.page,maxSize:e.maxSize}))),ve((0,l.Z)((0,r.Z)({},e),{desc:{Category:e.data.y}}))):"pie-cov"==e.type?(I((0,S.yU)((0,l.Z)((0,r.Z)({},ae.result),{tone:e.data.y,start_date:ae.result.start_date,end_date:ae.result.end_date,page:e.page,maxSize:e.maxSize}))),ve((0,l.Z)((0,r.Z)({},e),{desc:{Tone:1==e.data.y?"Positive":-1==e.data.y?"Negative":"Neutral"}}))):"coverage"==e.type?(I((0,S.yU)((0,l.Z)((0,r.Z)({},ae.result),{tone:e.data.y,start_date:t,end_date:n,page:e.page,maxSize:e.maxSize}))),ve((0,l.Z)((0,r.Z)({},e),{desc:{Tone:1==e.data.y?"Positive":-1==e.data.y?"Negative":"Neutral","Start Date":t,"End Date":n}}))):"coverage-bar"==e.type?(I((0,S.yU)((0,l.Z)((0,r.Z)({},ae.result),{tone:e.data.x,media_id:e.data.y,start_date:ae.result.start_date,end_date:ae.result.end_date,page:e.page,maxSize:e.maxSize}))),ve((0,l.Z)((0,r.Z)({},e),{desc:{Tone:1==e.data.x?"Positive":-1==e.data.x?"Negative":"Neutral",Date:e.data.media_name}}))):"coverage-barhor"==e.type?(I((0,S.yU)((0,l.Z)((0,r.Z)({},ae.result),{category_id:e.data.y,tone:e.data.x,start_date:ae.result.start_date,end_date:ae.result.end_date,page:e.page,maxSize:e.maxSize}))),ve((0,l.Z)((0,r.Z)({},e),{desc:{Tone:1==e.data.x?"Positive":-1==e.data.x?"Negative":"Neutral",Category:e.data.y}}))):"ews"==e.type?(I((0,S.yU)((0,l.Z)((0,r.Z)({},ae.result),{category_id:e.data.y,start_date:t,end_date:n,page:e.page,maxSize:e.maxSize}))),ve((0,l.Z)((0,r.Z)({},e),{desc:{Category:e.data.y,"Start Date":t,"End Date":n}}))):"tonality"==e.type&&(I((0,S.yU)((0,l.Z)((0,r.Z)({},ae.result),{tone:e.data.x,start_date:i,end_date:o,page:e.page,maxSize:e.maxSize}))),ve((0,l.Z)((0,r.Z)({},e),{desc:{Tone:1==e.data.x?"Positive":-1==e.data.x?"Negative":"Neutral","Start Date":i,"End Date":o}}))),se(!0)},ut=function(){var e,t;return(null===ee||void 0===ee||null===(e=ee.result)||void 0===e?void 0:e.data)?(0,d.jsx)(N,{onDetailClick:function(e){R(e),U(!0)},data:(null===(t=ee.result.data)||void 0===t?void 0:t.map((function(e){return{id:e.article_id,title:e.title,content:e.content,detail:e}})))||[],onLoading:ee.loading,pagination:{showSizeChanger:!0,total:ee.result.recordsTotal||0,showTotal:function(e){return"Total ".concat(ee.result.recordsTotal," data")},defaultPageSize:ye.maxSize||0,defaultCurrent:ye.page+1||0,onChange:function(e,t){return st((0,l.Z)((0,r.Z)({},ye),{type:"article-positive",page:e-1,maxSize:t}))}}}):null},ct=function(){var e,t;return(null===ne||void 0===ne||null===(e=ne.result)||void 0===e?void 0:e.data)?(0,d.jsx)(N,{onDetailClick:function(e){R(e),U(!0)},data:(null===(t=ne.result.data)||void 0===t?void 0:t.map((function(e){return{id:e.article_id,title:e.title,content:e.content,detail:e}})))||[],onLoading:ne.loading,pagination:{showSizeChanger:!0,total:ne.result.recordsTotal||0,showTotal:function(e){return"Total ".concat(ne.result.recordsTotal," data")},defaultPageSize:be.maxSize||0,defaultCurrent:be.page+1||0,onChange:function(e,t){return st((0,l.Z)((0,r.Z)({},be),{type:"article-Neutral",page:e-1,maxSize:t}))}}}):null},pt=function(){var e,t;return(null===te||void 0===te||null===(e=te.result)||void 0===e?void 0:e.data)?(0,d.jsx)(N,{onDetailClick:function(e){R(e),U(!0)},data:(null===(t=te.result.data)||void 0===t?void 0:t.map((function(e){return{id:e.article_id,title:e.title,content:e.content,detail:e}})))||[],onLoading:te.loading,pagination:{showSizeChanger:!0,total:te.result.recordsTotal||0,showTotal:function(e){return"Total ".concat(te.result.recordsTotal," data")},defaultPageSize:ke.maxSize||0,defaultCurrent:ke.page+1||0,onChange:function(e,t){return st((0,l.Z)((0,r.Z)({},ke),{type:"article-Negative",page:e-1,maxSize:t}))}}}):null},gt=function(){var e,t,n;return(0,d.jsx)(w.Z,{onDetailClick:function(e){R(e),U(!0)},onLoading:null===Q||void 0===Q?void 0:Q.loading,modal:{title:"Article List ".concat((null===fe||void 0===fe?void 0:fe.desc)?"("+Object.keys(null===fe||void 0===fe?void 0:fe.desc).map((function(e){return e+": "+(null===fe||void 0===fe?void 0:fe.desc[e])}))+")":""),visible:oe&&!(null===Q||void 0===Q?void 0:Q.loading),close:function(){return se(!1)}},data:(null===Q||void 0===Q||null===(e=Q.result)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.map((function(e){return{id:e.article_id,title:e.title,content:e.content,detail:e}})))||[],pagination:{showSizeChanger:!0,total:(null===Q||void 0===Q||null===(n=Q.result)||void 0===n?void 0:n.recordsTotal)||0,showTotal:function(e){var t;return"Total ".concat(null===Q||void 0===Q||null===(t=Q.result)||void 0===t?void 0:t.recordsTotal," data")},defaultPageSize:(null===fe||void 0===fe?void 0:fe.maxSize)||0,defaultCurrent:(null===fe||void 0===fe?void 0:fe.page)+1||0,onChange:function(e,t){return dt((0,l.Z)((0,r.Z)({},fe),{page:e-1,maxSize:t}))}}})},ht=function(e){var t=[],n=[],a=[];return e.forEach((function(e){e.tones.forEach((function(e){e.negative?t.push(e.negative):e.positive?n.push(e.positive):e.neutral&&a.push(e.neutral)}))})),[{name:"Negative",data:t},{name:"Neutral",data:a},{name:"Positive",data:n}]},ft=(0,u.useRef)(null),vt=(0,u.useRef)(null),xt=(0,u.useRef)(null),yt=(0,u.useRef)(null),mt=(0,u.useRef)(null),_t=(0,u.useRef)(null),bt=(0,o.Z)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=e.quality,a=g((0,u.useState)(null),2),i=a[0],r=a[1],l=g((0,u.useState)(null),2),o=l[0],s=l[1];return[i,function(e){if(!e)throw new Error("You should provide correct html node.");return p()(e).then((function(e){var a=document.createElement("canvas"),i=a.getContext("2d"),l=e.width,o=e.height;a.width=l,a.height=o,i.drawImage(e,0,0);var s=a.toDataURL(t,n);return r(s),s})).catch(s)},{error:o}]}({type:"image/jpeg",quality:1}),2),jt=(bt[0],bt[1]),Zt=function(){var e=(0,a.Z)((function(){var e,t,n,a;return(0,s.__generator)(this,(function(i){switch(i.label){case 0:v.t6.info({message:"Currently downloading the power point. Please wait for a while because this process will take some time until the process is complete, thank you"}),e=[],t=[ft,vt,xt,yt,mt,_t],n=0,i.label=1;case 1:return n<t.length?[4,jt(t[n].current)]:[3,4];case 2:a=i.sent(),e.push(a),i.label=3;case 3:return n++,[3,1];case 4:return(0,S.hN)(e).then((function(e){return e.json()})).then((function(e){200==e.code&&window.open(e.data)})).catch((function(e){v.t6.error({message:e.message})})),[2]}}))}));return function(){return e.apply(this,arguments)}}(),kt=(0,u.useMemo)((function(){return"https://ojk.media-insight.id"===(window.location.origin?window.location.origin:"")}),[]),St=(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(v.zx,{style:Ft,icons:"FilePptFilled",shape:"round",type:"primary",danger:"true",onClick:function(){Oe(!0)},children:"PPT File"}),(0,d.jsx)("span",{style:{margin:"4px 0"}}),(0,d.jsx)(v.zx,{style:{background:"#06d6a0",border:"#06d6a0"},icons:"FileExcelFilled",shape:"round",type:"primary",onClick:function(){I((0,T.R_)(ae.result)),I((0,O.Ou)()),Le(!0),0!==ae.result.category_set?at((0,l.Z)((0,r.Z)({},nt),{columns:[ae.result.category_set]})):at((0,l.Z)((0,r.Z)({},nt),{columns:it.map((function(e){return e.category_set}))}))},children:"Excel File"})]}),wt=function(){var e,t,n,a,i,l,o,s,u,c,p,g,h,f,y,m,_,j,Z,k,S,w;return(0,d.jsx)(v.u_,{title:"Download PPT File",closable:!0,onCancel:function(){return Oe(!1)},visible:Te,onOk:function(){Zt()},children:(0,d.jsxs)(v.X2,{children:[(0,d.jsx)(v.JX,{span:24,children:(0,d.jsx)("div",{ref:ft,children:(0,d.jsx)(v.Zb,{title:"Visibility Chart",children:(0,d.jsx)(v._W,{type:"line",title:"visibility chart",series:(null===H||void 0===H||null===(e=H.result)||void 0===e?void 0:e.data)?null===H||void 0===H||null===(t=H.result)||void 0===t?void 0:t.data.map((function(e){return{name:e.key,data:e.category_id_per_day.buckets.map((function(e){return e.doc_count}))}})):[],chartOptions:x.$E.chartOptions,options:{markers:x.$E.markers,xaxis:{labels:{style:{colors:"#ffffff"}},categories:(null===H||void 0===H||null===(n=H.result)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.length)>0?null===H||void 0===H||null===(i=H.result)||void 0===i?void 0:i.data[0].category_id_per_day.buckets.map((function(e){return e.key_as_string})):[]},yaxis:{labels:{style:{colors:"#ffffff"}},axisBorder:{show:!0,color:"#ffffff"}},legend:(0,r.Z)({labels:{colors:"#ffffff"}},x.$E.legend),tooltip:{theme:"dark",fillSeriesColor:!1}}})})})}),(0,d.jsx)(v.JX,{span:24,children:(0,d.jsx)("div",{ref:vt,children:(0,d.jsx)(v.Zb,{title:"Visibility Pie",children:(0,d.jsx)(v._W,{id:"pie",type:"pie",title:"visibility pie",series:(null===H||void 0===H||null===(l=H.result)||void 0===l?void 0:l.data)?null===H||void 0===H||null===(o=H.result)||void 0===o?void 0:o.data.map((function(e){return e.doc_count})):[],options:{labels:(null===H||void 0===H||null===(s=H.result)||void 0===s?void 0:s.data)?null===H||void 0===H||null===(u=H.result)||void 0===u?void 0:u.data.map((function(e){return e.key})):[],legend:{labels:{colors:"#ffffff"}}},chartOptions:{type:"pie",height:300}})})})}),(0,d.jsx)(v.JX,{span:24,children:(0,d.jsx)("div",{ref:xt,children:(0,d.jsx)(v.Zb,{title:"Coverage Tone",children:(0,d.jsx)(v._W,{id:"coverage",type:"bar",title:"coverage tone",series:(null===B||void 0===B||null===(c=B.result)||void 0===c?void 0:c.data)?null===B||void 0===B||null===(p=B.result)||void 0===p?void 0:p.data.chart_bar.sort((function(e,t){return e.key>t.key?1:-1})).map((function(e){return{name:1==e.key?"Positive":0==e.key?"Neutral":"Negative",data:e.tone_per_day.buckets.map((function(e){return e.doc_count}))}})):[],chartOptions:x.X6.chartOptions,options:{colors:x.X6.colors,plotOptions:{bar:{horizontal:!1,borderRadius:6}},xaxis:{categories:(null===B||void 0===B||null===(g=B.result)||void 0===g?void 0:g.data)?null===B||void 0===B||null===(h=B.result)||void 0===h?void 0:h.data.chart_bar[0].tone_per_day.buckets.map((function(e){return e.key_as_string})):[],labels:{style:{colors:"#FFFFFF"}}},yaxis:{labels:{style:{colors:"#FFFFFF"}}},legend:x.X6.legend,theme:{mode:"dark",palette:"palette1"}}})})})}),(0,d.jsx)(v.JX,{span:24,children:(0,d.jsx)("div",{ref:yt,children:(0,d.jsx)(v.Zb,{title:"Tone by Media Selection",children:(0,d.jsx)(v._W,{id:"selection",type:"bar",title:"tone by media selection",series:(null===G||void 0===G||null===(f=G.result)||void 0===f?void 0:f.data)?ht(null===G||void 0===G||null===(y=G.result)||void 0===y?void 0:y.data):[],chartOptions:x.X6.chartOptions,options:{colors:x.X6.colors,plotOptions:x.X6.plotOptions,xaxis:{categories:(null===G||void 0===G||null===(m=G.result)||void 0===m?void 0:m.data)?null===G||void 0===G||null===(_=G.result)||void 0===_?void 0:_.data.map((function(e){return e.media_name})):[],labels:{style:{colors:"#FFFFFF"}}},legend:x.X6.legend,theme:{mode:"dark"}}})})})}),(0,d.jsx)(v.JX,{span:24,children:(0,d.jsx)("div",{ref:mt,children:(0,d.jsx)(v.Zb,{title:"Tone by Category",children:(0,d.jsx)(v._W,{id:"media",type:"bar",title:"tone by category",series:(null===q||void 0===q||null===(j=q.result)||void 0===j?void 0:j.data)?ht(null===q||void 0===q||null===(Z=q.result)||void 0===Z?void 0:Z.data):[],chartOptions:x.X6.chartOptions,options:{colors:x.X6.colors,plotOptions:{bar:{horizontal:!1,borderRadius:6}},xaxis:{categories:(null===q||void 0===q||null===(k=q.result)||void 0===k?void 0:k.data)?null===q||void 0===q||null===(S=q.result)||void 0===S?void 0:S.data.filter((function(e){return e.tones.length>0?1:0})).map((function(e){return e.category_id})):[]},legend:x.X6.legend,theme:{mode:"dark"}}})})})}),(0,d.jsx)("div",{style:{width:"100%"},ref:_t,children:(null===K||void 0===K||null===(w=K.result)||void 0===w?void 0:w.series)?(0,d.jsx)(v.Zb,{onLoading:K.loading,title:"Early Warning System",children:(0,d.jsx)(b.Z,{height:300,width:"100%",charts:{series:K.result.series,options:{tooltip:{shared:!0},markers:x.$E.markers,stroke:x.$E.stroke,colors:x.$E.colors,xaxis:{categories:K.result.date},yaxis:{show:!0,tickAmount:3,min:0,max:20,labels:{formatter:function(e,t){return 0==e&&e<5?"Potential":e>5&&e<9?"Emerging":e>10&&e<20?"Current":"Crisis"}}},theme:{mode:"dark"}}}})}):null})]})})},Ft={boxShadow:"3px 0px 20px -12px rgba(54, 65, 76, 0.5)"},Ct=[{key:"1",title:"Media Visibility",content:(0,d.jsx)("div",{id:"media-visibility-chart",children:(null===H||void 0===H||null===(t=H.result)||void 0===t?void 0:t.data)?(0,d.jsx)(j,{onLoading:H.loading,visibility:{title:"visibility chart",series:H.result.data?H.result.data.map((function(e){return{name:e.key,data:e.category_id_per_day.buckets.map((function(e){return e.doc_count}))}})):[],chartOptions:x.$E.chartOptions,events:{markerClick:function(e,t,n){return dt({type:"visibility",page:0,maxSize:10,order_by:"datee",order:"desc",data:{x:H.result.data[n.seriesIndex].category_id_per_day.buckets[n.dataPointIndex].key_as_string,y:H.result.data[n.seriesIndex].key}})}},options:{markers:x.$E.markers,xaxis:{categories:(null===(n=H.result.data)||void 0===n?void 0:n.length)>0?H.result.data[0].category_id_per_day.buckets.map((function(e){return e.key_as_string})):[],labels:{style:{colors:"#FFFFFF"}}},yaxis:{labels:{style:{colors:"#FFFFFF"}}},legend:x.$E.legend,tooltip:{theme:"dark",fillSeriesColor:!1}}},pie:{title:"visibility pie",series:H.result.data?H.result.data.map((function(e){return e.doc_count})):[],options:{labels:H.result.data?H.result.data.map((function(e){return e.key})):[]},chartOptions:{type:"pie",height:300},events:{dataPointSelection:function(e,t,n){return dt({type:"pie",page:0,maxSize:10,order_by:"datee",order:"desc",data:{y:H.result.data[n.dataPointIndex].key}})}}}}):null})},{key:"2",title:"Coverage Tone",content:(0,d.jsx)("div",{id:"coverage-tone-chart",children:(null===B||void 0===B||null===(c=B.result)||void 0===c?void 0:c.data)&&(null===G||void 0===G||null===(h=G.result)||void 0===h?void 0:h.data)&&(null===q||void 0===q||null===(m=q.result)||void 0===m?void 0:m.data)?(0,d.jsx)(Z,{onLoading:B.loading,onLoadingMedia:G.loading,onLoadingCategory:q.loading,coverage:{title:"coverage tone",series:B.result.data?B.result.data.chart_bar.sort((function(e,t){return e.key>t.key?1:-1})).map((function(e){return{name:1==e.key?"Positive":0==e.key?"Neutral":"Negative",data:e.tone_per_day.buckets.map((function(e){return e.doc_count}))}})):[],chartOptions:x.X6.chartOptions,events:{dataPointSelection:function(e,t,n){return dt({type:"coverage",page:0,maxSize:10,order_by:"datee",order:"desc",data:{y:"2"==n.seriesIndex?"1":"0"==n.seriesIndex?"-1":"0",x:B.result.data.chart_bar.find((function(e){var t="2"==n.seriesIndex?"1":"0"==n.seriesIndex?"-1":"0";return e.key==t?e:-1})).tone_per_day.buckets[n.dataPointIndex].key_as_string}})}},options:{colors:x.X6.colors,plotOptions:{bar:{horizontal:!1,borderRadius:6}},xaxis:{categories:B.result.data?B.result.data.chart_bar[0].tone_per_day.buckets.map((function(e){return e.key_as_string})):[],labels:{style:{colors:"#FFFFFF"}}},yaxis:{labels:{style:{colors:"#FFFFFF"}}},legend:x.X6.legend,tooltip:{theme:"dark",fillSeriesColor:!1}}},pie:{title:"Coverage pie",series:B.result.data?B.result.data.chart_bar.sort((function(e,t){return e.key>t.key?1:-1})).map((function(e){return e.doc_count})):[],options:{labels:["Negative","Neutral","Positive"],colors:x.X6.colors,legend:{position:"right",horizontalAlign:"center",verticalAlign:"center",markers:{width:8,height:8,radius:2,offsetY:0}}},chartOptions:{type:"pie",height:300},events:{dataPointSelection:function(e,t,n){return dt({type:"pie-cov",page:0,maxSize:10,order_by:"datee",order:"desc",data:{y:B.result.data.chart_bar.sort((function(e,t){return e.key>t.key?1:-1}))[n.dataPointIndex].key}})}}},selection:{title:"tone by media selection",series:G.result.data?ht(G.result.data):[],chartOptions:x.X6.chartOptions,events:{dataPointSelection:function(e,t,n){return dt({type:"coverage-bar",page:0,maxSize:10,order_by:"datee",order:"desc",data:{y:G.result.data[n.dataPointIndex].media_id,x:n.seriesIndex-1},media_name:G.result.data[n.dataPointIndex].media_name})}},options:{colors:x.X6.colors,plotOptions:x.X6.plotOptions,xaxis:{categories:G.result.data?G.result.data.map((function(e){return e.media_name})):[],labels:{style:{colors:"#FFFFFF"}}},yaxis:{labels:{style:{colors:"#FFFFFF"}}},legend:x.X6.legend,tooltip:{theme:"dark",fillSeriesColor:!1}}},media:{title:"tone by category",series:q.result.data?ht(q.result.data):[],chartOptions:x.X6.chartOptions,events:{click:function(e,t,n){return dt({type:"coverage-barhor",page:0,maxSize:10,order_by:"datee",order:"desc",data:{y:q.result.data[n.dataPointIndex].category_id,x:n.seriesIndex-1}})}},options:{colors:x.X6.colors,plotOptions:{bar:{horizontal:!1,borderRadius:6}},xaxis:{categories:q.result.data?q.result.data.filter((function(e){return e.tones.length>0?1:0})).map((function(e){return e.category_id})):[],labels:{style:{colors:"#FFFFFF"}}},yaxis:{labels:{style:{colors:"#FFFFFF"}}},legend:x.X6.legend,tooltip:{theme:"dark",fillSeriesColor:!1}}}}):null})}];return(0,d.jsxs)("div",{style:{height:"100%",marginBottom:"1rem"},children:[(0,d.jsx)("div",{style:{position:"absolute",zIndex:999,right:20,bottom:"tablet"==Be?"30%":100},children:(0,d.jsx)(v.Lt,{direction:"vertical",trigger:"hover",overlayStyle:{background:"transparent"},placement:"topCenter",overlayHeight:"100%",overlay:St,children:(0,d.jsx)(v.zx,{loading:Ue,style:Ft,onClick:function(e){return e.preventDefault()},type:"primary",icons:"DownloadOutlined",shape:"round",children:"Download"})})}),(0,d.jsxs)(v.X2,{children:[(0,d.jsx)(v.JX,{md:24,lg:6,children:(0,d.jsx)(v.Zb,{title:"Latest news",children:(0,d.jsx)("div",{style:{overflowY:"auto",overflowX:"hidden",height:270},children:V?(0,d.jsx)(v.X2,{children:null===(F=V.result.data)||void 0===F?void 0:F.map((function(e){return(0,d.jsx)(v.JX,{span:24,children:(0,d.jsx)(v.TH,{ellipsis:!0,title:(0,d.jsx)(v.X2,{children:(0,d.jsxs)(v.JX,{span:24,children:[(0,d.jsx)("span",{children:e.title}),(0,d.jsx)("span",{style:{fontSize:"12px",fontWeight:"bold",display:"block"},children:e.datee})]})}),content:e.content,onClick:function(){(0,z.Mr)({article_id:e.article_id}).then((function(e){return e.json()})).then((function(t){Ce(e),Ne(!0),Re(t.data)})).catch((function(e){return console.log(e)}))}})},e.article_id)}))}):null})})}),(0,d.jsx)(v.JX,{xs:24,md:24,lg:18,children:B?(0,d.jsx)(v.Zb,{onLoading:B.loading,children:(0,d.jsx)("div",{id:"coverage-tonality-chart",children:(0,d.jsx)(_,{height:290,charts:{events:{markerClick:function(e,t,n){return dt({type:"tonality",page:0,maxSize:10,order_by:"datee",order:"desc",data:{x:n.seriesIndex-1,y:K.result.date[n.dataPointIndex]}})}},options:(0,i.Z)({title:{text:"Media Sentiment Breakdown",align:"left",offsetY:5,floating:!0,style:{fontSize:"14px",fontWeight:500,color:"#fff"}},tooltip:{shared:!0},markers:x.$E.markers,xaxis:{labels:{style:{colors:"#ffffff"}},categories:B.result.data?B.result.data.chart_bar[0].tone_per_day.buckets.map((function(e){return e.key_as_string})):[" "]},grid:{show:!1},stroke:x.$E.stroke,colors:["#ff6b6b","#1990ff","#06d6a0"],yaxis:{labels:{style:{colors:"#FFFFFF"}}},legend:{position:"top",horizontalAlign:"right",markers:x.$E.legend.markers}},"tooltip",{theme:"dark",fillSeriesColor:!1}),series:B.result.data?B.result.data.chart_bar.sort((function(e,t){return e.key>t.key?1:-1})).map((function(e){return{name:1==e.key?"Positive":-1==e.key?"Negative":"Neutral",data:e.tone_per_day.buckets.map((function(e){return e.doc_count}))}})):[]}})})}):null}),(0,d.jsx)(f.Z,{}),(0,d.jsx)(v.X2,{children:1===ae.result.tonee?(0,d.jsx)(v.JX,{xs:24,children:(0,d.jsx)(v.Zb,{title:"Positive",children:(0,d.jsx)(ut,{})})}):0===ae.result.tonee?(0,d.jsx)(v.JX,{xs:24,children:(0,d.jsx)(v.Zb,{title:"Neutral",children:(0,d.jsx)(ct,{})})}):-1===ae.result.tonee?(0,d.jsx)(v.JX,{xs:24,children:(0,d.jsx)(v.Zb,{title:"negative",children:(0,d.jsx)(pt,{})})}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(v.JX,{xs:24,md:24,lg:8,xl:8,children:(0,d.jsx)(v.Zb,{title:"Positive",children:(0,d.jsx)(ut,{})})}),(0,d.jsx)(v.JX,{xs:24,md:24,lg:8,xl:8,children:(0,d.jsx)(v.Zb,{title:"Neutral",children:(0,d.jsx)(ct,{})})}),(0,d.jsx)(v.JX,{xs:24,md:24,lg:8,xl:8,children:(0,d.jsx)(v.Zb,{title:"negative",children:(0,d.jsx)(pt,{})})})]})}),(0,d.jsx)(f.Z,{}),(0,d.jsx)(v.JX,{span:24,style:E,children:(0,d.jsx)(v.li,{style:E,defaultActiveKey:"1",data:Ct})})]}),(0,d.jsx)(C.Z,{clippingDrawer:Fe,setClippingDrawer:Ce,clipListPop:Xe,setclipListPop:Ne,saveArticlePop:!1,keyword:Me}),(0,d.jsx)(gt,{}),(0,d.jsx)(wt,{}),(0,d.jsxs)(v.u_,{title:"Download Excell File",closable:!0,onCancel:function(){return Le(!1)},visible:Ee,footer:[(0,d.jsx)(v.zx,{type:"dashed",danger:!0,disabled:!!(0==Qe.columns.length&0==nt.columns.length),onClick:function(){et((0,l.Z)((0,r.Z)({},ae.result),{columns:[]})),at((0,l.Z)((0,r.Z)({},ae.result),{columns:[]}))},children:"Reset"},"reset"),(0,d.jsx)(v.zx,{type:"primary",disabled:!(Qe.columns.length>0&nt.columns.length>0),loading:Ue,onClick:function(){Ye(!0),(0,S.r8)((0,l.Z)((0,r.Z)({url:kt,columns:Qe.columns},ae.result),{category_set:nt.columns.join(",")})).then((function(e){return e.json()})).then((function(e){window.open(e.data),Ye(!1),Le(!1),et((0,l.Z)((0,r.Z)({},ae.result),{columns:[]}))})).catch((function(e){v.t6.error({message:"Error when download excel!"}),Ye(!1),Le(!1),et((0,l.Z)((0,r.Z)({},ae.result),{columns:[]}))}))},children:"Download File"},"submit")],children:[(0,d.jsx)("p",{children:"Columns:"}),(0,d.jsx)(P,{id:"columns",selectall:{indeterminate:Ge,onChange:function(e){e.target.checked?et((0,l.Z)((0,r.Z)({},Qe),{columns:re.result.data.map((function(e){return e.name}))})):et((0,l.Z)((0,r.Z)({},Qe),{columns:[]}))},checked:Qe.columns.length==(null===(X=re.result.data)||void 0===X?void 0:X.length),label:"Select All (".concat(Qe.columns.length,"/").concat(null===(L=re.result.data)||void 0===L?void 0:L.length,")")},group:{onChange:function(e){et((0,l.Z)((0,r.Z)({},Qe),{columns:e}))},value:Qe.columns,options:re.result.data?re.result.data.map((function(e){return{value:e.name,label:e.name,checked:e.checked}})):[]}}),(0,d.jsx)("p",{style:{marginTop:"20px"},children:"Categories:"}),(0,d.jsx)(P,{id:"columns",selectall:{indeterminate:Ge,onChange:function(e){e.target.checked?at((0,l.Z)((0,r.Z)({},nt),{columns:it.map((function(e){return e.category_set}))})):at((0,l.Z)((0,r.Z)({},nt),{columns:[]}))},checked:nt.columns.length==it.length,label:"Select All (".concat(nt.columns.length,"/").concat(it.length,")")},group:{onChange:function(e){at((0,l.Z)((0,r.Z)({},nt),{columns:e}))},value:nt.columns,options:it?null===it||void 0===it?void 0:it.map((function(e){return{value:e.category_set,label:e.descriptionz,checked:e.checked}})):[]}}),(0,d.jsxs)("div",{style:{margin:"6px 0 0"},children:[(0,d.jsx)("b",{children:"Note:"})," you can only download the columns that are selected."]})]})]})}},56267:function(e,t,n){"use strict";n.d(t,{R_:function(){return s},Sg:function(){return c},d4:function(){return u},uL:function(){return d}});var a=n(47568),i=n(97582),r=n(63426),l=n(83401),o="dashboard/excel/columns",s=function(e){return function(){var t=(0,a.Z)((function(t,n){var a,s,d;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),t({type:r.AUL}),a=JSON.parse(localStorage.getItem("userToken")),[4,(0,l.Be)(o,a.token,e)];case 1:return[4,(s=n.sent()).json()];case 2:return s=n.sent(),t({type:r.pLu,result:s}),[3,4];case 3:return d=n.sent(),t({type:r.mV1,result:d}),[3,4];case 4:return[2]}}))}));return function(e,n){return t.apply(this,arguments)}}()},d=function(e){return new Promise((function(t,n){var a=JSON.parse(localStorage.getItem("userToken"));return(0,l.SD)(o,a.token,e).then((function(e){return t(e)}))}))},u=function(e){return new Promise((function(t,n){var a=JSON.parse(localStorage.getItem("userToken"));return(0,l._o)(o,a.token,e).then((function(e){return t(e)}))}))},c=function(e,t){return new Promise((function(n,a){var i=JSON.parse(localStorage.getItem("userToken"));return(0,l.Y2)("".concat(o,"/").concat(e),i.token,t).then((function(e){return n(e)}))}))}}},function(e){e.O(0,[443,840,874,774,888,179],(function(){return t=28036,e(e.s=t);var t}));var t=e.O();_N_E=t}]);