(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[632],{27049:function(e,n,t){"use strict";var r=t(87462),a=t(4942),i=t(67294),l=t(94184),o=t.n(l),c=t(59844),s=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t};n.Z=function(e){return i.createElement(c.C,null,(function(n){var t,l=n.getPrefixCls,c=n.direction,u=e.prefixCls,d=e.type,m=void 0===d?"horizontal":d,f=e.orientation,h=void 0===f?"center":f,p=e.className,b=e.children,x=e.dashed,v=e.plain,g=s(e,["prefixCls","type","orientation","className","children","dashed","plain"]),j=l("divider",u),y=h.length>0?"-".concat(h):h,_=!!b,w=o()(j,"".concat(j,"-").concat(m),(t={},(0,a.Z)(t,"".concat(j,"-with-text"),_),(0,a.Z)(t,"".concat(j,"-with-text").concat(y),_),(0,a.Z)(t,"".concat(j,"-dashed"),!!x),(0,a.Z)(t,"".concat(j,"-plain"),!!v),(0,a.Z)(t,"".concat(j,"-rtl"),"rtl"===c),t),p);return i.createElement("div",(0,r.Z)({className:w},g,{role:"separator"}),b&&i.createElement("span",{className:"".concat(j,"-inner-text")},b))}))}},8210:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/connect",function(){return t(88166)}])},88166:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return O}});var r=t(85893),a=t(25617),i=t(67294),l=t(32495),o=t.n(l),c=t(5152),s=(t(25218),t(86031)),u=t(27049),d=t(35666),m=t.n(d),f=t(20186),h=t(74034);t(49552);function p(e,n,t,r,a,i,l){try{var o=e[i](l),c=o.value}catch(s){return void t(s)}o.done?n(c):Promise.resolve(c).then(r,a)}function b(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var i=e.apply(n,t);function l(e){p(i,r,a,l,o,"next",e)}function o(e){p(i,r,a,l,o,"throw",e)}l(void 0)}))}}var x=function(e){return b(m().mark((function n(t,r){var a,i;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t({type:f.L7}),a=JSON.parse(localStorage.getItem("userToken")),n.next=5,(0,h.Be)("wartawan/medias",a.token,e);case 5:return i=n.sent,n.next=8,i.json();case 8:i=n.sent,t({type:f.KM,result:i}),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),t({type:f.W0,result:n.t0});case 15:case"end":return n.stop()}}),n,null,[[0,12]])})))};function v(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){v(e,n,t[n])}))}return e}function j(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function y(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(0,c.default)((function(){return Promise.all([t.e(937),t.e(127)]).then(t.t.bind(t,71167,23))}),{loadableGenerated:{webpack:function(){return[71167]},modules:["dashboard/connect/index.js -> react-quill"]},ssr:!1});var _=[{value:"National",label:"National"},{value:"Business",label:"Business"},{value:"Legal",label:"Legal"}],w=function(e){var n,t=e.group,a=e.options,i=e.setupload,l=e.upload,o=e.indeterminate,c=e.connectMediaList,d=j(e,["group","options","setupload","upload","indeterminate","connectMediaList"]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.XZ,g({indeterminate:o,onChange:function(e){e.target.checked?i(g({},l,{media_names:c.result.results.map((function(e){return e.media_name}))})):i(g({},l,{media_names:[]}))},checked:l.media_names.length==(null===(n=c.result.results)||void 0===n?void 0:n.length)},d,{children:"Select all"})),(0,r.jsx)(u.Z,{style:{margin:"6px 0"}}),(0,r.jsx)(s.XZ,g({style:{display:"flex",alignItems:"flex-start",flexDirection:"column",height:200,width:"100%",overflow:"auto"},type:"group",options:a,value:l.media_names,id:"media_names",onChange:function(e){i(g({},l,{media_names:e}))}},t))]})},O=function(){var e=(0,a.I0)(),n=(0,i.useState)(),t=(n[0],n[1],(0,i.useState)(!0)),l=t[0],c=(t[1],(0,i.useState)(!1)),u=(c[0],c[1],(0,a.v9)((function(e){return e.connect}))),d=u.connectMediaList,m=(u.connectUpload,(0,i.useState)(!1)),f=m[0],p=m[1],b=(0,i.useState)({headline:"",subline:"",client_email:"",content:"",editorial_desk:"",media_names:[],images:[]}),v=b[0],j=b[1];(0,i.useEffect)((function(){e(x())}),[]);var O=function(e){return JSON.stringify(e)},I=function(){var e,n=v.client_email?v:{headline:v.headline,subline:v.subline,content:v.content,editorial_desk:v.editorial_desk,media_names:v.media_names,images:v.images};(e=n,new Promise((function(n,t){var r=JSON.parse(localStorage.getItem("userToken"));return(0,h.SD)("wartawan/upload/",r.token,e).then((function(e){return n(e)})).catch((function(e){return t(e)}))}))).then((function(e){return e.json()})).then((function(e){if(e.message)s.t6.success({message:e.message,description:v.headline});else{var n=[];for(var t in e)n.push(t);s.t6.error({message:n.join(", ")+" error"})}})).catch((function(e){console.log(e)}))};return(0,r.jsx)(s.l0,{form:!0,children:(0,r.jsxs)(s.X2,{children:[(0,r.jsx)(s.JX,{span:24,children:(0,r.jsxs)(s.X2,{children:[(0,r.jsxs)(s.JX,{span:12,children:[(0,r.jsxs)(s.l0.Item,{children:[(0,r.jsx)("label",{htmlFor:"headline",children:"Headline"}),(0,r.jsx)(s.II,{id:"headline",addonAfter:(0,r.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return p(!f)},children:"cc"}),onChange:function(e){return j(g({},v,{headline:e.target.value}))},value:v.headline,placeholder:"headline"})]}),f?(0,r.jsxs)(s.l0.Item,{children:[(0,r.jsx)("label",{htmlFor:"client_email",children:"CC"}),(0,r.jsx)(s.II,{suffixIcon:"InfoCircleOutlined",tooltips:"only include 1 e-mail address",id:"client_email",onChange:function(e){return j(g({},v,{client_email:e.target.value}))},value:v.client_email,placeholder:"cc AI-connect"})]}):null,(0,r.jsxs)(s.l0.Item,{children:[(0,r.jsx)("label",{htmlFor:"subline",children:"Subline"}),(0,r.jsx)(s.II,{id:"subline",onChange:function(e){return j(g({},v,{subline:e.target.value}))},value:v.subline,placeholder:"subline"})]}),(0,r.jsxs)(s.l0.Item,{children:[(0,r.jsx)("label",{htmlFor:"radio",children:"Editor Desk"}),(0,r.jsx)(s.Y8,{type:"group",optionType:"button",name:v.editorial_desk,onChange:function(e){return function(e){j(g({},v,{editorial_desk:e.target.value}))}(e)},id:"editorial_desk",style:{width:"100%"},children:_.map((function(e){return(0,r.jsx)(s.Y8,{value:e.value,children:e.label},e.value)}))})]}),(0,r.jsxs)(s.l0.Item,{children:[(0,r.jsx)("label",{htmlFor:"radio",children:"Picture Upload"}),(0,r.jsx)(o(),{id:"images",multiple:!0,onDone:function(e){return j(g({},v,{images:y(v.images).concat([{filename:JSON.parse(O(e))[0].name,base64:JSON.parse(O(e))[0].base64}])}))}})]})]}),(0,r.jsx)(s.JX,{span:12,children:(0,r.jsxs)(s.l0.Item,{children:[(0,r.jsx)("label",{htmlFor:"radio",children:"Media Select"}),(0,r.jsx)(w,{upload:v,connectMediaList:d,style:{width:"100%"},id:"media_names",value:v.media_names,setupload:j,indeterminate:l,options:d.result.results?d.result.results.sort((function(e,n){return e.media_name>n.media_name?1:-1})).map((function(e,n){return{label:e.media_name,value:e.media_name}})):[]})]})})]})}),(0,r.jsx)(s.JX,{span:24,children:(0,r.jsxs)(s.l0.Item,{children:[(0,r.jsx)("label",{htmlFor:"radio",children:"Content"}),(0,r.jsx)(s.II,{type:"textarea",id:"content",rows:8,defaultValue:v.content,onChange:function(e){return j(g({},v,{content:e.target.value}))}})]})}),(0,r.jsx)(s.JX,{xs:24,md:4,lg:4,xl:2,children:(0,r.jsx)(s.l0.Item,{children:(0,r.jsx)(s.zx,{type:"primary",block:"true",htmlType:"submit",onClick:function(){I()},children:"Send Email"})})})]})})}},25218:function(){}},function(e){e.O(0,[495,772,774,888,179],(function(){return n=8210,e(e.s=n);var n}));var n=e.O();_N_E=n}]);