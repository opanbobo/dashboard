(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[673],{73114:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/search",function(){return n(96532)}])},96532:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return P}});var r,a=n(85893),i=n(67294),c=n(25617),o=n(86031),s=n(35666),l=n.n(s),u=n(13448),d=n(27049),f=n(58742),h=n(894);n(36093);function p(e,t,n,r,a,i,c){try{var o=e[i](c),s=o.value}catch(l){return void n(l)}o.done?t(s):Promise.resolve(s).then(r,a)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){m(e,t,n[t])}))}return e}var v=function(e){var t,n=e.data,s=void 0===n?[]:n,v=e.pagination,x=(e.dataPag,e.searchForm),y=e.handleSearch,_=((0,c.I0)(),(0,i.useState)(!1)),j=_[0],b=_[1],w=(0,i.useState)({}),S=w[0],P=w[1],O=(0,i.useState)([]),k=O[0],E=O[1],C=(0,i.useState)(!1),I=C[0],T=C[1],z=(0,i.useState)(!1),N=z[0],X=z[1],D=(0,i.useState)(!1),F=D[0],J=D[1],A=(t=l().mark((function e(t,n,r,a,i){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,J(!0),e.next=5,(0,f.yz)({article_id:S.article_id,category_ids:S.categories,datee:S.datee.split(" ")[0],media_id:S.media_id,tone:n,advalue_fc:S.rate_fc,circulation:S.circulation,advalue_bw:S.rate_bw});case 5:e.sent,b(!1),P({}),T(!1),y(x),J(!1),u.Z.success({message:"Data has been Updated",duration:3}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0),u.Z.error({message:"Please check your update request!!",duration:3});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})),function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function c(e){p(i,r,a,c,o,"next",e)}function o(e){p(i,r,a,c,o,"throw",e)}c(void 0)}))});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{style:{padding:"12px 0"},children:[0==s?(0,a.jsx)("div",{style:{display:"flex",minHeight:500,width:"100%",maxHeight:600,overflowY:"auto",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)(o.HY,{description:"Please Search Article"})}):s.map((function(e){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.TH,{ellipsis:!0,title:(0,a.jsxs)("div",{style:(r={display:"flex",width:"100%"},m(r,"width","90vw"),m(r,"maxWidth","90vw"),m(r,"position","relative"),m(r,"flexDirection","column"),m(r,"&:hover",{background:"red"}),r),children:[(0,a.jsx)("h5",{style:{margin:0,cursor:"pointer"},onClick:function(){return e.article_id,t=e,void(0,f.Mr)({article_id:t.article_id}).then((function(e){return e.json()})).then((function(e){E(e.data),b(!0),P(t)})).catch((function(e){return console.log(e)}));var t},children:e.title}),(0,a.jsxs)("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"space-between",minWidth:"100%",margin:"6px 0"},children:[(0,a.jsx)("a",{style:{textTransform:"initial"},href:e.file_pdf,target:"_BLANK",rel:"noreferrer",children:e.media_name}),(0,a.jsx)("div",{children:e.datee})]})]}),content:e.content},e.article_id),(0,a.jsx)(d.Z,{})]})})),(0,a.jsx)(a.Fragment,{children:0==s?null:(0,a.jsx)(o.tl,g({size:"small"},v))})]}),j?(0,a.jsx)(h.Z,{setclipEditingPop:b,setEditingDrawerTemp:P,clipEditingPop:j,editingDrawerTemp:S,handleSubmitEditingModal:A,summaryEdit:N,setsummaryEdit:X,setsaveArticlePop:T,saveArticlePop:I,buttonLoading:F,setbuttonLoading:J,keyword:k,search:!0}):null]})},x=n(11136),y=(n(49552),n(74034));function _(e,t,n,r,a,i,c){try{var o=e[i](c),s=o.value}catch(l){return void n(l)}o.done?t(s):Promise.resolve(s).then(r,a)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function c(e){_(i,r,a,c,o,"next",e)}function o(e){_(i,r,a,c,o,"throw",e)}c(void 0)}))}}var b=function(e){return new Promise((function(t,n){var r=JSON.parse(localStorage.getItem("userToken"));return(0,y.SD)("search/",r.token,e).then((function(e){return t(e)}))}))};function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){w(e,t,n[t])}))}return e}var P=function(){var e,t=(0,c.I0)(),n=(0,c.v9)((function(e){return e.searching})),r=(0,c.v9)((function(e){return e.filter})),s=n.searchMedia,u=(n.searchSubcat,r.filter),d=(0,i.useState)(0),f=d[0],h=d[1],p=(0,i.useState)(10),m=p[0],g=p[1],_=(0,i.useState)({page:0,maxSize:10}),w=_[0],P=_[1];(0,i.useEffect)((function(){var e;s.loaded||t(j(l().mark((function t(n,r){var a,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:x.pT}),a=JSON.parse(localStorage.getItem("userToken")),t.next=5,(0,y.Be)("media-categories/",a.token,e);case 5:return i=t.sent,t.next=8,i.json();case 8:i=t.sent,n({type:x.rg,result:i}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),n({type:x.Wq,result:t.t0});case 15:case"end":return t.stop()}}),t,null,[[0,12]])}))))}),[]);var O=function(e){b(S({},w,{page:0,maxSize:10,term:w.term,search_field:w.search_field,media_category:w.media_category,start_date:u.result.start_date,end_date:u.result.end_date})).then((function(e){return e.json()})).then((function(e){P(S({},w,{page:0,maxSize:10},e)),h(0),g(10)})).catch((function(e){return console.log(e)}))};return(0,a.jsxs)(o.Zb,{shadow:"false",children:[(0,a.jsx)(o.l0,{children:(0,a.jsxs)(o.X2,{align:"middle",justify:"center",children:[(0,a.jsx)(o.JX,{xs:24,sm:24,md:8,xl:8,children:(0,a.jsxs)(o.X2,{children:[(0,a.jsx)(o.JX,{span:12,children:(0,a.jsx)(o.l0.Item,{children:(0,a.jsx)(o.Ph,{placeholder:"Select Media",optionFilterProp:"children",id:"media_category",onChange:function(e){P(S({},w,{media_category:e,category_id:"all"}))},options:(null===(e=s.result.results)||void 0===e?void 0:e.map((function(e){return{value:e.key,label:e.value}})))||[]})})}),(0,a.jsx)(o.JX,{span:12,children:(0,a.jsx)(o.l0.Item,{children:(0,a.jsx)(o.Ph,{placeholder:"Select by Content",id:"search_field",defaultValue:w.search_field,onChange:function(e){P(S({},w,{search_field:e}))},options:[{value:"title",label:"Title"},{value:"content",label:"Content"}]})})})]})}),(0,a.jsx)(o.JX,{xs:24,sm:24,md:16,xl:16,children:(0,a.jsx)(o.l0.Item,{children:(0,a.jsx)(o.II,{type:"search",id:"term",onChange:function(e){P(S({},w,{term:e.target.value}))},value:w.term,allowClear:!0,enterButton:(0,a.jsx)(o.JO,{type:"SearchOutlined"}),onSearch:function(){return O()}})})})]})}),(0,a.jsx)(v,{searchForm:w,handleSearch:O,dataPag:{searchPage:f,searchPageSize:m},data:w.results,pagination:{showSizeChanger:!0,total:w.totalItems,showTotal:function(e){return"Article Found ".concat(e)},current:f+1,pageSize:m,onChange:function(e,t){P(S({},w,{page:e-1,maxSize:t}),h(e-1),g(t)),b(S({},S({},w,{page:e-1,maxSize:t}),{term:w.term,search_field:w.search_field,media_category:w.media_category,start_date:u.result.start_date,end_date:u.result.end_date})).then((function(e){return e.json()})).then((function(e){P(S({},w,e))})).catch((function(e){return console.log(e)}))}}})]})}}},function(e){e.O(0,[840,89,774,888,179],(function(){return t=73114,e(e.s=t);var t}));var t=e.O();_N_E=t}]);