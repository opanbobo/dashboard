(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[623],{28036:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/analytic",function(){return a(26394)}])},26394:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return L}});var n=a(47568),r=a(26042),i=a(69396),o=a(828),s=a(97582),l=a(85893),d=a(67294),c=a(61120),u=a.n(c);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,i=[],o=!0,s=!1;try{for(a=a.call(e);!(o=(n=a.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(l){s=!0,r=l}finally{try{o||null==a.return||a.return()}finally{if(s)throw r}}return i}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var y=a(27049),x=a(18975),h=a(13983),m=a(4792),f=a(48513),v=a(99534);var _=function(e){var t=e.className,a=e.charts,n=(0,v.Z)(e,["className","charts"]);return(0,l.jsx)(x._W,(0,r.Z)({className:t,id:"summaryTone",type:"line"},a,n))},Z=a(99883),b=function(e){var t=e.className,a=e.visibility,n=e.pie,o=e.headline,s=(0,v.Z)(e,["className","visibility","pie","headline"]);return(0,l.jsxs)(x.X2,{children:[(0,l.jsx)(x.JX,{span:24,children:(0,l.jsx)(x.Zb,(0,i.Z)((0,r.Z)({title:a.title},s),{children:(0,l.jsx)("div",{ref:a.ref,children:(0,l.jsx)(x._W,(0,r.Z)({className:t,type:"line"},a))})}))}),o&&(0,l.jsx)(x.JX,{xs:24,md:24,lg:8,xl:8,children:(0,l.jsx)(x.Zb,(0,i.Z)((0,r.Z)({title:"Latest News"},s),{children:o}))}),(0,l.jsx)(x.JX,{xs:24,md:24,lg:16,xl:16,children:(0,l.jsx)(x.Zb,(0,i.Z)((0,r.Z)({title:n.title},s),{children:(0,l.jsx)(x._W,(0,r.Z)({className:t,id:"pie",type:"pie"},n))}))})]})},j=function(e){var t=e.className,a=e.coverage,n=e.selection,o=e.media,s=e.onLoading,d=e.onLoadingMedia,c=e.onLoadingCategory,u=e.pie,g=e.full,p=(e.positive,e.neutral,e.negative,(0,v.Z)(e,["className","coverage","selection","media","onLoading","onLoadingMedia","onLoadingCategory","pie","full","positive","neutral","negative"]));return(0,l.jsxs)(x.X2,{gutter:[x.v5,x.v5],children:[(0,l.jsx)(x.JX,{xs:24,md:24,lg:g?12:24,xl:g?24:12,children:(0,l.jsx)(x.Zb,(0,i.Z)((0,r.Z)({title:a.title,onLoading:s},p),{children:(0,l.jsx)(x._W,(0,r.Z)({className:t,id:"coverage",type:"bar"},a))}))}),(0,l.jsx)(x.JX,{xs:24,md:24,lg:g?12:24,xl:g?24:12,children:(0,l.jsx)(x.Zb,(0,i.Z)((0,r.Z)({title:u.title},p),{children:(0,l.jsx)(x._W,(0,r.Z)({className:t,id:"pietone",type:"pie"},u))}))}),(0,l.jsx)(x.JX,{xs:24,md:24,lg:g?24:12,xl:g?24:12,children:(0,l.jsx)(x.Zb,(0,i.Z)((0,r.Z)({title:n.title,onLoading:d},p),{children:(0,l.jsx)(x._W,(0,r.Z)({className:t,id:"selection",type:"bar"},n))}))}),(0,l.jsx)(x.JX,{xs:24,md:24,lg:g?24:12,xl:g?24:12,children:(0,l.jsx)(x.Zb,(0,i.Z)((0,r.Z)({title:o.title,onLoading:c},p),{children:(0,l.jsx)(x._W,(0,r.Z)({className:t,id:"media",type:"bar"},o))}))})]})},S=a(25617),k=a(84865),w=a(73939),z=a(3698),C=a(63820),F=a(58742),X={display:"-webkit-box",maxWidth:"100%",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},N=function(e){var t=e.data,a=(e.modal,e.pagination),n=e.onLoading,i=(e.onDetailClick,e.selfOnClick),o=(0,d.useState)({}),s=o[0],c=o[1],u=(0,d.useState)(!1),g=u[0],p=u[1],y=(0,d.useState)(!1),h=y[0],m=y[1],f=(0,d.useState)(),v=f[0],_=f[1],Z=function(){return(0,l.jsx)(C.Z,{clippingDrawer:s,setClippingDrawer:c,clipListPop:g,setclipListPop:p,saveArticlePop:h,setsaveArticlePop:m,keyword:v})};return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{style:{minHeight:100,maxHeight:"50vh",overflowY:"scroll"},children:[1==n&&(0,l.jsx)(x.gb,{}),t.length>0?t.map((function(e,t){return(0,l.jsx)(x.TH,{style:{background:t%2==0?"rgba(54, 65, 76, 0.1)":null,paddingLeft:6,paddingRight:6,paddingTop:8,paddingBottom:8,marginBottom:12},onClick:function(){i||(0,F.Mr)({article_id:e.id}).then((function(e){return e.json()})).then((function(t){_(t.data),c(e.detail),p(!0)})).catch((function(e){return console.log(e)}))},ellipsis:!0,title:(0,l.jsx)("a",{style:{color:"rgb(0, 143, 251)",fontWeight:600},children:e.title}),content:(0,l.jsx)(x.X2,{gutter:[0],children:(0,l.jsxs)(x.JX,{span:24,children:[(0,l.jsxs)("div",{style:{margin:"5px 0",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,l.jsx)("div",{style:{fontWeight:600},children:e.detail.media_name.length>0?e.detail.media_name:"undifined"}),(0,l.jsx)("div",{children:e.detail.datee.length>0?e.detail.datee.split("T").join(" "):"undifined"})]}),(0,l.jsx)("div",{style:X,children:e.content})]})})},e.id)})):(0,l.jsx)("div",{style:{minHeight:300,height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,l.jsx)(x.HY,{})})]}),(0,l.jsx)(Z,{}),(0,l.jsx)(z.Z,(0,r.Z)({size:"small"},a))]})},D=function(e){var t=e.selectall,a=e.group;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x.XZ,(0,i.Z)((0,r.Z)({},t),{children:t.label})),(0,l.jsx)(y.Z,{style:{margin:"6px 0"}}),(0,l.jsx)(x.XZ,(0,r.Z)({style:{display:"flex",alignItems:"flex-start",flexDirection:"column",height:200,width:"100%",overflow:"auto"},type:"group"},a))]})},P=a(56267),T=a(99761),O={tablet:"(min-width: 300px) and (max-width: 780px)"},E={height:"90%"},L=function(e){var t,a,c,p,v=(0,S.I0)(),z=(0,S.v9)((function(e){return e.analytic})),X=(0,S.v9)((function(e){return e.filter})),L=(0,S.v9)((function(e){return e.excellconfig})),I=(0,d.useState)({}),J=(I[0],I[1]),M=(0,d.useState)(!1),W=(M[0],M[1]),A=(0,d.useState)(!1),U=(A[0],A[1],(0,d.useState)([])),R=(U[0],U[1],z.mediaVisibility),$=z.coverageTonality,Y=z.trendingHighLights,H=z.toneCategory,B=z.toneMedia,V=z.ews,q=z.article,G=z.articlePositive,K=z.articleNegative,Q=z.articleNeutral,ee=X.filter,te=X.category,ae=L.excelCol,ne=(0,d.useState)(!1),re=ne[0],ie=ne[1],oe=(0,d.useState)(!1),se=(oe[0],oe[1]),le=(0,d.useState)(!0),de=le[0],ce=le[1],ue=(0,d.useState)({}),ge=ue[0],pe=ue[1],ye=(0,d.useState)({}),xe=ye[0],he=ye[1],me=(0,d.useState)({}),fe=me[0],ve=me[1],_e=(0,d.useState)({}),Ze=_e[0],be=_e[1],je=(0,d.useState)({}),Se=je[0],ke=je[1],we=(0,d.useState)(!1),ze=we[0],Ce=we[1],Fe=(0,d.useState)(!1),Xe=Fe[0],Ne=Fe[1],De=(0,d.useState)(!1),Pe=De[0],Te=De[1],Oe=(0,d.useState)(!0),Ee=Oe[0],Le=Oe[1],Ie=(0,d.useState)([]),Je=Ie[0],Me=Ie[1],We=(0,d.useState)(!1),Ae=We[0],Ue=We[1],Re=(0,d.useState)(),$e=Re[0],Ye=Re[1],He=(0,d.useState)(!0),Be=He[0],Ve=(He[1],(0,d.useState)((0,i.Z)((0,r.Z)({},ee.result),{columns:[]}))),qe=Ve[0],Ge=Ve[1],Ke=(0,d.useState)((0,i.Z)((0,r.Z)({},ee.result),{columns:[]})),Qe=Ke[0],et=Ke[1];(0,d.useEffect)((function(){(0,f.Z)(O,Ye)}),[$e]);var tt=(0,d.useMemo)((function(){var e;return(null===(e=te.result.results)||void 0===e?void 0:e.filter((function(e){return 0!==e.category_set})).map((function(e){return(0,i.Z)((0,r.Z)({},e),{checked:!1})})))||[]}),[te]);(0,d.useEffect)((function(){v((0,k.$i)(ee.result)),v((0,k.R9)(ee.result)),v((0,k.Zx)(ee.result)),v((0,k.ZX)(ee.result)),v((0,k.GL)(ee.result)),v((0,k.kI)(ee.result))}),[ee]),(0,d.useEffect)((function(){at(),rt(),nt()}),[]),(0,d.useEffect)((function(){setTimeout((function(){ce(!1)}),200)}),[de]),(0,d.useEffect)((function(){setTimeout((function(){Le(!1)}),1e5)}),[Ee]);var at=function(e,t,a){return it({type:"article-positive",page:0,maxSize:10,order_by:"datee",order:"desc",showModal:!1,data:{y:1}})},nt=function(e,t,a){return it({type:"article-negative",page:0,maxSize:10,order_by:"datee",order:"desc",showModal:!1,data:{y:-1}})},rt=function(e,t,a){return it({type:"article-neutral",page:0,maxSize:10,order_by:"datee",order:"desc",showModal:!1,data:{y:0}})},it=function(e){var t=e.data.x,a=e.data.x,n=new Date(e.data.x),o=e.data.y,s=e.data.y,l=new Date(e.data.y),d=new Date(ee.result.start_date),c=new Date(ee.result.end_date);if(Math.abs(d-c)/864e5>31)if("tonality"!==e.type){var u=e.data.x.split("-"),g=new Date(n.getFullYear(),n.getMonth()+1,0).getDate();u[2]=g,a=u=u.join("-")}else{var p=e.data.y.split("-"),y=new Date(l.getFullYear(),l.getMonth()+1,0).getDate();p[2]=y,s=p=p.join("-")}"visibility"==e.type?(v((0,k.yU)((0,i.Z)((0,r.Z)({},ee.result),{category_id:e.data.y,start_date:t,end_date:a,page:e.page,maxSize:e.maxSize}))),pe((0,i.Z)((0,r.Z)({},e),{desc:{Category:e.data.y,"Start Date":t,"End Date":a}}))):"pie"==e.type?(v((0,k.yU)((0,i.Z)((0,r.Z)({},ee.result),{category_id:e.data.y,start_date:ee.result.start_date,end_date:ee.result.end_date,page:e.page,maxSize:e.maxSize}))),pe((0,i.Z)((0,r.Z)({},e),{desc:{Category:e.data.y}}))):"article-positive"==e.type?(v((0,k.zi)((0,i.Z)((0,r.Z)({},ee.result),{tone:1,start_date:ee.result.start_date,end_date:ee.result.end_date,page:e.page,maxSize:e.maxSize}))),he((0,i.Z)((0,r.Z)({},e),{desc:{Tone:"Positive"}}))):"article-negative"==e.type?(v((0,k.Wm)((0,i.Z)((0,r.Z)({},ee.result),{tone:-1,start_date:ee.result.start_date,end_date:ee.result.end_date,page:e.page,maxSize:e.maxSize}))),be((0,i.Z)((0,r.Z)({},e),{desc:{Tone:"Negative"}}))):"article-neutral"==e.type?(v((0,k.DV)((0,i.Z)((0,r.Z)({},ee.result),{tone:0,start_date:ee.result.start_date,end_date:ee.result.end_date,page:e.page,maxSize:e.maxSize}))),ve((0,i.Z)((0,r.Z)({},e),{desc:{Tone:"Neutral"}}))):"coverage"==e.type?(v((0,k.yU)((0,i.Z)((0,r.Z)({},ee.result),{tone:e.data.y,start_date:t,end_date:a,page:e.page,maxSize:e.maxSize}))),pe((0,i.Z)((0,r.Z)({},e),{desc:{Tone:1==e.data.y?"Positive":-1==e.data.y?"Negative":"Neutral","Start Date":t,"End Date":a}}))):"coverage-bar"==e.type?(v((0,k.yU)((0,i.Z)((0,r.Z)({},ee.result),{tone:e.data.x,media_id:e.data.y,start_date:ee.result.start_date,end_date:ee.result.end_date,page:e.page,maxSize:e.maxSize}))),pe((0,i.Z)((0,r.Z)({},e),{desc:{Tone:1==e.data.x?"Positive":-1==e.data.x?"Negative":"Neutral",Date:e.data.media_name}}))):"coverage-barhor"==e.type?(v((0,k.yU)((0,i.Z)((0,r.Z)({},ee.result),{category_id:e.data.y,tone:e.data.x,start_date:ee.result.start_date,end_date:ee.result.end_date,page:e.page,maxSize:e.maxSize}))),pe((0,i.Z)((0,r.Z)({},e),{desc:{Tone:1==e.data.x?"Positive":-1==e.data.x?"Negative":"Neutral",Category:e.data.y}}))):"ews"==e.type?(v((0,k.yU)((0,i.Z)((0,r.Z)({},ee.result),{category_id:e.data.y,start_date:t,end_date:a,page:e.page,maxSize:e.maxSize}))),pe((0,i.Z)((0,r.Z)({},e),{desc:{Category:e.data.y,"Start Date":t,"End Date":a}}))):"tonality"==e.type&&(v((0,k.yU)((0,i.Z)((0,r.Z)({},ee.result),{tone:e.data.x,start_date:o,end_date:s,page:e.page,maxSize:e.maxSize}))),pe((0,i.Z)((0,r.Z)({},e),{desc:{Tone:1==e.data.x?"Positive":-1==e.data.x?"Negative":"Neutral","Start Date":o,"End Date":s}}))),se(!0)},ot=function(e){var t=e.data.x,a=e.data.x,n=new Date(e.data.x),o=e.data.y,s=e.data.y,l=new Date(e.data.y),d=new Date(ee.result.start_date),c=new Date(ee.result.end_date);if(Math.abs(d-c)/864e5>31)if("tonality"!==e.type){var u=e.data.x.split("-"),g=new Date(n.getFullYear(),n.getMonth()+1,0).getDate();u[2]=g,a=u=u.join("-")}else{var p=e.data.y.split("-"),y=new Date(l.getFullYear(),l.getMonth()+1,0).getDate();p[2]=y,s=p=p.join("-")}"visibility"==e.type?(v((0,k.yU)((0,i.Z)((0,r.Z)({},ee.result),{category_id:e.data.y,start_date:t,end_date:a,page:e.page,maxSize:e.maxSize}))),pe((0,i.Z)((0,r.Z)({},e),{desc:{Category:e.data.y,"Start Date":t,"End Date":a}}))):"pie"==e.type?(v((0,k.yU)((0,i.Z)((0,r.Z)({},ee.result),{category_id:e.data.y,start_date:ee.result.start_date,end_date:ee.result.end_date,page:e.page,maxSize:e.maxSize}))),pe((0,i.Z)((0,r.Z)({},e),{desc:{Category:e.data.y}}))):"pie-cov"==e.type?(v((0,k.yU)((0,i.Z)((0,r.Z)({},ee.result),{tone:e.data.y,start_date:ee.result.start_date,end_date:ee.result.end_date,page:e.page,maxSize:e.maxSize}))),pe((0,i.Z)((0,r.Z)({},e),{desc:{Tone:1==e.data.y?"Positive":-1==e.data.y?"Negative":"Neutral"}}))):"coverage"==e.type?(v((0,k.yU)((0,i.Z)((0,r.Z)({},ee.result),{tone:e.data.y,start_date:t,end_date:a,page:e.page,maxSize:e.maxSize}))),pe((0,i.Z)((0,r.Z)({},e),{desc:{Tone:1==e.data.y?"Positive":-1==e.data.y?"Negative":"Neutral","Start Date":t,"End Date":a}}))):"coverage-bar"==e.type?(v((0,k.yU)((0,i.Z)((0,r.Z)({},ee.result),{tone:e.data.x,media_id:e.data.y,start_date:ee.result.start_date,end_date:ee.result.end_date,page:e.page,maxSize:e.maxSize}))),pe((0,i.Z)((0,r.Z)({},e),{desc:{Tone:1==e.data.x?"Positive":-1==e.data.x?"Negative":"Neutral",Date:e.data.media_name}}))):"coverage-barhor"==e.type?(v((0,k.yU)((0,i.Z)((0,r.Z)({},ee.result),{category_id:e.data.y,tone:e.data.x,start_date:ee.result.start_date,end_date:ee.result.end_date,page:e.page,maxSize:e.maxSize}))),pe((0,i.Z)((0,r.Z)({},e),{desc:{Tone:1==e.data.x?"Positive":-1==e.data.x?"Negative":"Neutral",Category:e.data.y}}))):"ews"==e.type?(v((0,k.yU)((0,i.Z)((0,r.Z)({},ee.result),{category_id:e.data.y,start_date:t,end_date:a,page:e.page,maxSize:e.maxSize}))),pe((0,i.Z)((0,r.Z)({},e),{desc:{Category:e.data.y,"Start Date":t,"End Date":a}}))):"tonality"==e.type&&(v((0,k.yU)((0,i.Z)((0,r.Z)({},ee.result),{tone:e.data.x,start_date:o,end_date:s,page:e.page,maxSize:e.maxSize}))),pe((0,i.Z)((0,r.Z)({},e),{desc:{Tone:1==e.data.x?"Positive":-1==e.data.x?"Negative":"Neutral","Start Date":o,"End Date":s}}))),ie(!0)},st=function(){var e;return console.log(z),(0,l.jsx)(N,{onDetailClick:function(e){J(e),W(!0)},data:(null===(e=G.result.data)||void 0===e?void 0:e.map((function(e){return{id:e.article_id,title:e.title,content:e.content,detail:e}})))||[],onLoading:G.loading,pagination:{showSizeChanger:!0,total:G.result.recordsTotal||0,showTotal:function(e){return"Total ".concat(G.result.recordsTotal," data")},defaultPageSize:xe.maxSize||0,defaultCurrent:xe.page+1||0,onChange:function(e,t){return ot((0,i.Z)((0,r.Z)({},xe),{page:e-1,maxSize:t}))}}})},lt=function(){var e;return console.log(z),(0,l.jsx)(N,{onDetailClick:function(e){J(e),W(!0)},data:(null===(e=Q.result.data)||void 0===e?void 0:e.map((function(e){return{id:e.article_id,title:e.title,content:e.content,detail:e}})))||[],onLoading:Q.loading,pagination:{showSizeChanger:!0,total:Q.result.recordsTotal||0,showTotal:function(e){return"Total ".concat(Q.result.recordsTotal," data")},defaultPageSize:fe.maxSize||0,defaultCurrent:fe.page+1||0,onChange:function(e,t){return ot((0,i.Z)((0,r.Z)({},fe),{page:e-1,maxSize:t}))}}})},dt=function(){var e;return console.log(z),(0,l.jsx)(N,{onDetailClick:function(e){J(e),W(!0)},data:(null===(e=K.result.data)||void 0===e?void 0:e.map((function(e){return{id:e.article_id,title:e.title,content:e.content,detail:e}})))||[],onLoading:K.loading,pagination:{showSizeChanger:!0,total:K.result.recordsTotal||0,showTotal:function(e){return"Total ".concat(K.result.recordsTotal," data")},defaultPageSize:Ze.maxSize||0,defaultCurrent:Ze.page+1||0,onChange:function(e,t){return ot((0,i.Z)((0,r.Z)({},Ze),{page:e-1,maxSize:t}))}}})},ct=function(){var e;return console.log(z),(0,l.jsx)(w.Z,{onDetailClick:function(e){J(e),W(!0)},onLoading:q.loading,modal:{title:"Article List ".concat(ge.desc?"("+Object.keys(ge.desc).map((function(e){return e+": "+ge.desc[e]}))+")":""),visible:re&&!q.loading,close:function(){return ie(!1)}},data:(null===(e=q.result.data)||void 0===e?void 0:e.map((function(e){return{id:e.article_id,title:e.title,content:e.content,detail:e}})))||[],pagination:{showSizeChanger:!0,total:q.result.recordsTotal||0,showTotal:function(e){return"Total ".concat(q.result.recordsTotal," data")},defaultPageSize:ge.maxSize||0,defaultCurrent:ge.page+1||0,onChange:function(e,t){return ot((0,i.Z)((0,r.Z)({},ge),{page:e-1,maxSize:t}))}}})},ut=function(e){var t=[],a=[],n=[];return e.forEach((function(e){e.tones.forEach((function(e){e.negative?t.push(e.negative):e.positive?a.push(e.positive):e.neutral&&n.push(e.neutral)}))})),[{name:"Negative",data:t},{name:"Neutral",data:n},{name:"Positive",data:a}]},gt=(0,d.useRef)(null),pt=(0,d.useRef)(null),yt=(0,d.useRef)(null),xt=(0,d.useRef)(null),ht=(0,d.useRef)(null),mt=(0,d.useRef)(null),ft=(0,o.Z)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,a=e.quality,n=g((0,d.useState)(null),2),r=n[0],i=n[1],o=g((0,d.useState)(null),2),s=o[0],l=o[1];return[r,function(e){if(!e)throw new Error("You should provide correct html node.");return u()(e).then((function(e){var n=document.createElement("canvas"),r=n.getContext("2d"),o=e.width,s=e.height;n.width=o,n.height=s,r.drawImage(e,0,0);var l=n.toDataURL(t,a);return i(l),l})).catch(l)},{error:s}]}({type:"image/jpeg",quality:1}),2),vt=(ft[0],ft[1]),_t=function(){var e=(0,n.Z)((function(){var e,t,a,n;return(0,s.__generator)(this,(function(r){switch(r.label){case 0:x.t6.info({message:"Currently downloading the power point. Please wait for a while because this process will take some time until the process is complete, thank you"}),e=[],t=[gt,pt,yt,xt,ht,mt],a=0,r.label=1;case 1:return a<t.length?[4,vt(t[a].current)]:[3,4];case 2:n=r.sent(),e.push(n),r.label=3;case 3:return a++,[3,1];case 4:return(0,k.hN)(e).then((function(e){return e.json()})).then((function(e){200==e.code&&window.open(e.data)})).catch((function(e){x.t6.error({message:e.message})})),[2]}}))}));return function(){return e.apply(this,arguments)}}(),Zt=(0,d.useMemo)((function(){return"https://ojk.media-insight.id"===(window.location.origin?window.location.origin:"")}),[]),bt=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x.zx,{style:St,icons:"FilePptFilled",shape:"round",type:"primary",danger:"true",onClick:function(){Ne(!0)},children:"PPT File"}),(0,l.jsx)("span",{style:{margin:"4px 0"}}),(0,l.jsx)(x.zx,{style:{background:"#06d6a0",border:"#06d6a0"},icons:"FileExcelFilled",shape:"round",type:"primary",onClick:function(){v((0,P.R_)(ee.result)),v((0,T.Ou)()),Te(!0),0!==ee.result.category_set?et((0,i.Z)((0,r.Z)({},Qe),{columns:[ee.result.category_set]})):et((0,i.Z)((0,r.Z)({},Qe),{columns:tt.map((function(e){return e.category_set}))}))},children:"Excel File"})]}),jt=function(){var e;return(0,l.jsx)(x.u_,{title:"Download PPT File",closable:!0,onCancel:function(){return Ne(!1)},visible:Xe,onOk:function(){_t()},children:(0,l.jsxs)(x.X2,{children:[(0,l.jsx)(x.JX,{span:24,children:(0,l.jsx)("div",{ref:gt,children:(0,l.jsx)(x.Zb,{title:"Visibility Chart",children:(0,l.jsx)(x._W,{type:"line",title:"visibility chart",series:R.result.data?R.result.data.map((function(e){return{name:e.key,data:e.category_id_per_day.buckets.map((function(e){return e.doc_count}))}})):[],chartOptions:m.$E.chartOptions,options:{markers:m.$E.markers,xaxis:{categories:(null===(e=R.result.data)||void 0===e?void 0:e.length)>0?R.result.data[0].category_id_per_day.buckets.map((function(e){return e.key_as_string})):[]},legend:m.$E.legend}})})})}),(0,l.jsx)(x.JX,{span:24,children:(0,l.jsx)("div",{ref:pt,children:(0,l.jsx)(x.Zb,{title:"Visibility Pie",children:(0,l.jsx)(x._W,{id:"pie",type:"pie",title:"visibility pie",series:R.result.data?R.result.data.map((function(e){return e.doc_count})):[],options:{labels:R.result.data?R.result.data.map((function(e){return e.key})):[]},chartOptions:{type:"pie",height:300}})})})}),(0,l.jsx)(x.JX,{span:24,children:(0,l.jsx)("div",{ref:yt,children:(0,l.jsx)(x.Zb,{title:"Coverage Tone",children:(0,l.jsx)(x._W,{id:"coverage",type:"bar",title:"coverage tone",series:$.result.data?$.result.data.chart_bar.sort((function(e,t){return e.key>t.key?1:-1})).map((function(e){return{name:1==e.key?"Positive":0==e.key?"Neutral":"Negative",data:e.tone_per_day.buckets.map((function(e){return e.doc_count}))}})):[],chartOptions:m.X6.chartOptions,options:{colors:m.X6.colors,plotOptions:{bar:{horizontal:!1,borderRadius:6}},xaxis:{categories:$.result.data?$.result.data.chart_bar[0].tone_per_day.buckets.map((function(e){return e.key_as_string})):[]},yaxis:{labels:{style:{colors:"#FFFFFF"}}},legend:m.X6.legend}})})})}),(0,l.jsx)(x.JX,{span:24,children:(0,l.jsx)("div",{ref:xt,children:(0,l.jsx)(x.Zb,{title:"Tone by Media Selection",children:(0,l.jsx)(x._W,{id:"selection",type:"bar",title:"tone by media selection",series:B.result.data?ut(B.result.data):[],chartOptions:m.X6.chartOptions,options:{colors:m.X6.colors,plotOptions:m.X6.plotOptions,xaxis:{categories:B.result.data?B.result.data.map((function(e){return e.media_name})):[]},legend:m.X6.legend}})})})}),(0,l.jsx)(x.JX,{span:24,children:(0,l.jsx)("div",{ref:ht,children:(0,l.jsx)(x.Zb,{title:"Tone by Category",children:(0,l.jsx)(x._W,{id:"media",type:"bar",title:"tone by category",series:H.result.data?ut(H.result.data):[],chartOptions:m.X6.chartOptions,options:{colors:m.X6.colors,plotOptions:{bar:{horizontal:!1,borderRadius:6}},xaxis:{categories:H.result.data?H.result.data.filter((function(e){return e.tones.length>0?1:0})).map((function(e){return e.category_id})):[]},legend:m.X6.legend}})})})}),(0,l.jsx)("div",{style:{width:"100%"},ref:mt,children:(0,l.jsx)(x.Zb,{onLoading:V.loading,title:"Early Warning System",children:(0,l.jsx)(Z.Z,{height:300,width:"100%",charts:{series:V.result.series,options:{tooltip:{shared:!0},markers:m.$E.markers,stroke:m.$E.stroke,colors:m.$E.colors,xaxis:{categories:V.result.date},yaxis:{show:!0,tickAmount:3,min:0,max:20,labels:{formatter:function(e,t){return 0==e&&e<5?"Potential":e>5&&e<9?"Emerging":e>10&&e<20?"Current":"Crisis"}}}}}})})})]})})},St={boxShadow:"3px 0px 20px -12px rgba(54, 65, 76, 0.5)"},kt=[{key:"1",title:"Media Visibility",content:(0,l.jsx)("div",{id:"media-visibility-chart",children:(0,l.jsx)(b,{onLoading:R.loading,visibility:{title:"visibility chart",series:R.result.data?R.result.data.map((function(e){return{name:e.key,data:e.category_id_per_day.buckets.map((function(e){return e.doc_count}))}})):[],chartOptions:m.$E.chartOptions,events:{markerClick:function(e,t,a){return ot({type:"visibility",page:0,maxSize:10,order_by:"datee",order:"desc",data:{x:R.result.data[a.seriesIndex].category_id_per_day.buckets[a.dataPointIndex].key_as_string,y:R.result.data[a.seriesIndex].key}})}},options:{markers:m.$E.markers,xaxis:{categories:(null===(t=R.result.data)||void 0===t?void 0:t.length)>0?R.result.data[0].category_id_per_day.buckets.map((function(e){return e.key_as_string})):[],labels:{style:{colors:"#FFFFFF"}}},yaxis:{labels:{style:{colors:"#FFFFFF"}}},legend:m.$E.legend}},pie:{title:"visibility pie",series:R.result.data?R.result.data.map((function(e){return e.doc_count})):[],options:{labels:R.result.data?R.result.data.map((function(e){return e.key})):[]},chartOptions:{type:"pie",height:300},events:{dataPointSelection:function(e,t,a){return ot({type:"pie",page:0,maxSize:10,order_by:"datee",order:"desc",data:{y:R.result.data[a.dataPointIndex].key}})}}},headline:(0,l.jsx)("div",{style:{overflowY:"auto",overflowX:"hidden",height:300},children:(0,l.jsx)(x.X2,{children:null===(a=Y.result.data)||void 0===a?void 0:a.map((function(e){return(0,l.jsx)(x.JX,{span:24,children:(0,l.jsx)(x.TH,{ellipsis:!0,title:(0,l.jsx)(x.X2,{children:(0,l.jsxs)(x.JX,{span:24,children:[(0,l.jsx)("span",{children:e.title}),(0,l.jsx)("span",{style:{fontSize:"12px",fontWeight:"bold",display:"block"},children:e.datee})]})}),content:e.content,onClick:function(){(0,F.Mr)({article_id:e.article_id}).then((function(e){return e.json()})).then((function(t){ke(e),Ce(!0),Me(t.data)})).catch((function(e){return console.log(e)}))}})},e.article_id)}))})})})})},{key:"2",title:"Coverage Tone",content:(0,l.jsx)("div",{id:"coverage-tone-chart",children:(0,l.jsx)(j,{onLoading:$.loading,onLoadingMedia:B.loading,onLoadingCategory:H.loading,coverage:{title:"coverage tone",series:$.result.data?$.result.data.chart_bar.sort((function(e,t){return e.key>t.key?1:-1})).map((function(e){return{name:1==e.key?"Positive":0==e.key?"Neutral":"Negative",data:e.tone_per_day.buckets.map((function(e){return e.doc_count}))}})):[],chartOptions:m.X6.chartOptions,events:{dataPointSelection:function(e,t,a){return ot({type:"coverage",page:0,maxSize:10,order_by:"datee",order:"desc",data:{y:"2"==a.seriesIndex?"1":"0"==a.seriesIndex?"-1":"0",x:$.result.data.chart_bar.find((function(e){var t="2"==a.seriesIndex?"1":"0"==a.seriesIndex?"-1":"0";return e.key==t?e:-1})).tone_per_day.buckets[a.dataPointIndex].key_as_string}})}},options:{colors:m.X6.colors,plotOptions:{bar:{horizontal:!1,borderRadius:6}},xaxis:{categories:$.result.data?$.result.data.chart_bar[0].tone_per_day.buckets.map((function(e){return e.key_as_string})):[]},yaxis:{labels:{style:{colors:"#FFFFFF"}}},legend:m.X6.legend}},pie:{title:"Coverage pie",series:$.result.data?$.result.data.chart_bar.sort((function(e,t){return e.key>t.key?1:-1})).map((function(e){return e.doc_count})):[],options:{labels:["Negative","Neutral","Positive"],colors:m.X6.colors,legend:{position:"right",horizontalAlign:"center",verticalAlign:"center",markers:{width:8,height:8,radius:2,offsetY:0}}},chartOptions:{type:"pie",height:300},events:{dataPointSelection:function(e,t,a){return ot({type:"pie-cov",page:0,maxSize:10,order_by:"datee",order:"desc",data:{y:$.result.data.chart_bar.sort((function(e,t){return e.key>t.key?1:-1}))[a.dataPointIndex].key}})}}},selection:{title:"tone by media selection",series:B.result.data?ut(B.result.data):[],chartOptions:m.X6.chartOptions,events:{dataPointSelection:function(e,t,a){return ot({type:"coverage-bar",page:0,maxSize:10,order_by:"datee",order:"desc",data:{y:B.result.data[a.dataPointIndex].media_id,x:a.seriesIndex-1},media_name:B.result.data[a.dataPointIndex].media_name})}},options:{colors:m.X6.colors,plotOptions:m.X6.plotOptions,xaxis:{categories:B.result.data?B.result.data.map((function(e){return e.media_name})):[]},yaxis:{labels:{style:{colors:"#FFFFFF"}}},legend:m.X6.legend}},media:{title:"tone by category",series:H.result.data?ut(H.result.data):[],chartOptions:m.X6.chartOptions,events:{click:function(e,t,a){return ot({type:"coverage-barhor",page:0,maxSize:10,order_by:"datee",order:"desc",data:{y:H.result.data[a.dataPointIndex].category_id,x:a.seriesIndex-1}})}},options:{colors:m.X6.colors,plotOptions:{bar:{horizontal:!1,borderRadius:6}},xaxis:{categories:H.result.data?H.result.data.filter((function(e){return e.tones.length>0?1:0})).map((function(e){return e.category_id})):[],labels:{style:{colors:"#FFFFFF"}}},yaxis:{labels:{style:{colors:"#FFFFFF"}}},legend:m.X6.legend}}})})}];return(0,l.jsxs)("div",{style:{height:"100%",marginBottom:"1rem"},children:[(0,l.jsx)("div",{style:{position:"absolute",zIndex:999,right:20,bottom:"tablet"==$e?"30%":100},children:(0,l.jsx)(x.Lt,{direction:"vertical",trigger:"hover",overlayStyle:{background:"transparent"},placement:"topCenter",overlayHeight:"100%",overlay:bt,children:(0,l.jsx)(x.zx,{loading:Ae,style:St,onClick:function(e){return e.preventDefault()},type:"primary",icons:"DownloadOutlined",shape:"round",children:"Download"})})}),(0,l.jsxs)(x.X2,{children:[(0,l.jsx)(x.JX,{md:24,lg:6,children:(0,l.jsx)(x.X2,{children:$.result.data?$.result.data.widget.map((function(e){return(0,l.jsx)(x.JX,{xs:24,md:8,lg:24,xl:24,order:"positive"==e.type?1:"negative"==e.type?3:(e.type,2),children:(0,l.jsx)(x.$L,{onLoading:$.loading,id:e.id,type:e.type,label:e.label,description:e.description,total:e.total,status:e.status,percent:"".concat(e.percent,"%")})},e.id)})):h.HC.map((function(e){return(0,l.jsx)(x.JX,{xs:24,md:8,lg:24,xl:24,children:(0,l.jsx)(x.$L,{onLoading:$.loading,id:e.id,type:e.type,label:e.label,description:e.description,total:e.total,status:e.status,percent:"".concat(e.percent,"%")})},e.id)}))})}),(0,l.jsx)(x.JX,{xs:24,md:24,lg:18,children:(0,l.jsx)(x.Zb,{onLoading:$.loading,children:(0,l.jsx)("div",{id:"coverage-tonality-chart",children:(0,l.jsx)(_,{height:290,charts:{events:{markerClick:function(e,t,a){return ot({type:"tonality",page:0,maxSize:10,order_by:"datee",order:"desc",data:{x:a.seriesIndex-1,y:V.result.date[a.dataPointIndex]}})}},options:{title:{text:"Media Sentiment Breakdown",align:"left",offsetY:5,floating:!0,style:{fontSize:"14px",fontWeight:500,color:"#263238"}},tooltip:{shared:!0},markers:m.$E.markers,xaxis:{categories:$.result.data?$.result.data.chart_bar[0].tone_per_day.buckets.map((function(e){return e.key_as_string})):[" "]},stroke:m.$E.stroke,colors:["#ff6b6b","#1990ff","#06d6a0"],yaxis:{labels:{style:{colors:"#FFFFFF"}}},legend:{position:"top",horizontalAlign:"right",markers:m.$E.legend.markers}},series:$.result.data?$.result.data.chart_bar.sort((function(e,t){return e.key>t.key?1:-1})).map((function(e){return{name:1==e.key?"Positive":-1==e.key?"Negative":"Neutral",data:e.tone_per_day.buckets.map((function(e){return e.doc_count}))}})):[]}})})})}),(0,l.jsx)(y.Z,{}),(0,l.jsxs)(x.X2,{children:[(0,l.jsx)(x.JX,{xs:24,md:24,lg:8,xl:8,children:(0,l.jsx)(x.Zb,{title:"Positive",children:(0,l.jsx)(st,{})})}),(0,l.jsx)(x.JX,{xs:24,md:24,lg:8,xl:8,children:(0,l.jsx)(x.Zb,{title:"Neutral",children:(0,l.jsx)(lt,{})})}),(0,l.jsx)(x.JX,{xs:24,md:24,lg:8,xl:8,children:(0,l.jsx)(x.Zb,{title:"negative",children:(0,l.jsx)(dt,{})})})]}),(0,l.jsx)(y.Z,{}),(0,l.jsx)(x.JX,{span:24,style:E,children:(0,l.jsx)(x.li,{style:E,defaultActiveKey:"1",data:kt})})]}),(0,l.jsx)(C.Z,{clippingDrawer:Se,setClippingDrawer:ke,clipListPop:ze,setclipListPop:Ce,saveArticlePop:!1,keyword:Je}),(0,l.jsx)(ct,{}),(0,l.jsx)(jt,{}),(0,l.jsxs)(x.u_,{title:"Download Excell File",closable:!0,onCancel:function(){return Te(!1)},visible:Pe,footer:[(0,l.jsx)(x.zx,{type:"dashed",danger:!0,disabled:!!(0==qe.columns.length&0==Qe.columns.length),onClick:function(){Ge((0,i.Z)((0,r.Z)({},ee.result),{columns:[]})),et((0,i.Z)((0,r.Z)({},ee.result),{columns:[]}))},children:"Reset"},"reset"),(0,l.jsx)(x.zx,{type:"primary",disabled:!(qe.columns.length>0&Qe.columns.length>0),loading:Ae,onClick:function(){Ue(!0),(0,k.r8)((0,i.Z)((0,r.Z)({url:Zt,columns:qe.columns},ee.result),{category_set:Qe.columns.join(",")})).then((function(e){return e.json()})).then((function(e){window.open(e.data),Ue(!1),Te(!1),Ge((0,i.Z)((0,r.Z)({},ee.result),{columns:[]}))})).catch((function(e){x.t6.error({message:"Error when download excel!"}),Ue(!1),Te(!1),Ge((0,i.Z)((0,r.Z)({},ee.result),{columns:[]}))}))},children:"Download File"},"submit")],children:[(0,l.jsx)("p",{children:"Columns:"}),(0,l.jsx)(D,{id:"columns",selectall:{indeterminate:Be,onChange:function(e){e.target.checked?Ge((0,i.Z)((0,r.Z)({},qe),{columns:ae.result.data.map((function(e){return e.name}))})):Ge((0,i.Z)((0,r.Z)({},qe),{columns:[]}))},checked:qe.columns.length==(null===(c=ae.result.data)||void 0===c?void 0:c.length),label:"Select All (".concat(qe.columns.length,"/").concat(null===(p=ae.result.data)||void 0===p?void 0:p.length,")")},group:{onChange:function(e){Ge((0,i.Z)((0,r.Z)({},qe),{columns:e}))},value:qe.columns,options:ae.result.data?ae.result.data.map((function(e){return{value:e.name,label:e.name,checked:e.checked}})):[]}}),(0,l.jsx)("p",{style:{marginTop:"20px"},children:"Categories:"}),(0,l.jsx)(D,{id:"columns",selectall:{indeterminate:Be,onChange:function(e){e.target.checked?et((0,i.Z)((0,r.Z)({},Qe),{columns:tt.map((function(e){return e.category_set}))})):et((0,i.Z)((0,r.Z)({},Qe),{columns:[]}))},checked:Qe.columns.length==tt.length,label:"Select All (".concat(Qe.columns.length,"/").concat(tt.length,")")},group:{onChange:function(e){et((0,i.Z)((0,r.Z)({},Qe),{columns:e}))},value:Qe.columns,options:tt?null===tt||void 0===tt?void 0:tt.map((function(e){return{value:e.category_set,label:e.descriptionz,checked:e.checked}})):[]}}),(0,l.jsxs)("div",{style:{margin:"6px 0 0"},children:[(0,l.jsx)("b",{children:"Note:"})," you can only download the columns that are selected."]})]})]})}},56267:function(e,t,a){"use strict";a.d(t,{R_:function(){return l},Sg:function(){return u},d4:function(){return c},uL:function(){return d}});var n=a(47568),r=a(97582),i=a(86763),o=a(74034),s="dashboard/excel/columns",l=function(e){return function(){var t=(0,n.Z)((function(t,a){var n,l,d;return(0,r.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),t({type:i.AU}),n=JSON.parse(localStorage.getItem("userToken")),[4,(0,o.Be)(s,n.token,e)];case 1:return[4,(l=a.sent()).json()];case 2:return l=a.sent(),t({type:i.pL,result:l}),[3,4];case 3:return d=a.sent(),t({type:i.mV,result:d}),[3,4];case 4:return[2]}}))}));return function(e,a){return t.apply(this,arguments)}}()},d=function(e){return new Promise((function(t,a){var n=JSON.parse(localStorage.getItem("userToken"));return(0,o.SD)(s,n.token,e).then((function(e){return t(e)}))}))},c=function(e){return new Promise((function(t,a){var n=JSON.parse(localStorage.getItem("userToken"));return(0,o._o)(s,n.token,e).then((function(e){return t(e)}))}))},u=function(e,t){return new Promise((function(a,n){var r=JSON.parse(localStorage.getItem("userToken"));return(0,o.Y2)("".concat(s,"/").concat(e),r.token,t).then((function(e){return a(e)}))}))}}},function(e){e.O(0,[443,840,874,774,888,179],(function(){return t=28036,e(e.s=t);var t}));var t=e.O();_N_E=t}]);