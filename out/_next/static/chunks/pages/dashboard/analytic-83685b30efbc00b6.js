(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[623],{28036:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/analytic",function(){return a(26394)}])},26394:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return L}});var n=a(47568),r=a(14924),i=a(26042),o=a(69396),s=a(828),l=a(97582),d=a(85893),c=a(67294),u=a(61120),p=a.n(u);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,i=[],o=!0,s=!1;try{for(a=a.call(e);!(o=(n=a.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(l){s=!0,r=l}finally{try{o||null==a.return||a.return()}finally{if(s)throw r}}return i}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var y=a(27049),x=a(46097),f=(a(13983),a(4792)),m=a(48513),v=a(99534);var _=function(e){var t=e.className,a=e.charts,n=(0,v.Z)(e,["className","charts"]);return(0,d.jsx)(x._W,(0,i.Z)({className:t,id:"summaryTone",type:"line"},a,n))},b=a(99883),Z=function(e){var t=e.className,a=e.visibility,n=e.pie,r=(e.headline,(0,v.Z)(e,["className","visibility","pie","headline"]));return(0,d.jsxs)(x.X2,{children:[(0,d.jsx)(x.JX,{span:24,children:(0,d.jsx)(x.Zb,(0,o.Z)((0,i.Z)({title:a.title},r),{children:(0,d.jsx)("div",{ref:a.ref,children:(0,d.jsx)(x._W,(0,i.Z)({className:t,type:"line"},a))})}))}),(0,d.jsx)(x.JX,{xs:24,md:24,lg:24,xl:24,children:(0,d.jsx)(x.Zb,(0,o.Z)((0,i.Z)({title:n.title},r),{children:(0,d.jsx)(x._W,(0,i.Z)({className:t,id:"pie",type:"pie"},n))}))})]})},j=function(e){var t=e.className,a=e.coverage,n=e.selection,r=e.media,s=e.onLoading,l=e.onLoadingMedia,c=e.onLoadingCategory,u=e.pie,p=e.full,g=(e.positive,e.neutral,e.negative,(0,v.Z)(e,["className","coverage","selection","media","onLoading","onLoadingMedia","onLoadingCategory","pie","full","positive","neutral","negative"]));return(0,d.jsxs)(x.X2,{gutter:[x.v5,x.v5],children:[(0,d.jsx)(x.JX,{xs:24,md:24,lg:p?12:24,xl:p?24:12,children:(0,d.jsx)(x.Zb,(0,o.Z)((0,i.Z)({title:a.title,onLoading:s},g),{children:(0,d.jsx)(x._W,(0,i.Z)({className:t,id:"coverage",type:"bar"},a))}))}),(0,d.jsx)(x.JX,{xs:24,md:24,lg:p?12:24,xl:p?24:12,children:(0,d.jsx)(x.Zb,(0,o.Z)((0,i.Z)({title:u.title},g),{children:(0,d.jsx)(x._W,(0,i.Z)({className:t,id:"pietone",type:"pie"},u))}))}),(0,d.jsx)(x.JX,{xs:24,md:24,lg:p?24:12,xl:p?24:12,children:(0,d.jsx)(x.Zb,(0,o.Z)((0,i.Z)({title:n.title,onLoading:l},g),{children:(0,d.jsx)(x._W,(0,i.Z)({className:t,id:"selection",type:"bar"},n))}))}),(0,d.jsx)(x.JX,{xs:24,md:24,lg:p?24:12,xl:p?24:12,children:(0,d.jsx)(x.Zb,(0,o.Z)((0,i.Z)({title:r.title,onLoading:c},g),{children:(0,d.jsx)(x._W,(0,i.Z)({className:t,id:"media",type:"bar"},r))}))})]})},k=a(25617),S=a(84865),w=a(73939),C=a(3698),z=a(63820),F=a(58742),X={display:"-webkit-box",maxWidth:"100%",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},N=function(e){var t=e.data,a=(e.modal,e.pagination),n=e.onLoading,r=(e.onDetailClick,e.selfOnClick),o=(0,c.useState)({}),s=o[0],l=o[1],u=(0,c.useState)(!1),p=u[0],g=u[1],h=(0,c.useState)(!1),y=h[0],f=h[1],m=(0,c.useState)(),v=m[0],_=m[1],b=function(){return(0,d.jsx)(z.Z,{clippingDrawer:s,setClippingDrawer:l,clipListPop:p,setclipListPop:g,saveArticlePop:y,setsaveArticlePop:f,keyword:v})};return(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{style:{minHeight:100,maxHeight:"50vh",overflowY:"scroll"},children:[1==n&&(0,d.jsx)(x.gb,{}),t.length>0?t.map((function(e,t){return(0,d.jsx)(x.TH,{style:{background:t%2==0?"rgba(54, 65, 76, 0.1)":null,paddingLeft:6,paddingRight:6,paddingTop:8,paddingBottom:8,marginBottom:12},onClick:function(){r||(0,F.Mr)({article_id:e.id}).then((function(e){return e.json()})).then((function(t){_(t.data),l(e.detail),g(!0)})).catch((function(e){return console.log(e)}))},ellipsis:!0,title:(0,d.jsx)("a",{style:{color:"rgb(0, 143, 251)",fontWeight:600},children:e.title}),content:(0,d.jsx)(x.X2,{gutter:[0],children:(0,d.jsxs)(x.JX,{span:24,children:[(0,d.jsxs)("div",{style:{margin:"5px 0",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,d.jsx)("div",{style:{fontWeight:600},children:e.detail.media_name.length>0?e.detail.media_name:"undifined"}),(0,d.jsx)("div",{children:e.detail.datee.length>0?e.detail.datee.split("T").join(" "):"undifined"})]}),(0,d.jsx)("div",{style:X,children:e.content})]})})},e.id)})):(0,d.jsx)("div",{style:{minHeight:300,height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,d.jsx)(x.HY,{})})]}),(0,d.jsx)(b,{}),(0,d.jsx)(C.Z,(0,i.Z)({size:"small"},a))]})},P=function(e){var t=e.selectall,a=e.group;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(x.XZ,(0,o.Z)((0,i.Z)({},t),{children:t.label})),(0,d.jsx)(y.Z,{style:{margin:"6px 0"}}),(0,d.jsx)(x.XZ,(0,i.Z)({style:{display:"flex",alignItems:"flex-start",flexDirection:"column",height:200,width:"100%",overflow:"auto"},type:"group"},a))]})},T=a(56267),D=a(99761),O={tablet:"(min-width: 300px) and (max-width: 780px)"},E={height:"90%"},L=function(e){var t,a,u,h,v=(0,k.I0)(),C=(0,k.v9)((function(e){return e.analytic})),X=(0,k.v9)((function(e){return e.filter})),L=(0,k.v9)((function(e){return e.excellconfig})),I=(0,c.useState)({}),J=(I[0],I[1]),M=(0,c.useState)(!1),W=(M[0],M[1]),A=(0,c.useState)(!1),R=(A[0],A[1],(0,c.useState)([])),$=(R[0],R[1],C.mediaVisibility),U=C.coverageTonality,Y=C.trendingHighLights,H=C.toneCategory,B=C.toneMedia,V=C.ews,q=C.article,G=C.articlePositive,K=C.articleNegative,Q=C.articleNeutral,ee=X.filter,te=X.category,ae=L.excelCol,ne=(0,c.useState)(!1),re=ne[0],ie=ne[1],oe=(0,c.useState)(!1),se=(oe[0],oe[1]),le=(0,c.useState)(!0),de=le[0],ce=le[1],ue=(0,c.useState)({}),pe=ue[0],ge=ue[1],he=(0,c.useState)({}),ye=he[0],xe=he[1],fe=(0,c.useState)({}),me=fe[0],ve=fe[1],_e=(0,c.useState)({}),be=_e[0],Ze=_e[1],je=(0,c.useState)({}),ke=je[0],Se=je[1],we=(0,c.useState)(!1),Ce=we[0],ze=we[1],Fe=(0,c.useState)(!1),Xe=Fe[0],Ne=Fe[1],Pe=(0,c.useState)(!1),Te=Pe[0],De=Pe[1],Oe=(0,c.useState)(!0),Ee=Oe[0],Le=Oe[1],Ie=(0,c.useState)([]),Je=Ie[0],Me=Ie[1],We=(0,c.useState)(!1),Ae=We[0],Re=We[1],$e=(0,c.useState)(),Ue=$e[0],Ye=$e[1],He=(0,c.useState)(!0),Be=He[0],Ve=(He[1],(0,c.useState)((0,o.Z)((0,i.Z)({},ee.result),{columns:[]}))),qe=Ve[0],Ge=Ve[1],Ke=(0,c.useState)((0,o.Z)((0,i.Z)({},ee.result),{columns:[]})),Qe=Ke[0],et=Ke[1];(0,c.useEffect)((function(){(0,m.Z)(O,Ye)}),[Ue]);var tt=(0,c.useMemo)((function(){var e;return(null===(e=te.result.results)||void 0===e?void 0:e.filter((function(e){return 0!==e.category_set})).map((function(e){return(0,o.Z)((0,i.Z)({},e),{checked:!1})})))||[]}),[te]);(0,c.useEffect)((function(){v((0,S.$i)(ee.result)),v((0,S.R9)(ee.result)),v((0,S.Zx)(ee.result)),v((0,S.ZX)(ee.result)),v((0,S.GL)(ee.result)),v((0,S.kI)(ee.result))}),[ee]),(0,c.useEffect)((function(){at(),rt(),nt()}),[]),(0,c.useEffect)((function(){setTimeout((function(){ce(!1)}),200)}),[de]),(0,c.useEffect)((function(){setTimeout((function(){Le(!1)}),1e5)}),[Ee]);var at=function(e,t,a){return it({type:"article-positive",page:0,maxSize:10,order_by:"datee",order:"desc",showModal:!1,data:{y:1}})},nt=function(e,t,a){return it({type:"article-negative",page:0,maxSize:10,order_by:"datee",order:"desc",showModal:!1,data:{y:-1}})},rt=function(e,t,a){return it({type:"article-neutral",page:0,maxSize:10,order_by:"datee",order:"desc",showModal:!1,data:{y:0}})},it=function(e){e.data.x,e.data.x;var t=new Date(e.data.x),a=(e.data.y,e.data.y,new Date(e.data.y)),n=new Date(ee.result.start_date),r=new Date(ee.result.end_date);if(Math.abs(n-r)/864e5>31)if("tonality"!==e.type){var s=e.data.x.split("-"),l=new Date(t.getFullYear(),t.getMonth()+1,0).getDate();s[2]=l,s=s.join("-")}else{var d=e.data.y.split("-"),c=new Date(a.getFullYear(),a.getMonth()+1,0).getDate();d[2]=c,d=d.join("-")}"article-positive"==e.type?(v((0,S.zi)((0,o.Z)((0,i.Z)({},ee.result),{tone:1,start_date:ee.result.start_date,end_date:ee.result.end_date,page:e.page,maxSize:e.maxSize}))),xe((0,o.Z)((0,i.Z)({},e),{desc:{Tone:"Positive"}}))):"article-negative"==e.type?(v((0,S.Wm)((0,o.Z)((0,i.Z)({},ee.result),{tone:-1,start_date:ee.result.start_date,end_date:ee.result.end_date,page:e.page,maxSize:e.maxSize}))),Ze((0,o.Z)((0,i.Z)({},e),{desc:{Tone:"Negative"}}))):"article-neutral"==e.type&&(v((0,S.DV)((0,o.Z)((0,i.Z)({},ee.result),{tone:0,start_date:ee.result.start_date,end_date:ee.result.end_date,page:e.page,maxSize:e.maxSize}))),ve((0,o.Z)((0,i.Z)({},e),{desc:{Tone:"Neutral"}}))),se(!0)},ot=function(e){var t=e.data.x,a=e.data.x,n=new Date(e.data.x),r=e.data.y,s=e.data.y,l=new Date(e.data.y),d=new Date(ee.result.start_date),c=new Date(ee.result.end_date);if(Math.abs(d-c)/864e5>31)if("tonality"!==e.type){var u=e.data.x.split("-"),p=new Date(n.getFullYear(),n.getMonth()+1,0).getDate();u[2]=p,a=u=u.join("-")}else{var g=e.data.y.split("-"),h=new Date(l.getFullYear(),l.getMonth()+1,0).getDate();g[2]=h,s=g=g.join("-")}"visibility"==e.type?(v((0,S.yU)((0,o.Z)((0,i.Z)({},ee.result),{category_id:e.data.y,start_date:t,end_date:a,page:e.page,maxSize:e.maxSize}))),ge((0,o.Z)((0,i.Z)({},e),{desc:{Category:e.data.y,"Start Date":t,"End Date":a}}))):"pie"==e.type?(v((0,S.yU)((0,o.Z)((0,i.Z)({},ee.result),{category_id:e.data.y,start_date:ee.result.start_date,end_date:ee.result.end_date,page:e.page,maxSize:e.maxSize}))),ge((0,o.Z)((0,i.Z)({},e),{desc:{Category:e.data.y}}))):"pie-cov"==e.type?(v((0,S.yU)((0,o.Z)((0,i.Z)({},ee.result),{tone:e.data.y,start_date:ee.result.start_date,end_date:ee.result.end_date,page:e.page,maxSize:e.maxSize}))),ge((0,o.Z)((0,i.Z)({},e),{desc:{Tone:1==e.data.y?"Positive":-1==e.data.y?"Negative":"Neutral"}}))):"coverage"==e.type?(v((0,S.yU)((0,o.Z)((0,i.Z)({},ee.result),{tone:e.data.y,start_date:t,end_date:a,page:e.page,maxSize:e.maxSize}))),ge((0,o.Z)((0,i.Z)({},e),{desc:{Tone:1==e.data.y?"Positive":-1==e.data.y?"Negative":"Neutral","Start Date":t,"End Date":a}}))):"coverage-bar"==e.type?(v((0,S.yU)((0,o.Z)((0,i.Z)({},ee.result),{tone:e.data.x,media_id:e.data.y,start_date:ee.result.start_date,end_date:ee.result.end_date,page:e.page,maxSize:e.maxSize}))),ge((0,o.Z)((0,i.Z)({},e),{desc:{Tone:1==e.data.x?"Positive":-1==e.data.x?"Negative":"Neutral",Date:e.data.media_name}}))):"coverage-barhor"==e.type?(v((0,S.yU)((0,o.Z)((0,i.Z)({},ee.result),{category_id:e.data.y,tone:e.data.x,start_date:ee.result.start_date,end_date:ee.result.end_date,page:e.page,maxSize:e.maxSize}))),ge((0,o.Z)((0,i.Z)({},e),{desc:{Tone:1==e.data.x?"Positive":-1==e.data.x?"Negative":"Neutral",Category:e.data.y}}))):"ews"==e.type?(v((0,S.yU)((0,o.Z)((0,i.Z)({},ee.result),{category_id:e.data.y,start_date:t,end_date:a,page:e.page,maxSize:e.maxSize}))),ge((0,o.Z)((0,i.Z)({},e),{desc:{Category:e.data.y,"Start Date":t,"End Date":a}}))):"tonality"==e.type&&(v((0,S.yU)((0,o.Z)((0,i.Z)({},ee.result),{tone:e.data.x,start_date:r,end_date:s,page:e.page,maxSize:e.maxSize}))),ge((0,o.Z)((0,i.Z)({},e),{desc:{Tone:1==e.data.x?"Positive":-1==e.data.x?"Negative":"Neutral","Start Date":r,"End Date":s}}))),ie(!0)},st=function(){var e;return console.log(C),(0,d.jsx)(N,{onDetailClick:function(e){J(e),W(!0)},data:(null===(e=G.result.data)||void 0===e?void 0:e.map((function(e){return{id:e.article_id,title:e.title,content:e.content,detail:e}})))||[],onLoading:G.loading,pagination:{showSizeChanger:!0,total:G.result.recordsTotal||0,showTotal:function(e){return"Total ".concat(G.result.recordsTotal," data")},defaultPageSize:ye.maxSize||0,defaultCurrent:ye.page+1||0,onChange:function(e,t){return it((0,o.Z)((0,i.Z)({},ye),{type:"article-positive",page:e-1,maxSize:t}))}}})},lt=function(){var e;return console.log(C),(0,d.jsx)(N,{onDetailClick:function(e){J(e),W(!0)},data:(null===(e=Q.result.data)||void 0===e?void 0:e.map((function(e){return{id:e.article_id,title:e.title,content:e.content,detail:e}})))||[],onLoading:Q.loading,pagination:{showSizeChanger:!0,total:Q.result.recordsTotal||0,showTotal:function(e){return"Total ".concat(Q.result.recordsTotal," data")},defaultPageSize:me.maxSize||0,defaultCurrent:me.page+1||0,onChange:function(e,t){return it((0,o.Z)((0,i.Z)({},me),{type:"article-neutral",page:e-1,maxSize:t}))}}})},dt=function(){var e;return console.log(C),(0,d.jsx)(N,{onDetailClick:function(e){J(e),W(!0)},data:(null===(e=K.result.data)||void 0===e?void 0:e.map((function(e){return{id:e.article_id,title:e.title,content:e.content,detail:e}})))||[],onLoading:K.loading,pagination:{showSizeChanger:!0,total:K.result.recordsTotal||0,showTotal:function(e){return"Total ".concat(K.result.recordsTotal," data")},defaultPageSize:be.maxSize||0,defaultCurrent:be.page+1||0,onChange:function(e,t){return ot((0,o.Z)((0,i.Z)({},be),{type:"article-negative",page:e-1,maxSize:t}))}}})},ct=function(){var e;return console.log(pe),(0,d.jsx)(w.Z,{onDetailClick:function(e){J(e),W(!0)},onLoading:q.loading,modal:{title:"Article List ".concat(pe.desc?"("+Object.keys(pe.desc).map((function(e){return e+": "+pe.desc[e]}))+")":""),visible:re&&!q.loading,close:function(){return ie(!1)}},data:(null===(e=q.result.data)||void 0===e?void 0:e.map((function(e){return{id:e.article_id,title:e.title,content:e.content,detail:e}})))||[],pagination:{showSizeChanger:!0,total:q.result.recordsTotal||0,showTotal:function(e){return"Total ".concat(q.result.recordsTotal," data")},defaultPageSize:pe.maxSize||0,defaultCurrent:pe.page+1||0,onChange:function(e,t){return ot((0,o.Z)((0,i.Z)({},pe),{page:e-1,maxSize:t}))}}})},ut=function(e){var t=[],a=[],n=[];return e.forEach((function(e){e.tones.forEach((function(e){e.negative?t.push(e.negative):e.positive?a.push(e.positive):e.neutral&&n.push(e.neutral)}))})),[{name:"Negative",data:t},{name:"Neutral",data:n},{name:"Positive",data:a}]},pt=(0,c.useRef)(null),gt=(0,c.useRef)(null),ht=(0,c.useRef)(null),yt=(0,c.useRef)(null),xt=(0,c.useRef)(null),ft=(0,c.useRef)(null),mt=(0,s.Z)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,a=e.quality,n=g((0,c.useState)(null),2),r=n[0],i=n[1],o=g((0,c.useState)(null),2),s=o[0],l=o[1];return[r,function(e){if(!e)throw new Error("You should provide correct html node.");return p()(e).then((function(e){var n=document.createElement("canvas"),r=n.getContext("2d"),o=e.width,s=e.height;n.width=o,n.height=s,r.drawImage(e,0,0);var l=n.toDataURL(t,a);return i(l),l})).catch(l)},{error:s}]}({type:"image/jpeg",quality:1}),2),vt=(mt[0],mt[1]),_t=function(){var e=(0,n.Z)((function(){var e,t,a,n;return(0,l.__generator)(this,(function(r){switch(r.label){case 0:x.t6.info({message:"Currently downloading the power point. Please wait for a while because this process will take some time until the process is complete, thank you"}),e=[],t=[pt,gt,ht,yt,xt,ft],a=0,r.label=1;case 1:return a<t.length?[4,vt(t[a].current)]:[3,4];case 2:n=r.sent(),e.push(n),r.label=3;case 3:return a++,[3,1];case 4:return(0,S.hN)(e).then((function(e){return e.json()})).then((function(e){200==e.code&&window.open(e.data)})).catch((function(e){x.t6.error({message:e.message})})),[2]}}))}));return function(){return e.apply(this,arguments)}}(),bt=(0,c.useMemo)((function(){return"https://ojk.media-insight.id"===(window.location.origin?window.location.origin:"")}),[]),Zt=(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(x.zx,{style:kt,icons:"FilePptFilled",shape:"round",type:"primary",danger:"true",onClick:function(){Ne(!0)},children:"PPT File"}),(0,d.jsx)("span",{style:{margin:"4px 0"}}),(0,d.jsx)(x.zx,{style:{background:"#06d6a0",border:"#06d6a0"},icons:"FileExcelFilled",shape:"round",type:"primary",onClick:function(){v((0,T.R_)(ee.result)),v((0,D.Ou)()),De(!0),0!==ee.result.category_set?et((0,o.Z)((0,i.Z)({},Qe),{columns:[ee.result.category_set]})):et((0,o.Z)((0,i.Z)({},Qe),{columns:tt.map((function(e){return e.category_set}))}))},children:"Excel File"})]}),jt=function(){var e;return(0,d.jsx)(x.u_,{title:"Download PPT File",closable:!0,onCancel:function(){return Ne(!1)},visible:Xe,onOk:function(){_t()},children:(0,d.jsxs)(x.X2,{children:[(0,d.jsx)(x.JX,{span:24,children:(0,d.jsx)("div",{ref:pt,children:(0,d.jsx)(x.Zb,{title:"Visibility Chart",children:(0,d.jsx)(x._W,{type:"line",title:"visibility chart",series:$.result.data?$.result.data.map((function(e){return{name:e.key,data:e.category_id_per_day.buckets.map((function(e){return e.doc_count}))}})):[],chartOptions:f.$E.chartOptions,options:{markers:f.$E.markers,xaxis:{categories:(null===(e=$.result.data)||void 0===e?void 0:e.length)>0?$.result.data[0].category_id_per_day.buckets.map((function(e){return e.key_as_string})):[]},legend:f.$E.legend,tooltip:{theme:"dark",fillSeriesColor:!1}}})})})}),(0,d.jsx)(x.JX,{span:24,children:(0,d.jsx)("div",{ref:gt,children:(0,d.jsx)(x.Zb,{title:"Visibility Pie",children:(0,d.jsx)(x._W,{id:"pie",type:"pie",title:"visibility pie",series:$.result.data?$.result.data.map((function(e){return e.doc_count})):[],options:{labels:$.result.data?$.result.data.map((function(e){return e.key})):[]},chartOptions:{type:"pie",height:300}})})})}),(0,d.jsx)(x.JX,{span:24,children:(0,d.jsx)("div",{ref:ht,children:(0,d.jsx)(x.Zb,{title:"Coverage Tone",children:(0,d.jsx)(x._W,{id:"coverage",type:"bar",title:"coverage tone",series:U.result.data?U.result.data.chart_bar.sort((function(e,t){return e.key>t.key?1:-1})).map((function(e){return{name:1==e.key?"Positive":0==e.key?"Neutral":"Negative",data:e.tone_per_day.buckets.map((function(e){return e.doc_count}))}})):[],chartOptions:f.X6.chartOptions,options:{colors:f.X6.colors,plotOptions:{bar:{horizontal:!1,borderRadius:6}},xaxis:{categories:U.result.data?U.result.data.chart_bar[0].tone_per_day.buckets.map((function(e){return e.key_as_string})):[]},yaxis:{labels:{style:{colors:"#FFFFFF"}}},legend:f.X6.legend}})})})}),(0,d.jsx)(x.JX,{span:24,children:(0,d.jsx)("div",{ref:yt,children:(0,d.jsx)(x.Zb,{title:"Tone by Media Selection",children:(0,d.jsx)(x._W,{id:"selection",type:"bar",title:"tone by media selection",series:B.result.data?ut(B.result.data):[],chartOptions:f.X6.chartOptions,options:{colors:f.X6.colors,plotOptions:f.X6.plotOptions,xaxis:{categories:B.result.data?B.result.data.map((function(e){return e.media_name})):[]},legend:f.X6.legend}})})})}),(0,d.jsx)(x.JX,{span:24,children:(0,d.jsx)("div",{ref:xt,children:(0,d.jsx)(x.Zb,{title:"Tone by Category",children:(0,d.jsx)(x._W,{id:"media",type:"bar",title:"tone by category",series:H.result.data?ut(H.result.data):[],chartOptions:f.X6.chartOptions,options:{colors:f.X6.colors,plotOptions:{bar:{horizontal:!1,borderRadius:6}},xaxis:{categories:H.result.data?H.result.data.filter((function(e){return e.tones.length>0?1:0})).map((function(e){return e.category_id})):[]},legend:f.X6.legend}})})})}),(0,d.jsx)("div",{style:{width:"100%"},ref:ft,children:(0,d.jsx)(x.Zb,{onLoading:V.loading,title:"Early Warning System",children:(0,d.jsx)(b.Z,{height:300,width:"100%",charts:{series:V.result.series,options:{tooltip:{shared:!0},markers:f.$E.markers,stroke:f.$E.stroke,colors:f.$E.colors,xaxis:{categories:V.result.date},yaxis:{show:!0,tickAmount:3,min:0,max:20,labels:{formatter:function(e,t){return 0==e&&e<5?"Potential":e>5&&e<9?"Emerging":e>10&&e<20?"Current":"Crisis"}}}}}})})})]})})},kt={boxShadow:"3px 0px 20px -12px rgba(54, 65, 76, 0.5)"},St=[{key:"1",title:"Media Visibility",content:(0,d.jsx)("div",{id:"media-visibility-chart",children:(0,d.jsx)(Z,{onLoading:$.loading,visibility:{title:"visibility chart",series:$.result.data?$.result.data.map((function(e){return{name:e.key,data:e.category_id_per_day.buckets.map((function(e){return e.doc_count}))}})):[],chartOptions:f.$E.chartOptions,events:{markerClick:function(e,t,a){return ot({type:"visibility",page:0,maxSize:10,order_by:"datee",order:"desc",data:{x:$.result.data[a.seriesIndex].category_id_per_day.buckets[a.dataPointIndex].key_as_string,y:$.result.data[a.seriesIndex].key}})}},options:{markers:f.$E.markers,xaxis:{categories:(null===(t=$.result.data)||void 0===t?void 0:t.length)>0?$.result.data[0].category_id_per_day.buckets.map((function(e){return e.key_as_string})):[],labels:{style:{colors:"#FFFFFF"}}},yaxis:{labels:{style:{colors:"#FFFFFF"}}},legend:f.$E.legend,tooltip:{theme:"dark",fillSeriesColor:!1}}},pie:{title:"visibility pie",series:$.result.data?$.result.data.map((function(e){return e.doc_count})):[],options:{labels:$.result.data?$.result.data.map((function(e){return e.key})):[]},chartOptions:{type:"pie",height:300},events:{dataPointSelection:function(e,t,a){return ot({type:"pie",page:0,maxSize:10,order_by:"datee",order:"desc",data:{y:$.result.data[a.dataPointIndex].key}})}}}})})},{key:"2",title:"Coverage Tone",content:(0,d.jsx)("div",{id:"coverage-tone-chart",children:(0,d.jsx)(j,{onLoading:U.loading,onLoadingMedia:B.loading,onLoadingCategory:H.loading,coverage:{title:"coverage tone",series:U.result.data?U.result.data.chart_bar.sort((function(e,t){return e.key>t.key?1:-1})).map((function(e){return{name:1==e.key?"Positive":0==e.key?"Neutral":"Negative",data:e.tone_per_day.buckets.map((function(e){return e.doc_count}))}})):[],chartOptions:f.X6.chartOptions,events:{dataPointSelection:function(e,t,a){return ot({type:"coverage",page:0,maxSize:10,order_by:"datee",order:"desc",data:{y:"2"==a.seriesIndex?"1":"0"==a.seriesIndex?"-1":"0",x:U.result.data.chart_bar.find((function(e){var t="2"==a.seriesIndex?"1":"0"==a.seriesIndex?"-1":"0";return e.key==t?e:-1})).tone_per_day.buckets[a.dataPointIndex].key_as_string}})}},options:{colors:f.X6.colors,plotOptions:{bar:{horizontal:!1,borderRadius:6}},xaxis:{categories:U.result.data?U.result.data.chart_bar[0].tone_per_day.buckets.map((function(e){return e.key_as_string})):[]},yaxis:{labels:{style:{colors:"#FFFFFF"}}},legend:f.X6.legend,tooltip:{theme:"dark",fillSeriesColor:!1}}},pie:{title:"Coverage pie",series:U.result.data?U.result.data.chart_bar.sort((function(e,t){return e.key>t.key?1:-1})).map((function(e){return e.doc_count})):[],options:{labels:["Negative","Neutral","Positive"],colors:f.X6.colors,legend:{position:"right",horizontalAlign:"center",verticalAlign:"center",markers:{width:8,height:8,radius:2,offsetY:0}}},chartOptions:{type:"pie",height:300},events:{dataPointSelection:function(e,t,a){return ot({type:"pie-cov",page:0,maxSize:10,order_by:"datee",order:"desc",data:{y:U.result.data.chart_bar.sort((function(e,t){return e.key>t.key?1:-1}))[a.dataPointIndex].key}})}}},selection:{title:"tone by media selection",series:B.result.data?ut(B.result.data):[],chartOptions:f.X6.chartOptions,events:{dataPointSelection:function(e,t,a){return ot({type:"coverage-bar",page:0,maxSize:10,order_by:"datee",order:"desc",data:{y:B.result.data[a.dataPointIndex].media_id,x:a.seriesIndex-1},media_name:B.result.data[a.dataPointIndex].media_name})}},options:{colors:f.X6.colors,plotOptions:f.X6.plotOptions,xaxis:{categories:B.result.data?B.result.data.map((function(e){return e.media_name})):[]},yaxis:{labels:{style:{colors:"#FFFFFF"}}},legend:f.X6.legend,tooltip:{theme:"dark",fillSeriesColor:!1}}},media:{title:"tone by category",series:H.result.data?ut(H.result.data):[],chartOptions:f.X6.chartOptions,events:{click:function(e,t,a){return ot({type:"coverage-barhor",page:0,maxSize:10,order_by:"datee",order:"desc",data:{y:H.result.data[a.dataPointIndex].category_id,x:a.seriesIndex-1}})}},options:{colors:f.X6.colors,plotOptions:{bar:{horizontal:!1,borderRadius:6}},xaxis:{categories:H.result.data?H.result.data.filter((function(e){return e.tones.length>0?1:0})).map((function(e){return e.category_id})):[],labels:{style:{colors:"#FFFFFF"}}},yaxis:{labels:{style:{colors:"#FFFFFF"}}},legend:f.X6.legend,tooltip:{theme:"dark",fillSeriesColor:!1}}}})})}];return(0,d.jsxs)("div",{style:{height:"100%",marginBottom:"1rem"},children:[(0,d.jsx)("div",{style:{position:"absolute",zIndex:999,right:20,bottom:"tablet"==Ue?"30%":100},children:(0,d.jsx)(x.Lt,{direction:"vertical",trigger:"hover",overlayStyle:{background:"transparent"},placement:"topCenter",overlayHeight:"100%",overlay:Zt,children:(0,d.jsx)(x.zx,{loading:Ae,style:kt,onClick:function(e){return e.preventDefault()},type:"primary",icons:"DownloadOutlined",shape:"round",children:"Download"})})}),(0,d.jsxs)(x.X2,{children:[(0,d.jsx)(x.JX,{md:24,lg:6,children:(0,d.jsx)(x.Zb,{title:"Latest news",children:(0,d.jsx)("div",{style:{overflowY:"auto",overflowX:"hidden",height:270},children:(0,d.jsx)(x.X2,{children:null===(a=Y.result.data)||void 0===a?void 0:a.map((function(e){return(0,d.jsx)(x.JX,{span:24,children:(0,d.jsx)(x.TH,{ellipsis:!0,title:(0,d.jsx)(x.X2,{children:(0,d.jsxs)(x.JX,{span:24,children:[(0,d.jsx)("span",{children:e.title}),(0,d.jsx)("span",{style:{fontSize:"12px",fontWeight:"bold",display:"block"},children:e.datee})]})}),content:e.content,onClick:function(){(0,F.Mr)({article_id:e.article_id}).then((function(e){return e.json()})).then((function(t){Se(e),ze(!0),Me(t.data)})).catch((function(e){return console.log(e)}))}})},e.article_id)}))})})})}),(0,d.jsx)(x.JX,{xs:24,md:24,lg:18,children:(0,d.jsx)(x.Zb,{onLoading:U.loading,children:(0,d.jsx)("div",{id:"coverage-tonality-chart",children:(0,d.jsx)(_,{height:290,charts:{events:{markerClick:function(e,t,a){return ot({type:"tonality",page:0,maxSize:10,order_by:"datee",order:"desc",data:{x:a.seriesIndex-1,y:V.result.date[a.dataPointIndex]}})}},options:(0,r.Z)({title:{text:"Media Sentiment Breakdown",align:"left",offsetY:5,floating:!0,style:{fontSize:"14px",fontWeight:500,color:"#fff"}},tooltip:{shared:!0},markers:f.$E.markers,xaxis:{categories:U.result.data?U.result.data.chart_bar[0].tone_per_day.buckets.map((function(e){return e.key_as_string})):[" "]},stroke:f.$E.stroke,colors:["#ff6b6b","#1990ff","#06d6a0"],yaxis:{labels:{style:{colors:"#FFFFFF"}}},legend:{position:"top",horizontalAlign:"right",markers:f.$E.legend.markers}},"tooltip",{theme:"dark",fillSeriesColor:!1}),series:U.result.data?U.result.data.chart_bar.sort((function(e,t){return e.key>t.key?1:-1})).map((function(e){return{name:1==e.key?"Positive":-1==e.key?"Negative":"Neutral",data:e.tone_per_day.buckets.map((function(e){return e.doc_count}))}})):[]}})})})}),(0,d.jsx)(y.Z,{}),(0,d.jsxs)(x.X2,{children:[(0,d.jsx)(x.JX,{xs:24,md:24,lg:8,xl:8,children:(0,d.jsx)(x.Zb,{title:"Positive",children:(0,d.jsx)(st,{})})}),(0,d.jsx)(x.JX,{xs:24,md:24,lg:8,xl:8,children:(0,d.jsx)(x.Zb,{title:"Neutral",children:(0,d.jsx)(lt,{})})}),(0,d.jsx)(x.JX,{xs:24,md:24,lg:8,xl:8,children:(0,d.jsx)(x.Zb,{title:"negative",children:(0,d.jsx)(dt,{})})})]}),(0,d.jsx)(y.Z,{}),(0,d.jsx)(x.JX,{span:24,style:E,children:(0,d.jsx)(x.li,{style:E,defaultActiveKey:"1",data:St})})]}),(0,d.jsx)(z.Z,{clippingDrawer:ke,setClippingDrawer:Se,clipListPop:Ce,setclipListPop:ze,saveArticlePop:!1,keyword:Je}),(0,d.jsx)(ct,{}),(0,d.jsx)(jt,{}),(0,d.jsxs)(x.u_,{title:"Download Excell File",closable:!0,onCancel:function(){return De(!1)},visible:Te,footer:[(0,d.jsx)(x.zx,{type:"dashed",danger:!0,disabled:!!(0==qe.columns.length&0==Qe.columns.length),onClick:function(){Ge((0,o.Z)((0,i.Z)({},ee.result),{columns:[]})),et((0,o.Z)((0,i.Z)({},ee.result),{columns:[]}))},children:"Reset"},"reset"),(0,d.jsx)(x.zx,{type:"primary",disabled:!(qe.columns.length>0&Qe.columns.length>0),loading:Ae,onClick:function(){Re(!0),(0,S.r8)((0,o.Z)((0,i.Z)({url:bt,columns:qe.columns},ee.result),{category_set:Qe.columns.join(",")})).then((function(e){return e.json()})).then((function(e){window.open(e.data),Re(!1),De(!1),Ge((0,o.Z)((0,i.Z)({},ee.result),{columns:[]}))})).catch((function(e){x.t6.error({message:"Error when download excel!"}),Re(!1),De(!1),Ge((0,o.Z)((0,i.Z)({},ee.result),{columns:[]}))}))},children:"Download File"},"submit")],children:[(0,d.jsx)("p",{children:"Columns:"}),(0,d.jsx)(P,{id:"columns",selectall:{indeterminate:Be,onChange:function(e){e.target.checked?Ge((0,o.Z)((0,i.Z)({},qe),{columns:ae.result.data.map((function(e){return e.name}))})):Ge((0,o.Z)((0,i.Z)({},qe),{columns:[]}))},checked:qe.columns.length==(null===(u=ae.result.data)||void 0===u?void 0:u.length),label:"Select All (".concat(qe.columns.length,"/").concat(null===(h=ae.result.data)||void 0===h?void 0:h.length,")")},group:{onChange:function(e){Ge((0,o.Z)((0,i.Z)({},qe),{columns:e}))},value:qe.columns,options:ae.result.data?ae.result.data.map((function(e){return{value:e.name,label:e.name,checked:e.checked}})):[]}}),(0,d.jsx)("p",{style:{marginTop:"20px"},children:"Categories:"}),(0,d.jsx)(P,{id:"columns",selectall:{indeterminate:Be,onChange:function(e){e.target.checked?et((0,o.Z)((0,i.Z)({},Qe),{columns:tt.map((function(e){return e.category_set}))})):et((0,o.Z)((0,i.Z)({},Qe),{columns:[]}))},checked:Qe.columns.length==tt.length,label:"Select All (".concat(Qe.columns.length,"/").concat(tt.length,")")},group:{onChange:function(e){et((0,o.Z)((0,i.Z)({},Qe),{columns:e}))},value:Qe.columns,options:tt?null===tt||void 0===tt?void 0:tt.map((function(e){return{value:e.category_set,label:e.descriptionz,checked:e.checked}})):[]}}),(0,d.jsxs)("div",{style:{margin:"6px 0 0"},children:[(0,d.jsx)("b",{children:"Note:"})," you can only download the columns that are selected."]})]})]})}},56267:function(e,t,a){"use strict";a.d(t,{R_:function(){return l},Sg:function(){return u},d4:function(){return c},uL:function(){return d}});var n=a(47568),r=a(97582),i=a(86763),o=a(74034),s="dashboard/excel/columns",l=function(e){return function(){var t=(0,n.Z)((function(t,a){var n,l,d;return(0,r.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),t({type:i.AU}),n=JSON.parse(localStorage.getItem("userToken")),[4,(0,o.Be)(s,n.token,e)];case 1:return[4,(l=a.sent()).json()];case 2:return l=a.sent(),t({type:i.pL,result:l}),[3,4];case 3:return d=a.sent(),t({type:i.mV,result:d}),[3,4];case 4:return[2]}}))}));return function(e,a){return t.apply(this,arguments)}}()},d=function(e){return new Promise((function(t,a){var n=JSON.parse(localStorage.getItem("userToken"));return(0,o.SD)(s,n.token,e).then((function(e){return t(e)}))}))},c=function(e){return new Promise((function(t,a){var n=JSON.parse(localStorage.getItem("userToken"));return(0,o._o)(s,n.token,e).then((function(e){return t(e)}))}))},u=function(e,t){return new Promise((function(a,n){var r=JSON.parse(localStorage.getItem("userToken"));return(0,o.Y2)("".concat(s,"/").concat(e),r.token,t).then((function(e){return a(e)}))}))}}},function(e){e.O(0,[443,840,874,774,888,179],(function(){return t=28036,e(e.s=t);var t}));var t=e.O();_N_E=t}]);