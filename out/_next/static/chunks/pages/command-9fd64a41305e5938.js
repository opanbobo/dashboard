(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[865],{6621:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/command",function(){return a(65798)}])},65798:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return R}});var n=a(26042),r=a(69396),i=a(85893),o=a(67294),s=a(48513),l=a(5152),c=a.n(l),d=function(e){return{children:e.children}},u=a(18598),m=a.n(u),p=a(80052),h=a.n(p),g=a(78539),f=a(51518),x=a(66938),v=a(86706),_=a(43109),b=a(60011),j=a(66876),w=a(34058),y=a(98361),Z=(a(68822),a(46097)),S=(a(99883),a(99534)),k=a(73939),N=a(25617),z=a(47568),T=a(97582),C=a(63426),X=a(83401),J=(a(49552),function(e){return function(){var t=(0,z.Z)((function(t,a){var n,r,i;return(0,T.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),t({type:C.MZV}),n=JSON.parse(localStorage.getItem("userToken")),[4,(0,X.mD)("dashboard/wordcloud",n.token,e)];case 1:return[4,(r=a.sent()).json()];case 2:return r=a.sent(),t({type:C.XXI,result:r}),[3,4];case 3:return i=a.sent(),t({type:C.w4A,result:i}),[3,4];case 4:return[2]}}))}));return function(e,a){return t.apply(this,arguments)}}()}),L=function(e){return function(){var t=(0,z.Z)((function(t,a){var n,r,i;return(0,T.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),t({type:C.CDX}),n=JSON.parse(localStorage.getItem("userToken")),[4,(0,X.SD)("dashboard/media-count/articles",n.token,e)];case 1:return[4,(r=a.sent()).json()];case 2:return r=a.sent(),t({type:C.cH0,result:r}),[3,4];case 3:return i=a.sent(),t({type:C.M6t,result:i}),[3,4];case 4:return[2]}}))}));return function(e,a){return t.apply(this,arguments)}}()},P=function(e){var t=e.className,a=e.data,s=(0,S.Z)(e,["className","data"]),l=(0,N.I0)(),c=(0,N.v9)((function(e){return e.summary})).medCountArticle,d=(0,o.useState)({}),u=d[0],m=d[1],p=(0,o.useState)(!1),g=p[0],f=p[1],x=function(){return(0,i.jsx)(k.Z,{modal:{title:"Article List (".concat(u.name,")"),visible:g&&!c.loading,closable:!0,onCancel:function(){f(!1),m({})}},onLoading:c.loading,data:c.result.data?c.result.data.data.map((function(e){return{id:e.article_id,title:e.title,content:e.content,detail:e}})):[],pagination:{showSizeChanger:!0,total:c.result.data?c.result.data.recordsTotal:0,showTotal:function(e){return"Total ".concat(e," data")},defaultPageSize:u.size,defaultCurrent:u.page+1,onChange:function(e,t){l(L({size:t,page:e-1,article_ids:u.article_ids})),m((0,r.Z)((0,n.Z)({},u),{page:e-1,size:t}))}}})};return(0,i.jsxs)(Z.Zb,(0,r.Z)((0,n.Z)({className:t},s),{children:[(0,i.jsxs)("div",{className:h()["media-list-wrapper"],children:[a.map((function(e,t){if("Radio"!==e.label)return(0,i.jsxs)("div",{className:h()["list-item"],onClick:function(){m({name:e.label,page:0,size:10,article_ids:e.article_ids}),l(L({size:10,page:0,article_ids:e.article_ids})),f(!0)},children:[(0,i.jsx)("div",{className:h()["item-total"],children:e.total}),(0,i.jsx)("div",{className:h()["item-label"],children:e.label})]},t)})),s.children]}),(0,i.jsx)(x,{})]}))},M=function(e){var t=e.className,a=e.charts,r=e.activeTone,o=(0,S.Z)(e,["className","charts","activeTone"]),s=a.data,l=void 0===s?[]:s,c=a.onDonutClick;return(0,i.jsx)(Z.X2,{children:l.map((function(e,a){var s,d=e.tones.reduce((function(e,t){var a=Object.values(t)[0];return e+Math.abs(a)}),0);s=void 0!==r?e.tones.map((function(e){var t=Object.values(e)[0];return Object.keys(e)[0]===r?Math.abs(t)/d*100:0})):e.tones.map((function(e){return Math.abs(Object.values(e)[0])/d*100}));var u={chart:{type:"donut",events:{click:function(t,n,r){c(a,r),console.log(e.tones)}}},title:{text:l[a].media_name,align:"center",margin:10,offsetY:0,style:{fontSize:"16px",color:"#fff"}},labels:["Positive","Negative","Neutral"],colors:["#1b81e2","#df6264","#0bbd91"],width:100,tooltip:{enabled:!1},legend:{position:"top"},stroke:{show:!1},plotOptions:{pie:{donut:{labels:{show:!1,total:{showAlways:!1,show:!1}}}}},dataLabels:{dropShadow:{blur:3,opacity:.8},style:{fontSize:"12px",colors:["#fff"]},formatter:function(e,t){return"".concat(e.toFixed(1),"%")}},annotations:{points:s.map((function(e,t){return{x:t+1,y:e,marker:{size:0},onClick:function(e,t,n){c(a,n)}}}))}};return(0,i.jsx)(Z.JX,{xl:12,md:12,children:(0,i.jsx)(Z._W,(0,n.Z)({id:"mediaTone_".concat(a),type:"donut",className:t,options:u,series:s.slice(0,u.labels.length)},o))},a)}))})},O=a(93883),D=a(69412),I=a(84865),H=a(87661),E=(a(4792),a(36093)),Y=a(58497),A=a(58742),G=(c()((function(){return Promise.all([a.e(898),a.e(414),a.e(688)]).then(a.bind(a,2688))}),{loadableGenerated:{webpack:function(){return[2688]}},ssr:!1}),c()((function(){return Promise.all([a.e(898),a.e(308)]).then(a.bind(a,23308))}),{loadableGenerated:{webpack:function(){return[23308]}},ssr:!1})),V={1023:" (max-width: 1023px)",1024:"(max-width: 1024px)"},B=function(){var e,t,a,l,c,d,u,p,S=(0,N.I0)(),z=(0,o.useState)(),T=z[0],C=z[1],L=(0,N.v9)((function(e){return e.geo})),B=(0,N.v9)((function(e){return e.summary})),R=(0,N.v9)((function(e){return e.analytic})),U=(0,N.v9)((function(e){return e.filter})),F=(0,N.v9)((function(e){return e.spokeperson})),q=(0,N.v9)((function(e){return e.issues})),K=(L.geo,L.geoList),Q=B.wordCloud,W=U.filter,$=(F.spokepersonStatistic,F.spokepersonStatisticClick),ee=F.spokepersonDetail,te=(q.issueTop,R.ews),ae=(R.coverageTonality,R.toneMedia),ne=R.article,re=(R.articlePositive,R.articleNegative,R.articleNeutral,R.mediaListCount),ie=(0,o.useState)(!1),oe=ie[0],se=ie[1],le=(0,o.useState)({}),ce=le[0],de=le[1],ue=(0,o.useState)(!1),me=ue[0],pe=ue[1],he=(0,o.useState)(!1),ge=he[0],fe=he[1],xe=(0,o.useState)(""),ve=xe[0],_e=xe[1],be=(0,o.useState)({page:0,max_size:10}),je=be[0],we=be[1],ye=(0,o.useState)({}),Ze=ye[0],Se=ye[1],ke=(0,o.useState)([]),Ne=(ke[0],ke[1]),ze=(0,o.useState)(!1),Te=(ze[0],ze[1]),Ce=(0,o.useState)(!1),Xe=(Ce[0],Ce[1]),Je=(0,o.useState)("");Je[0],Je[1],g.Z,g.Z,g.Z,f.Z,x.Z,v.Z,_.Z,b.Z,j.Z,w.Z,y.Z;(0,o.useEffect)((function(){JSON.parse(localStorage.getItem("userToken"));Te(!0),S((0,D.Vp)((0,n.Z)({type_location:"article"},W.result))),Xe(!0),S(J((0,r.Z)((0,n.Z)({},W.result),{total_word:40}))),S((0,I.R9)(W.result)),S((0,I.kI)(W.result)),S((0,I.GL)(W.result)),S((0,H.rG)((0,r.Z)((0,n.Z)({},W.result),{limit:10,page:0}))),S((0,I.uP)(W.result)),S((0,E.c)((0,r.Z)((0,n.Z)({},W.result),{limit:5})))}),[W]),(0,o.useEffect)((function(){(0,s.Z)(V,C)}),[T]);var Le=function(e){"media"===e.type?(S((0,I.yU)((0,r.Z)((0,n.Z)({},W.result),{maxSize:e.maxSize,page:e.page,media_id:ae.result.data[e.data.x].media_id,tone:2===e.data.y?0:0===e.data.y?1:-1}))),de((0,r.Z)((0,n.Z)({},e),{desc:{media:ae.result.data[e.data.x].media_name,tone:2===e.data.y?"Neutral":0===e.data.y?"Positive":"Negative"}}))):"ews"==e.type?(S((0,I.yU)((0,r.Z)((0,n.Z)({},W.result),{maxSize:e.maxSize,page:e.page,category_id:te.result.series[e.data.y].name,start_date:te.result.date[e.data.x],end_date:te.result.date[e.data.x]}))),de((0,r.Z)((0,n.Z)({},e),{desc:{Category:te.result.series[e.data.y].name,Date:te.result.date[e.data.x]}}))):"geo"==e.type?(S((0,D.YH)((0,r.Z)((0,n.Z)({},W.result),{max_size:e.maxSize,page:e.page,geo_loc:e.geo_loc,type_location:"article"}))),de((0,r.Z)((0,n.Z)({},e),{desc:{Location:e.geo_loc}}))):"tone"==e.type&&(S((0,I.yU)((0,r.Z)((0,n.Z)({},W.result),{tone:"Neutral"==e.data.x?"0":"Positive"==e.data.x?"1":"-1",maxSize:e.maxSize,page:e.page,start_date:e.data.y,end_date:e.data.y}))),de((0,r.Z)((0,n.Z)({},e),{desc:{Tone:e.data.x,Date:e.data.y}}))),se(!0)},Pe=function(e){de({}),se(!1)},Me=function(){var e;return(0,i.jsx)(Z.dy,{title:Ze.influencer_name,placement:"right",visible:ge&&!ee.loading,onClose:function(){fe(!1),Se({})},children:(0,i.jsxs)(Z.X2,{children:[(0,i.jsxs)(Z.JX,{xs:24,sm:24,md:12,lg:12,xl:12,children:[(0,i.jsx)(Z.TH,{title:"date:",content:Ze.datee}),(0,i.jsx)(Z.TH,{title:"sentiment:",content:(0,i.jsx)(Z.Vp,{style:{margin:0},color:"1"==Ze.tone?"success":"-1"==Ze.tone?"error":"processing",children:1==Ze.tone?"Positive":-1==Ze.tone?"Negative":"Neutral"})})]}),(0,i.jsx)(Z.JX,{xs:24,sm:24,md:12,lg:12,xl:12,children:(0,i.jsx)(Z.TH,{title:"media:",content:"".concat(Ze.media)})}),(0,i.jsx)(Z.JX,{span:24,children:(0,i.jsxs)(Z.X2,{children:[(0,i.jsx)(Z.JX,{span:24,children:(0,i.jsx)("div",{style:{overflowY:"scroll",maxHeight:300,border:"1px dashed rgba(54, 65, 76, 0.3)",padding:6,borderRadius:3},children:Ze.quotes})}),(0,i.jsx)(Z.JX,{span:24,children:(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:null===(e=ee.result.data)||void 0===e?void 0:e.content.replace(new RegExp(Ze.quotes,"gi"),(function(e){return'<b class="highlight-text">'.concat(e,"</b>")}))}})})]})}),(0,i.jsx)(Z.JX,{span:24,children:(0,i.jsx)(Z.Vp,{color:"processing",children:Ze.category_id})})]})})},Oe=function(){var e,t,a;return(0,i.jsx)(k.Z,{modal:{title:"Article List ".concat(ce.desc?"("+Object.keys(ce.desc).map((function(e){return e+": "+ce.desc[e]}))+")":""),visible:oe&&!ne.loading&&!K.loading,closable:!0,onCancel:Pe},onLoading:"geo"==ce.type?K.loading:null===ne||void 0===ne?void 0:ne.loading,data:"geo"==ce.type?K.result.data?K.result.data.map((function(e){return{id:e.article_id,title:e.title,content:e.content,detail:e}})):[]:(null===ne||void 0===ne||null===(e=ne.result)||void 0===e?void 0:e.data)?ne.result.data.map((function(e){return{id:e.article_id,title:e.title,content:e.content,detail:e}})):[],pagination:{showSizeChanger:!0,total:"geo"==ce.type?null===K||void 0===K||null===(t=K.result)||void 0===t?void 0:t.recordsTotal:null===ne||void 0===ne||null===(a=ne.result)||void 0===a?void 0:a.recordsTotal,showTotal:function(e){return"Total ".concat(e," data")},defaultPageSize:ce.maxSize?null===ne||void 0===ne?void 0:ne.maxSize:null===ne||void 0===ne?void 0:ne.max_size,defaultCurrent:ce.page+1,onChange:function(e,t){return Le((0,r.Z)((0,n.Z)({},ce),{page:e-1,maxSize:t}))}}})};return(0,i.jsx)("div",{className:m()["command-wrapper"],children:(0,i.jsx)("div",{className:m().toprow,children:(0,i.jsx)("div",{className:m().topcol,children:(0,i.jsxs)(Z.X2,{children:[(0,i.jsxs)(Z.JX,{xs:24,md:24,lg:24,xl:24,children:[(0,i.jsx)(P,{data:(null===re||void 0===re||null===(e=re.result)||void 0===e?void 0:e.data)?re.result.data.map((function(e,t){return e})):[],children:(0,i.jsxs)("div",{className:h()["list-item"],children:[(null===re||void 0===re||null===(t=re.result)||void 0===t?void 0:t.data)?(0,i.jsx)("div",{className:h()["item-total"],children:(null===(l=null===re||void 0===re||null===(a=re.result)||void 0===a?void 0:a.data[0])||void 0===l?void 0:l.total)+(null===(d=null===re||void 0===re||null===(c=re.result)||void 0===c?void 0:c.data[1])||void 0===d?void 0:d.total)+(null===(p=null===(u=re.result)||void 0===u?void 0:u.data[2])||void 0===p?void 0:p.total)}):null,(0,i.jsx)("div",{className:h()["item-label"],children:"Total Article"})]})}),(0,i.jsx)("p",{style:{marginBottom:"12px"}}),(0,i.jsx)(Z.Zb,{children:(0,i.jsx)(O.default,{})}),(0,i.jsx)("p",{style:{marginBottom:"12px"}})]}),(0,i.jsx)(Z.JX,{xs:24,md:24,lg:8,xl:8,children:(0,i.jsx)(Z.X2,{children:(0,i.jsx)(Z.JX,{span:24,children:(0,i.jsx)(Z.Zb,{onLoading:Q.loading,className:m()["dcc-card"],children:Q.result.total_word?(0,i.jsx)(G,{className:m()["chart-word"],options:{series:[{type:"wordcloud",data:Q.result.data?Q.result.data.map((function(e){return{name:e.name,weight:e.weight,color:"rgba(25, 144, 255,".concat(e.weight>20?1:e.weight<=15?.3:1,")")}})):[],style:{fontFamily:"Noto Sans, sans-serif",textTransform:"capitalize",color:"white"},minFontSize:10}],chart:{backgroundColor:"#2b2d3e"}}}):(0,i.jsxs)(Z.X2,{children:[(0,i.jsx)(Z.JX,{children:"Please select date for backtrack:"}),(0,i.jsxs)(Z.JX,{children:[(0,i.jsx)(Z.Mt,{onChange:function(e){return _e(e.format("YYYY-MM-DD"))}}),(0,i.jsx)(Z.zx,{onClick:function(){var e;(e={backtrack_date:ve},new Promise((function(t,a){var n=JSON.parse(localStorage.getItem("userToken"));return(0,X.mD)("dashboard/wordcloud/register",n.token,e).then((function(e){return t(e)}))}))).then((function(e){return e.json()})).then((function(e){"vdadi successfully registered..."==e.message?(Z.t6.success({message:"Success backtrack"}),S(J({start_date:W.result.start_date,end_date:W.result.end_date,total_word:40}))):Z.t6.error({message:"Error when add backtrack date"})})).catch((function(e){return Z.t6.error({message:"Error when add backtrack date"})}))},children:"Submit"})]})]})})})})}),(0,i.jsxs)(Z.JX,{xs:24,md:24,lg:16,xl:16,children:[(0,i.jsx)("div",{className:m().botrow,children:(0,i.jsx)(Z.X2,{children:(0,i.jsx)(Z.JX,{xs:24,md:24,lg:24,xl:24,children:(0,i.jsx)(Z.Zb,{onLoading:ae.loading,title:"Top 10 Media",children:(0,i.jsx)("div",{style:{overflowY:"scroll",overflowX:"hidden",maxHeight:362,border:"1px dashed rgba(54, 65, 76, 0.3)",padding:6,borderRadius:3},children:(0,i.jsx)(M,{activeTone:0===W.result.tonee?"Positive":2===W.result.tonee?"Neutral":1===W.result.tonee?"Negative":void 0,charts:{data:ae.result.data||[],onDonutClick:function(e,t){console.log(ae.result.data),void 0!==t.globals.selectedDataPoints[0][0]&&(console.log(t.globals.selectedDataPoints[0][0]),Le({type:"media",page:0,maxSize:10,order_by:"datee",order:"desc",data:{x:e,y:t.globals.selectedDataPoints[0][0]}}))},chartOptions:{width:100,tooltip:{theme:"light",fillSeriesColor:!0},legend:{position:"top"},plotOptions:{pie:{donut:{labels:{show:!1,total:{showAlways:!1,show:!1}}}}}}}})})})})})}),(0,i.jsx)("p",{style:{marginBottom:"12px"}}),(0,i.jsx)(Me,{}),(0,i.jsx)(Y.Z,{chartList:me,setChartList:pe,spokepersonStatisticClick:$,dataList:je,paginationHandler:function(e,t){S((0,H.AY)((0,r.Z)((0,n.Z)({},W.result),{page:e-1,max_size:t,tone:"all",influencer:je.influencer_name,order:"desc"}))),we((0,r.Z)((0,n.Z)({},je),{page:e-1,max_size:t}))},setDataList:we,handleClickChart:function(e){S((0,H.gG)({article_id:e.article_id})),(0,A.Mr)({article_id:e.article_id}).then((function(e){return e.json()})).then((function(t){Ne(t.data),Se(e),fe(!0)})).catch((function(e){return console.log(e)}))}}),(0,i.jsx)(Oe,{})]})]})})})})};B.layout=function(e){return(0,i.jsx)(d,{children:e})};var R=B},36093:function(e,t,a){"use strict";a.d(t,{V:function(){return l},c:function(){return s}});var n=a(47568),r=a(97582),i=a(63426),o=a(83401),s=(a(49552),function(e){return function(){var t=(0,n.Z)((function(t,a){var n,s,l;return(0,r.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),t({type:i.mTQ}),n=JSON.parse(localStorage.getItem("userToken")),[4,(0,o.SD)("dashboard/top-issue",n.token,e)];case 1:return[4,(s=a.sent()).json()];case 2:return s=a.sent(),t({type:i.dOw,result:s}),[3,4];case 3:return l=a.sent(),t({type:i.bOk,result:l}),[3,4];case 4:return[2]}}))}));return function(e,a){return t.apply(this,arguments)}}()}),l=function(e){return new Promise((function(t,a){var n=JSON.parse(localStorage.getItem("userToken"));return(0,o._o)("issue/update/",n.token,e).then((function(e){return t(e)}))}))}},80052:function(e){e.exports={"media-list-wrapper":"commandMediaList_media-list-wrapper__mhDt0","list-item":"commandMediaList_list-item__3r5rz","item-image":"commandMediaList_item-image__S5HM9","item-label":"commandMediaList_item-label__OlT1U","item-total":"commandMediaList_item-total__po_jr"}},18598:function(e){e.exports={"command-wrapper":"command_command-wrapper__5CIGT",toprow:"command_toprow__eJBL_",topcol:"command_topcol__t2px3",leftcol:"command_leftcol__V_D1B",midcol:"command_midcol__a1_mM","chart-word":"command_chart-word__xp_YZ",rightcol:"command_rightcol__wK5eJ",botrow:"command_botrow__H_P8u"}}},function(e){e.O(0,[840,874,62,883,774,888,179],(function(){return t=6621,e(e.s=t);var t}));var t=e.O();_N_E=t}]);