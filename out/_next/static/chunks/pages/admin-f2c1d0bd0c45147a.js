(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{65469:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return t(16555)}])},16555:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ae}});var r=t(85893),a=t(86031),l=t(25617),o=t(67294),i=t(30381),s=t.n(i),u=t(32495),c=t.n(u),d=t(35666),m=t.n(d),p=t(38881),f=t(74034);function h(e,n,t,r,a,l,o){try{var i=e[l](o),s=i.value}catch(u){return void t(u)}i.done?n(s):Promise.resolve(s).then(r,a)}function x(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var l=e.apply(n,t);function o(e){h(l,r,a,o,i,"next",e)}function i(e){h(l,r,a,o,i,"throw",e)}o(void 0)}))}}var y=function(e){return x(m().mark((function n(t,r){var a,l;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t({type:p.sr}),a=JSON.parse(localStorage.getItem("userToken")),n.next=5,(0,f.SD)("admin/list/",a.token,e);case 5:return l=n.sent,n.next=8,l.json();case 8:l=n.sent,t({type:p.Ai,result:l}),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),t({type:p.nY,result:n.t0});case 15:case"end":return n.stop()}}),n,null,[[0,12]])})))},g=function(e){return new Promise((function(n,t){var r=JSON.parse(localStorage.getItem("userToken"));return(0,f.Be)("admin/level/list/",r.token,e).then((function(e){return n(e)}))}))};function v(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function j(){return(j=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var b=function(e){var n=j({},e),t=(0,l.I0)(),i=(0,l.v9)((function(e){return e.adminReducers})).adminAllCompany;(0,o.useEffect)((function(){var e;t(x(m().mark((function n(t,r){var a,l;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t({type:p.ue}),a=JSON.parse(localStorage.getItem("userToken")),n.next=5,(0,f.Be)("admin/company/list/",a.token,e);case 5:return l=n.sent,n.next=8,l.json();case 8:l=n.sent,t({type:p.m2,result:l}),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),t({type:p.b$,result:n.t0});case 15:case"end":return n.stop()}}),n,null,[[0,12]])}))))}),[]);var s=[];for(var u in i.result.data)s.push({label:u,value:i.result.data[u]});return(0,r.jsx)(a.Ph,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){v(e,n,t[n])}))}return e}({},n,{showSearch:!0,optionFilterProp:"children",placeholder:"Select Company",filterOption:function(e,n){return n.children.indexOf(e)>=0},children:s.map((function(e){return(0,r.jsx)(a.Ph.Option,{value:e.value,children:e.label},e.label)}))}))};function w(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function _(){return(_=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var C=function(e){var n=_({},e),t=(0,o.useState)([]),l=t[0],i=t[1];return(0,o.useEffect)((function(){g().then((function(e){return e.json()})).then((function(e){i(e.data)})).catch((function(e){}))}),[]),(0,r.jsx)(a.Ph,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){w(e,n,t[n])}))}return e}({},n,{options:l.length>0?l.map((function(e){return{value:e.id,label:e.level_name}})):[]}))};C.Tag=function(e){var n=(0,o.useState)([]),t=n[0],a=n[1];return(0,o.useEffect)((function(){g().then((function(e){return e.json()})).then((function(e){a(e.data)})).catch((function(e){}))}),[]),(0,r.jsx)(r.Fragment,{children:t.length>0?t.map((function(n){if(n.id==e)return n.level_name})):[]})};var O=C,S=t(27049);function k(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function P(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){k(e,n,t[n])}))}return e}var T=function(e){var n=e.selectAll,t=e.group;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.XZ,P({},n,{children:n.label})),(0,r.jsx)(S.Z,{style:{margin:"6px 0"}}),(0,r.jsx)(a.XZ,P({type:"group",style:{display:"flex",alignItems:"flex-start",flexDirection:"column",height:200,width:"100%",overflow:"auto"}},t))]})};function z(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function X(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){z(e,n,t[n])}))}return e}var J=function(e){var n=e.tables;return(0,r.jsx)(a.iA,X({},n))};J.User=function(e){var n=e.tables;return(0,r.jsx)(J,{tables:X({},n)})};var I=J,D=function(e){var n=e.title,t=e.isOpen,l=e.onClose,o=e.submit,i=e.submitDisable,s=e.children;return(0,r.jsx)(a.dy,{title:n,visible:t,onClose:l,footer:(0,r.jsx)(a.zx,{type:"primary",style:{float:"right"},disabled:i,onClick:o,children:"Submit Update"}),children:s})};D.Create=function(e){var n=e.isOpen,t=e.onClose,l=e.submit,o=e.children;return(0,r.jsx)(a.u_,{closable:!0,title:"Create New",visible:n,onCancel:t,footer:[(0,r.jsx)(a.zx,{type:"primary",onClick:l,children:"Submit"},"submit")],children:o})};var H=D,E=t(79216);function N(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function A(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var V=t(89616).Z.Search,U=function(e){var n=e.onSearch,t=A(e,["onSearch"]);return(0,r.jsx)(V,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){N(e,n,t[n])}))}return e}({allowClear:!0,onSearch:n},t))};function L(e,n,t,r,a,l,o){try{var i=e[l](o),s=i.value}catch(u){return void t(u)}i.done?n(s):Promise.resolve(s).then(r,a)}function Y(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var l=e.apply(n,t);function o(e){L(l,r,a,o,i,"next",e)}function i(e){L(l,r,a,o,i,"throw",e)}o(void 0)}))}}var F=function(e){return Y(m().mark((function n(t,r){var a,l;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t({type:p.LM}),a=JSON.parse(localStorage.getItem("userToken")),n.next=5,(0,f.SD)("admin/list/",a.token,e);case 5:return l=n.sent,n.next=8,l.json();case 8:l=n.sent,t({type:p.fg,result:l}),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),t({type:p.uy,result:n.t0});case 15:case"end":return n.stop()}}),n,null,[[0,12]])})))};function R(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Z(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){R(e,n,t[n])}))}return e}var M=function(e){var n=e.type,t=e.name,l=e.label,o=e.value,i=e.onChange,s=e.defaultValue;return(0,r.jsxs)(a.l0.Item,{labelCol:{span:24},name:t,label:(0,r.jsxs)("span",{style:{textTransform:"capitalize",fontWeight:500},children:[l,":"]}),children:["text"==n&&(0,r.jsx)(a.II,{style:{width:"100%"},placeholder:l,value:o,onChange:i}),"address"==n&&(0,r.jsx)(a.II,{type:"textarea",style:{width:"100%"},placeholder:l,autoSize:{minRows:4,maxRows:4},value:o,defaultValue:s,onChange:i}),"phone"==n&&(0,r.jsx)(a.II,{type:"number",style:{width:"100%"},placeholder:l,defaultValue:s,value:o,onChange:i}),"date"==n&&(0,r.jsx)(a.Mt,{locale:"id_ID",value:o,defaultValue:s,placeholder:l,name:t,onChange:i}),"status"==n&&(0,r.jsx)(a.Ph,{defaultValue:s,value:o,onChange:i,placeholder:l,options:[{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"TRIAL",label:"Trial"}]}),"upload"==n&&(0,r.jsx)(c(),{id:t,multiple:!1,onDone:i})]})},W={width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",rowGap:"6px"},B={position:"relative",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"85px",width:"85px"},K=function(){var e=(0,l.I0)(),n=(0,l.v9)((function(e){return e.adminCompany})).adminListCompany,t=(0,o.useState)({order:"ASC",order_by:"company",types:"company",current:0,pageSize:10}),i=t[0],u=t[1],c=(0,o.useState)(!1),d=c[0],m=c[1],p=(0,o.useState)(!1),h=p[0],x=p[1],y=(0,o.useState)(!1),g=y[0],v=y[1],j=(0,o.useState)({}),b=j[0],w=j[1],_=(0,o.useState)({}),C=_[0],O=_[1],k=(0,o.useState)(""),P=(k[0],k[1],(0,o.useState)({data:n.result.data})),T=P[0],z=P[1];(0,o.useEffect)((function(){n.loaded||e(F(Z({},i,{page:i.current+1,max_size:i.pageSize})))}),[]),(0,o.useEffect)((function(){z({data:n.result.data})}),[n.result]);var X=function(e){var n;(n={id:e.id,types:i.types},new Promise((function(e,t){var r=JSON.parse(localStorage.getItem("userToken"));return(0,f.SD)("admin/detail/",r.token,n).then((function(n){return e(n)}))}))).then((function(e){return e.json()})).then((function(n){n.data.map((function(n){O(Z({},n,{total_keyword:e.total_keyword}))})),x(!0)})).catch((function(e){}))},J=function(n){var t,r={id:n.id};console.log(r),(t=r,new Promise((function(e,n){var r=JSON.parse(localStorage.getItem("userToken"));return(0,f.SD)("admin/company/delete/",r.token,t).then((function(n){return e(n)}))}))).then((function(e){return e.json()})).then((function(n){a.yw.info(n.message),e(F(Z({},i,{page:i.current+1,max_size:i.pageSize})))})).catch((function(e){return e}))};return(0,r.jsxs)(a.X2,{children:[(0,r.jsx)(a.JX,{span:24,children:(0,r.jsxs)(a.X2,{children:[(0,r.jsx)(a.JX,{span:12,children:(0,r.jsx)(U,{placeholder:"search company",onSearch:function(e){var t=n.result.data.filter((function(n){var t=n.company_name;return(t=t.toLowerCase()).includes(e)}));z({data:t}),console.log(t)}})}),(0,r.jsx)(a.JX,{children:(0,r.jsx)(a.zx,{type:"dashed",icons:"PlusCircleOutlined",onClick:function(){return m(!0)},children:"Create"})})]})}),(0,r.jsx)(a.JX,{span:24,children:(0,r.jsx)(I,{tables:{data:null===T||void 0===T?void 0:T.data,rowKey:function(e){return e.id},pagination:{showSizeChanger:!0,defaultCurrent:i.current+1,defaultPageSize:i.pageSize,total:n.result.total_user,showTotal:function(e){return"Total ".concat(e," items")},onChange:function(n,t){u(Z({},i,{current:n-1,pageSize:t})),e(F(Z({},i,{page:i.current,max_size:i.pageSize})))}},column:[{title:"User List",render:function(e){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.TH,{title:"company",ellipsis:!0,content:e.company_name}),(0,r.jsx)(a.TH,{title:"expired",content:e.expired}),(0,r.jsx)(a.TH,{title:"keyword",content:"".concat(e.total_keyword,"\n/\n").concat(0==e.limit_keyword?"unlimited":null==e.limit_keyword?"-":e.limit_keyword)}),(0,r.jsx)(a.TH,{title:"status",content:e.status}),(0,r.jsxs)(a.TH,{title:"action",type:"action",children:[(0,r.jsx)(a.zx,{size:"small",icons:"EditOutlined",onClick:function(){return console.log()}}),(0,r.jsx)(a.gn,{title:"Are you sure to delete this?",onConfirm:function(){return J(e)},onCancel:function(){console.log("cancel delete")},children:(0,r.jsx)(a.zx,{size:"small",icons:"DeleteOutlined",type:"dashed",danger:"true"})})]})]})},responsive:["xs"]},{title:"Expired",dataIndex:"expired",width:120,responsive:["md"],defaultSortOrder:"descend",sortDirections:["descend","ascend"],sorter:function(e,n){return e.expired.localeCompare(n.expired)}},{title:"Company",dataIndex:"company_name",responsive:["md"],sorter:function(e,n){return e.company_name.localeCompare(n.company_name)},defaultSortOrder:"ascend",sortDirections:["descend","ascend"]},{title:"Status",dataIndex:"status",width:130,responsive:["md"],defaultSortOrder:"ascend",sortDirections:["descend","ascend"],sorter:function(e,n){return e.status.localeCompare(n.status)},render:function(e){return e}},{title:(0,r.jsx)(a.u,{title:"total keyword / limit keyword",placement:"top",children:"Keyword"}),dataIndex:"total_keyword",width:130,responsive:["md"],render:function(e,n){return(0,r.jsxs)(r.Fragment,{children:[e,"\n/\n",0==n.limit_keyword?"unlimited":null==n.limit_keyword?"-":n.limit_keyword]})}},{title:"Action",key:"action",width:90,align:"center",responsive:["md"],render:function(e,n){return(0,r.jsxs)(a.TH,{type:"action",children:[(0,r.jsx)(a.u,{title:"detail user",placement:"left",children:(0,r.jsx)(a.zx,{size:"small",icons:"EditOutlined",onClick:function(){return X(n)}})}),(0,r.jsx)(a.gn,{title:"Are you sure to delete this?",onConfirm:function(){return J(n)},onCancel:function(){console.log("cancel delete")},children:(0,r.jsx)(a.zx,{size:"small",icons:"DeleteOutlined",type:"dashed",danger:"true"})})]})}}]}})}),(0,r.jsx)(H.Create,{isOpen:d,submit:function(){var n,t={status:b.status,name:b.name,address:b.address,phone:b.phone,contact:b.contact_person,expired:b.expired_date,email:b.email,limit_keyword:b.limit_keyword,icon:b.icon};(n=t,new Promise((function(e,t){var r=JSON.parse(localStorage.getItem("userToken"));return(0,f.SD)("admin/company/create/",r.token,n).then((function(n){return e(n)}))}))).then((function(e){return e.json()})).then((function(n){m(!1),w({}),a.yw.info(n.message),e(F(Z({},i,{page:i.current+1,max_size:i.pageSize})))})).catch((function(e){return e}))},onClose:function(){m(!1),w({})},children:(0,r.jsxs)(a.X2,{gutter:[12,0],justify:"center",children:[(0,r.jsx)(a.JX,{span:24,children:(0,r.jsx)(M,{type:"text",label:"company name",name:"name",value:b.name,onChange:function(e){w(Z({},b,{name:e.target.value}))}})}),(0,r.jsxs)(a.JX,{xs:24,sm:24,md:12,lg:12,children:[(0,r.jsx)(M,{type:"text",label:"contact person",name:"contact_person",value:b.contact_person,onChange:function(e){w(Z({},b,{contact_person:e.target.value}))}}),(0,r.jsx)(M,{type:"phone",label:"phone",name:"phone",defaultValue:b.phone,onChange:function(e){w(Z({},b,{phone:e.target.value}))}}),(0,r.jsx)(M,{type:"text",label:"email",name:"email",value:b.email,onChange:function(e){w(Z({},b,{email:e.target.value}))}})]}),(0,r.jsxs)(a.JX,{xs:24,sm:24,md:12,lg:12,children:[(0,r.jsx)(M,{type:"date",label:"expired",name:"expired_date",defaultValue:b.expired_date,placeholder:"expired date",onChange:function(e){w(Z({},b,{expired_date:e.format("YYYY-MM-DD")}))}}),(0,r.jsx)(M,{type:"status",label:"status",name:"status",value:b.status,onChange:function(e){w(Z({},b,{status:e}))}}),(0,r.jsx)(M,{type:"phone",label:"limit keyword",name:"limit_keyword",value:b.limit_keyword,onChange:function(e){w(Z({},b,{limit_keyword:e.target.value}))}})]}),(0,r.jsxs)(a.JX,{span:24,children:[(0,r.jsx)(M,{type:"upload",label:"logo",name:"logo",onChange:function(e){w(Z({},b,{icon:[{filename:e.name,base64:e.base64}]}))}}),(0,r.jsx)(M,{type:"address",label:"address",name:"address",value:b.address,onChange:function(e){w(Z({},b,{address:e.target.value}))}})]})]})}),(0,r.jsx)(H,{title:"Detail\n".concat(C.comp_name),isOpen:h,onClose:function(){x(!1),v(!1)},submitDisable:0==g,submit:function(){var n,t={id:C.comp_id,status:C.status,name:C.comp_name,address:C.address,phone:C.phone,contact:C.contact_person,expired:C.expired,email:C.email,limit_keyword:C.limit_keyword,icon:[{filename:void 0,base64:void 0}]};C.filename&&(t={id:C.comp_id,status:C.status,name:C.comp_name,address:C.address,phone:C.phone,contact:C.contact_person,expired:C.expired,email:C.email,limit_keyword:C.limit_keyword,icon:[{filename:C.filename,base64:C.base64}]}),console.log(t),(n=t,new Promise((function(e,t){var r=JSON.parse(localStorage.getItem("userToken"));return(0,f.SD)("admin/company/update/",r.token,n).then((function(n){return e(n)}))}))).then((function(e){return e.json()})).then((function(n){a.yw.info(n.message),x(!1),v(!1),e(F(Z({},i,{page:i.current+1,max_size:i.pageSize})))})).catch((function(e){return e}))},children:(0,r.jsx)(a.l0,{children:(0,r.jsxs)(a.X2,{gutter:[12,12],align:"middle",justify:"center",children:[(0,r.jsx)(a.JX,{children:(0,r.jsxs)("div",{style:W,children:[(0,r.jsx)("div",{style:B,children:(0,r.jsx)(E.Z,{style:{position:"relative",width:"100%",height:"auto"},preview:!1,src:C.company_logo?"https://api.digivla.id/media/".concat(C.company_logo):null,alt:""})}),(0,r.jsx)("span",{style:{fontWeight:500},children:"ID:\n".concat(C.comp_id)})]})}),(0,r.jsxs)(a.JX,{span:24,children:[(0,r.jsx)(S.Z,{children:(0,r.jsxs)("label",{style:{fontWeight:500,textTransform:"capitalize"},children:[g?"Update":"Detail"," Company"]})}),g?(0,r.jsxs)(a.X2,{gutter:[12,0],justify:"center",children:[(0,r.jsx)(a.JX,{span:24,children:(0,r.jsx)(M,{type:"text",label:"company name",name:"comp_name",value:C.comp_name,onChange:function(e){O(Z({},C,{comp_name:e.target.value}))}})}),(0,r.jsxs)(a.JX,{xs:24,sm:24,md:12,lg:12,children:[(0,r.jsx)(M,{type:"text",label:"contact person",name:"contact_person",value:C.contact_person,onChange:function(e){O(Z({},C,{contact_person:e.target.value}))}}),(0,r.jsx)(M,{type:"phone",label:"phone",name:"phone",defaultValue:C.phone,onChange:function(e){O(Z({},C,{phone:e.target.value}))}}),(0,r.jsx)(M,{type:"text",label:"email",name:"email",value:C.email,onChange:function(e){O(Z({},C,{email:e.target.value}))}})]}),(0,r.jsxs)(a.JX,{xs:24,sm:24,md:12,lg:12,children:[(0,r.jsx)(M,{type:"date",label:"expired",name:"expired",defaultValue:s()(C.expired),onChange:function(e){O(Z({},C,{expired:e.format("YYYY-MM-DD")}))}}),(0,r.jsx)(M,{type:"status",label:"status",name:"status",defaultValue:C.status,onChange:function(e){O(Z({},C,{status:e}))}}),(0,r.jsx)(M,{type:"phone",label:"limit keyword",name:"limit_keyword",defaultValue:C.limit_keyword,onChange:function(e){O(Z({},C,{limit_keyword:e.target.value}))}})]}),(0,r.jsxs)(a.JX,{span:24,children:[(0,r.jsx)(M,{type:"upload",label:"logo",name:"logo",onChange:function(e){var n;O(Z({},C,{filename:(n=e).name,base64:n.base64}))}}),(0,r.jsx)(M,{type:"address",label:"address",name:"address",defaultValue:C.address,onChange:function(e){O(Z({},C,{address:e.target.value}))}})]})]}):(0,r.jsx)(a.JX,{span:24,children:(0,r.jsxs)(a.X2,{gutter:[12,0],children:[(0,r.jsxs)(a.JX,{xs:24,sm:24,md:12,lg:12,children:[(0,r.jsx)(a.TH,{title:"contact person",content:C.contact_person}),(0,r.jsx)(a.TH,{title:"phone",content:C.phone}),(0,r.jsx)(a.TH,{title:"email",content:C.email})]}),(0,r.jsxs)(a.JX,{xs:24,sm:24,md:12,lg:12,children:[(0,r.jsx)(a.TH,{title:"registration",content:C.registration_date}),(0,r.jsx)(a.TH,{title:"expired",content:C.expired}),(0,r.jsx)(a.TH,{title:"status",content:C.status})]}),(0,r.jsx)(a.JX,{xs:24,sm:24,md:12,lg:12,children:(0,r.jsx)(a.TH,{title:"keyword",content:"".concat(C.total_keyword,"\n/\n").concat(0==C.limit_keyword?"unlimited":C.limit_keyword)})}),(0,r.jsx)(a.JX,{xs:24,sm:24,md:12,lg:12,children:(0,r.jsx)(a.TH,{title:"created by",content:null==C.created_by?"-":C.created_by})}),(0,r.jsx)(a.JX,{span:24,children:(0,r.jsx)(a.TH,{title:"address",ellipsis:!0,content:C.address})})]})})]}),(0,r.jsx)(a.JX,{span:8,children:(0,r.jsx)(a.zx,{type:"dashed",block:!0,onClick:function(){return v(!g)},children:g?"Detail":"Update"})})]})})})]})},G=t(3550);function $(e,n,t,r,a,l,o){try{var i=e[l](o),s=i.value}catch(u){return void t(u)}i.done?n(s):Promise.resolve(s).then(r,a)}var q=function(e){return n=m().mark((function n(t,r){var a,l;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t({type:G.nb}),a=JSON.parse(localStorage.getItem("userToken")),n.next=5,(0,f.Be)("admin/menu/list/",a.token,e);case 5:return l=n.sent,n.next=8,l.json();case 8:l=n.sent,t({type:G.dx,result:l}),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),t({type:G.rV,result:n.t0});case 15:case"end":return n.stop()}}),n,null,[[0,12]])})),function(){var e=this,t=arguments;return new Promise((function(r,a){var l=n.apply(e,t);function o(e){$(l,r,a,o,i,"next",e)}function i(e){$(l,r,a,o,i,"throw",e)}o(void 0)}))};var n};function Q(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ee(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){Q(e,n,t[n])}))}return e}var ne={order:"ASC",order_by:"company",types:"user"},te=function(e){var n=e.type,t=e.name,l=e.label,o=e.value,i=e.defaultValue,s=e.onChange,u=e.selectAll,c=e.group;return(0,r.jsxs)(a.l0.Item,{labelCol:{span:24},name:t,label:(0,r.jsxs)("span",{style:{textTransform:"capitalize",fontWeight:500},children:[l,":"]}),children:["text"==n&&(0,r.jsx)(a.II,{style:{width:"100%"},placeholder:l,value:o,onChange:s}),"password"==n&&(0,r.jsx)(a.II,{type:"password",style:{width:"100%"},placeholder:"password",value:o,onChange:s}),"company"==n&&(0,r.jsx)(b,{style:{width:"100%"},placeholder:l,defaultValue:i,value:o,onChange:s}),"level"==n&&(0,r.jsx)(O,{placeholder:l,defaultValue:i,value:o,onChange:s}),"access"==n&&(0,r.jsx)(T,{selectAll:u,group:c})]})},re=function(){var e,n,t,i,s=(0,l.I0)(),u=(0,l.v9)((function(e){return e.adminReducers})),c=(0,l.v9)((function(e){return e.menuReducers})),d=u.adminListUser,m=c.menuList,p=(0,o.useState)(!0),h=p[0],x=p[1],g=(0,o.useState)(!1),v=g[0],j=g[1],b=(0,o.useState)({}),w=b[0],_=b[1],C=(0,o.useState)(!1),k=C[0],P=C[1],T=(0,o.useState)(!1),z=T[0],X=T[1],J=(0,o.useState)({}),D=J[0],E=J[1],N=(0,o.useState)({current:0,pageSize:10}),A=N[0],V=N[1],U=(0,o.useState)(ee({},ne)),L=U[0];U[1];(0,o.useEffect)((function(){d.loaded||s(y(ee({},L,{page:A.current+1,max_size:A.pageSize})))}),[]);var Y=function(e){var n;X(!0),(n={id:e,types:"user"},new Promise((function(e,t){var r=JSON.parse(localStorage.getItem("userToken"));return(0,f.SD)("admin/detail/",r.token,n).then((function(n){return e(n)}))}))).then((function(e){return e.json()})).then((function(n){var t={},r=[];n.data.map((function(e){t=e,e.list_menu.forEach((function(e){r.push(e)}))})),E({id:e,full_name:t.full_name,email:t.email,username:t.username,company:t.company,company_id:t.company_id,level_menu:t.level,list_menu:r})})).catch((function(e){}))},F=function(e){var n,t={id:e.id,username:e.usrname};(n=t,new Promise((function(e,t){var r=JSON.parse(localStorage.getItem("userToken"));return(0,f.SD)("admin/user/delete/",r.token,n).then((function(n){return e(n)}))}))).then((function(e){return e.json()})).then((function(e){a.t6.info({message:e.message}),s(y(ee({},L,{page:A.current,max_size:A.pageSize})))})).catch((function(e){}))};return(0,r.jsxs)(a.X2,{children:[(0,r.jsx)(a.JX,{children:(0,r.jsx)(a.zx,{icons:"PlusCircleOutlined",onClick:function(){j(!0),s(q())},children:"Create"})}),(0,r.jsx)(a.JX,{span:24,children:(0,r.jsx)(I.User,{tables:{data:d.result.data,rowKey:function(e){return e.id},pagination:{defaultCurrent:A.current+1,defaultPageSize:A.pageSize,total:d.result.total_user,showTotal:function(e){return"Total ".concat(e," items")},onChange:function(e,n){s(y(ee({},L,{page:e-1,max_size:n}))),V(ee({},A,{current:e-1,pageSize:n}))}},column:[{title:"User List",render:function(e){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.TH,{title:"company",ellipsis:!0,content:e.company}),(0,r.jsx)(a.TH,{title:"Name",content:e.name}),(0,r.jsx)(a.TH,{title:"username",content:e.usrname}),(0,r.jsx)(a.TH,{title:"level",content:e.level}),(0,r.jsxs)(a.TH,{title:"action",type:"action",children:[(0,r.jsx)(a.zx,{size:"small",icons:"EditOutlined",onClick:function(){return Y(e.id)}}),(0,r.jsx)(a.gn,{title:"Are you sure to delete this?",onConfirm:function(){return F(e)},onCancel:function(){console.log("cancel delete")},children:(0,r.jsx)(a.zx,{size:"small",icons:"DeleteOutlined",type:"dashed",danger:"true"})})]})]})},responsive:["xs"]},{title:"Name",dataIndex:"name",width:200,responsive:["md"],defaultSortOrder:"descend",sortDirections:["descend","ascend"],sorter:function(e,n){return e.name.localeCompare(n.name)}},{title:"Username",dataIndex:"usrname",width:200,responsive:["md"],sorter:function(e,n){return e.usrname.localeCompare(n.usrname)},defaultSortOrder:"ascend",sortDirections:["descend","ascend"]},{title:"Company",dataIndex:"company",responsive:["md"],sorter:function(e,n){return e.company.localeCompare(n.company)}},{title:"Level",dataIndex:"level",width:120,responsive:["md"],render:function(e){return(0,r.jsx)(a.Vp,{style:{width:"100%",textAlign:"center"},children:e})}},{title:"Action",key:"action",width:90,align:"center",responsive:["md"],render:function(e,n){return(0,r.jsxs)(a.TH,{type:"action",children:[(0,r.jsx)(a.u,{title:"detail user",placement:"left",children:(0,r.jsx)(a.zx,{size:"small",icons:"EditOutlined",onClick:function(){return Y(n.id)}})}),(0,r.jsx)(a.gn,{title:"Are you sure to delete this?",onConfirm:function(){return F(n)},onCancel:function(){console.log("cancel delete")},children:(0,r.jsx)(a.zx,{size:"small",icons:"DeleteOutlined",type:"dashed",danger:"true"})})]})}}]}})}),(0,r.jsx)(H.Create,{isOpen:v,submit:function(){var e,n={full_name:w.full_name,company:w.company,email:w.email,username:w.username,password:w.password,level_menu:w.level_menu,menu:w.menu?w.menu:[]};(e=n,new Promise((function(n,t){var r=JSON.parse(localStorage.getItem("userToken"));return(0,f.SD)("admin/user/create/",r.token,e).then((function(e){return n(e)}))}))).then((function(e){return e.json()})).then((function(e){console.log(e),j(!1),a.t6.info({message:e.message}),s(y(ee({},L,{page:A.current,max_size:A.pageSize})))})).catch((function(e){}))},onClose:function(){j(!1),_({})},children:(0,r.jsx)(a.l0,{children:(0,r.jsxs)(a.X2,{gutter:[12,0],align:"middle",justify:"center",children:[(0,r.jsxs)(a.JX,{span:24,children:[(0,r.jsx)(te,{type:"company",label:"company",value:w.company,onChange:function(e){return _(ee({},w,{company:e}))}}),(0,r.jsx)(te,{type:"text",label:"email",value:w.email,onChange:function(e){return _(ee({},w,{email:e.target.value}))}})]}),(0,r.jsxs)(a.JX,{xs:24,sm:24,md:12,lg:12,children:[(0,r.jsx)(te,{type:"text",label:"Name",value:w.full_name,onChange:function(e){return _(ee({},w,{full_name:e.target.value}))}}),(0,r.jsx)(te,{type:"level",label:"User Level",value:w.level_menu,onChange:function(e){_(ee({},w,{level_menu:e}))}})]}),(0,r.jsxs)(a.JX,{xs:24,sm:24,md:12,lg:12,children:[(0,r.jsx)(te,{type:"text",label:"Username",value:w.username,onChange:function(e){return _(ee({},w,{username:e.target.value}))}}),(0,r.jsx)(te,{type:"password",label:"password",value:w.password,onChange:function(e){return _(ee({},w,{password:e.target.value}))}})]}),(0,r.jsx)(a.JX,{span:24,children:(0,r.jsx)(te,{type:"access",label:"access menu",selectAll:{disabled:4!=w.level_menu,indeterminate:h,label:"Select All",checked:(null===(e=w.menu)||void 0===e?void 0:e.length)==(null===(n=m.result.data)||void 0===n?void 0:n.length),onChange:function(e){x(!1),e.target.checked?_(ee({},w,{menu:m.result.data.map((function(e){return e}))})):_(ee({},w,{menu:[]}))}},group:{disabled:4!=w.level_menu,value:w.menu,options:m.result.data?m.result.data.map((function(e){return{value:e,label:e}})):[],onChange:function(e){_(ee({},w,{menu:e}))}}})})]})})}),(0,r.jsx)(H,{title:"Detail ".concat(D.full_name),isOpen:z,onClose:function(){X(!1),P(!1)},submit:function(){var e,n={id:D.id,full_name:D.full_name,password:D.password,email:D.email,username:D.username,level_menu:D.level_menu,menu:D.list_menu};null==n.password&&(n={id:D.id,full_name:D.full_name,email:D.email,username:D.username,level_menu:D.level_menu,menu:D.list_menu}),(e=n,new Promise((function(n,t){var r=JSON.parse(localStorage.getItem("userToken"));return(0,f.SD)("admin/user/update/",r.token,e).then((function(e){return n(e)}))}))).then((function(e){return e.json()})).then((function(e){X(!1),a.t6.info({message:e.message}),s(y(ee({},L,{page:A.current,max_size:A.pageSize})))})).catch((function(e){}))},submitDisable:0==k,children:(0,r.jsx)(a.l0,{children:(0,r.jsxs)(a.X2,{children:[(0,r.jsx)(a.JX,{span:24,children:(0,r.jsxs)(a.X2,{gutter:[12,0],children:[(0,r.jsx)(a.JX,{span:24,children:(0,r.jsx)(a.TH,{title:"company",content:D.company})}),(0,r.jsxs)(a.JX,{xs:24,sm:24,md:12,lg:12,children:[(0,r.jsx)(a.TH,{title:"Name",content:D.full_name}),(0,r.jsx)(a.TH,{title:"level",content:O.Tag(D.level_menu)})]}),(0,r.jsxs)(a.JX,{xs:24,sm:24,md:12,lg:12,children:[(0,r.jsx)(a.TH,{title:"username",content:D.username}),(0,r.jsx)(a.TH,{title:"email",content:D.email})]})]})}),(0,r.jsx)(a.JX,{span:24,children:(0,r.jsx)(a.zx,{block:!0,type:"dashed",onClick:function(){P(!k),s(q())},children:k?"Close":"Update"})}),1==k?(0,r.jsx)(a.JX,{span:24,children:(0,r.jsx)(a.TH,{ellipsis:!0,style:{border:"1px dashed red",borderRadius:4,padding:10},content:(0,r.jsxs)(a.X2,{gutter:[12,0],align:"middle",justify:"center",children:[(0,r.jsx)(S.Z,{children:(0,r.jsx)("label",{style:{fontWeight:500,textTransform:"capitalize"},children:"Update Form"})}),(0,r.jsx)(a.JX,{span:24,children:(0,r.jsx)(te,{type:"text",label:"email",value:D.email,onChange:function(e){return E(ee({},D,{email:e.target.value}))}})}),(0,r.jsxs)(a.JX,{xs:24,sm:24,md:12,lg:12,children:[(0,r.jsx)(te,{type:"text",label:"Name",value:D.full_name,onChange:function(e){return E(ee({},D,{full_name:e.target.value}))}}),(0,r.jsx)(te,{type:"level",label:"User Level",defaultValue:D.level_menu,onChange:function(e){E(ee({},D,{level_menu:e}))}})]}),(0,r.jsxs)(a.JX,{xs:24,sm:24,md:12,lg:12,children:[(0,r.jsx)(te,{type:"text",label:"Username",value:D.username,onChange:function(e){return E(ee({},D,{username:e.target.value}))}}),(0,r.jsx)(te,{type:"password",label:"password",value:D.password,onChange:function(e){return E(ee({},D,{password:e.target.value}))}})]}),(0,r.jsx)(a.JX,{span:24,children:(0,r.jsx)(te,{type:"access",label:"access menu",selectAll:{disabled:4!=D.level_menu,indeterminate:h,label:"Select All",checked:(null===(t=D.list_menu)||void 0===t?void 0:t.length)==(null===(i=m.result.data)||void 0===i?void 0:i.length),onChange:function(e){x(!1),e.target.checked?E(ee({},D,{list_menu:m.result.data.map((function(e){return e}))})):E(ee({},D,{list_menu:D.list_menu.map((function(e){return e}))}))}},group:{disabled:4!=D.level_menu,value:D.list_menu,options:m.result.data?m.result.data.map((function(e){return{value:e,label:e}})):[],onChange:function(e){x(!!e.length&&e.length<D.list_menu.length),E(ee({},D,{list_menu:e}))}}})})]})})}):null]})})})]})},ae=function(){return(0,r.jsx)(a.li,{style:{height:"100%"},tabPosition:"top",data:[{key:1,title:"User List",content:(0,r.jsx)(re,{})},{key:2,title:"Company List",content:(0,r.jsx)(K,{})}]})}}},function(e){e.O(0,[495,23,774,888,179],(function(){return n=65469,e(e.s=n);var n}));var n=e.O();_N_E=n}]);