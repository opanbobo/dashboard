(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[865],{6621:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/command",function(){return a(65798)}])},65798:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return U}});var n=a(26042),r=a(69396),i=a(29815),s=a(85893),o=a(67294),c=a(48513),l=a(5152),d=a.n(l),u=function(e){return{children:e.children}},m=a(18598),p=a.n(m),h=a(80052),g=a.n(h),f=a(78539),x=a(51518),_=a(66938),v=a(86706),j=a(43109),y=a(60011),Z=a(66876),b=a(34058),w=a(98361),S=(a(68822),a(46097)),k=(a(99883),a(99534)),N=a(73939),z=a(25617),T=a(47568),C=a(97582),X=a(24923),F=a(74034),J=(a(49552),function(e){return function(){var t=(0,T.Z)((function(t,a){var n,r,i;return(0,C.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),t({type:X.MZ}),n=JSON.parse(localStorage.getItem("userToken")),[4,(0,F.mD)("dashboard/wordcloud",n.token,e)];case 1:return[4,(r=a.sent()).json()];case 2:return r=a.sent(),t({type:X.XX,result:r}),[3,4];case 3:return i=a.sent(),t({type:X.w4,result:i}),[3,4];case 4:return[2]}}))}));return function(e,a){return t.apply(this,arguments)}}()}),L=function(e){return function(){var t=(0,T.Z)((function(t,a){var n,r,i;return(0,C.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),t({type:X.CD}),n=JSON.parse(localStorage.getItem("userToken")),[4,(0,F.SD)("dashboard/media-count/articles",n.token,e)];case 1:return[4,(r=a.sent()).json()];case 2:return r=a.sent(),t({type:X.cH,result:r}),[3,4];case 3:return i=a.sent(),t({type:X.M6,result:i}),[3,4];case 4:return[2]}}))}));return function(e,a){return t.apply(this,arguments)}}()},P=function(e){var t=e.className,a=e.data,i=(0,k.Z)(e,["className","data"]),c=(0,z.I0)(),l=(0,z.v9)((function(e){return e.summary})).medCountArticle,d=(0,o.useState)({}),u=d[0],m=d[1],p=(0,o.useState)(!1),h=p[0],f=p[1],x=function(){return(0,s.jsx)(N.Z,{modal:{title:"Article List (".concat(u.name,")"),visible:h&&!l.loading,closable:!0,onCancel:function(){f(!1),m({})}},onLoading:l.loading,data:l.result.data?l.result.data.data.map((function(e){return{id:e.article_id,title:e.title,content:e.content,detail:e}})):[],pagination:{showSizeChanger:!0,total:l.result.data?l.result.data.recordsTotal:0,showTotal:function(e){return"Total ".concat(e," data")},defaultPageSize:u.size,defaultCurrent:u.page+1,onChange:function(e,t){c(L({size:t,page:e-1,article_ids:u.article_ids})),m((0,r.Z)((0,n.Z)({},u),{page:e-1,size:t}))}}})};return(0,s.jsxs)(S.Zb,(0,r.Z)((0,n.Z)({className:t},i),{children:[(0,s.jsxs)("div",{className:g()["media-list-wrapper"],children:[a.map((function(e,t){if("Radio"!==e.label)return(0,s.jsxs)("div",{className:g()["list-item"],onClick:function(){m({name:e.label,page:0,size:10,article_ids:e.article_ids}),c(L({size:10,page:0,article_ids:e.article_ids})),f(!0)},children:[(0,s.jsx)("div",{className:g()["item-total"],children:e.total}),(0,s.jsx)("div",{className:g()["item-label"],children:e.label})]},t)})),i.children]}),(0,s.jsx)(x,{})]}))},M=function(e){var t=e.className,a=e.charts,r=(0,k.Z)(e,["className","charts"]);return(0,s.jsx)(S._W,(0,n.Z)({id:"mediaTone",type:"bar",className:t},a,r))},O=a(93883),D=a(69412),I=a(84865),E=a(87661),H=a(4792),Y=a(36093),A=a(58497),G=a(58742),B=(d()((function(){return Promise.all([a.e(898),a.e(414),a.e(688)]).then(a.bind(a,2688))}),{loadableGenerated:{webpack:function(){return[2688]}},ssr:!1}),d()((function(){return Promise.all([a.e(898),a.e(308)]).then(a.bind(a,23308))}),{loadableGenerated:{webpack:function(){return[23308]}},ssr:!1})),V={1023:" (max-width: 1023px)",1024:"(max-width: 1024px)"},R=function(){var e,t=(0,z.I0)(),a=(0,o.useState)(),l=a[0],d=a[1],u=(0,z.v9)((function(e){return e.geo})),m=(0,z.v9)((function(e){return e.summary})),h=(0,z.v9)((function(e){return e.analytic})),k=(0,z.v9)((function(e){return e.filter})),T=(0,z.v9)((function(e){return e.spokeperson})),C=(0,z.v9)((function(e){return e.issues})),X=(u.geo,u.geoList),L=m.wordCloud,R=k.filter,U=(T.spokepersonStatistic,T.spokepersonStatisticClick),q=T.spokepersonDetail,K=(C.issueTop,h.ews),W=h.coverageTonality,Q=h.toneMedia,$=h.article,ee=(h.articlePositive,h.articleNegative,h.articleNeutral,h.mediaListCount),te=(0,o.useState)(!1),ae=te[0],ne=te[1],re=(0,o.useState)({}),ie=re[0],se=re[1],oe=(0,o.useState)(!1),ce=oe[0],le=oe[1],de=(0,o.useState)(!1),ue=de[0],me=de[1],pe=(0,o.useState)(""),he=pe[0],ge=pe[1],fe=(0,o.useState)({page:0,max_size:10}),xe=fe[0],_e=fe[1],ve=(0,o.useState)({}),je=ve[0],ye=ve[1],Ze=(0,o.useState)([]),be=(Ze[0],Ze[1]),we=(0,o.useState)(!1),Se=(we[0],we[1]),ke=(0,o.useState)(!1),Ne=(ke[0],ke[1]),ze=(0,o.useState)("");ze[0],ze[1],f.Z,f.Z,f.Z,x.Z,_.Z,v.Z,j.Z,y.Z,Z.Z,b.Z,w.Z;(0,o.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userToken"));(0,D.yZ)({client_id:e.client_id}).then((function(e){return e.json()})).then((function(e){"registered"==e.message&&(Se(!0),t((0,D.Vp)((0,n.Z)({type_location:"article"},R.result)))),Ne(!0)})).catch((function(e){return console.log(e)})),t(J((0,r.Z)((0,n.Z)({},R.result),{total_word:40}))),t((0,I.R9)(R.result)),t((0,I.kI)(R.result)),t((0,I.GL)(R.result)),t((0,E.rG)((0,r.Z)((0,n.Z)({},R.result),{limit:10,page:0}))),t((0,I.uP)(R.result)),t((0,Y.c)((0,r.Z)((0,n.Z)({},R.result),{limit:5})))}),[R]),(0,o.useEffect)((function(){(0,c.Z)(V,d)}),[l]);var Te=function(e){"media"==e.type?(t((0,I.yU)((0,r.Z)((0,n.Z)({},R.result),{maxSize:e.maxSize,page:e.page,media_id:Q.result.data[e.data.x].media_id,tone:"".concat(e.data.y-1)}))),se((0,r.Z)((0,n.Z)({},e),{desc:{Media:Q.result.data[e.data.x].media_name,Tone:e.data.y-1==1?"Positive":e.data.y-1==-1?"Negative":"Neutral"}}))):"ews"==e.type?(t((0,I.yU)((0,r.Z)((0,n.Z)({},R.result),{maxSize:e.maxSize,page:e.page,category_id:K.result.series[e.data.y].name,start_date:K.result.date[e.data.x],end_date:K.result.date[e.data.x]}))),se((0,r.Z)((0,n.Z)({},e),{desc:{Category:K.result.series[e.data.y].name,Date:K.result.date[e.data.x]}}))):"geo"==e.type?(t((0,D.YH)((0,r.Z)((0,n.Z)({},R.result),{max_size:e.maxSize,page:e.page,geo_loc:e.geo_loc,type_location:"article"}))),se((0,r.Z)((0,n.Z)({},e),{desc:{Location:e.geo_loc}}))):"tone"==e.type&&(t((0,I.yU)((0,r.Z)((0,n.Z)({},R.result),{tone:"Neutral"==e.data.x?"0":"Positive"==e.data.x?"1":"-1",maxSize:e.maxSize,page:e.page,start_date:e.data.y,end_date:e.data.y}))),se((0,r.Z)((0,n.Z)({},e),{desc:{Tone:e.data.x,Date:e.data.y}}))),ne(!0)},Ce=function(e){se({}),ne(!1)},Xe=function(){var e;return(0,s.jsx)(S.dy,{title:je.influencer_name,placement:"right",visible:ue&&!q.loading,onClose:function(){me(!1),ye({})},children:(0,s.jsxs)(S.X2,{children:[(0,s.jsxs)(S.JX,{xs:24,sm:24,md:12,lg:12,xl:12,children:[(0,s.jsx)(S.TH,{title:"date:",content:je.datee}),(0,s.jsx)(S.TH,{title:"sentiment:",content:(0,s.jsx)(S.Vp,{style:{margin:0},color:"1"==je.tone?"success":"-1"==je.tone?"error":"processing",children:1==je.tone?"Positive":-1==je.tone?"Negative":"Neutral"})})]}),(0,s.jsx)(S.JX,{xs:24,sm:24,md:12,lg:12,xl:12,children:(0,s.jsx)(S.TH,{title:"media:",content:"".concat(je.media)})}),(0,s.jsx)(S.JX,{span:24,children:(0,s.jsxs)(S.X2,{children:[(0,s.jsx)(S.JX,{span:24,children:(0,s.jsx)("div",{style:{overflowY:"scroll",maxHeight:300,border:"1px dashed rgba(54, 65, 76, 0.3)",padding:6,borderRadius:3},children:je.quotes})}),(0,s.jsx)(S.JX,{span:24,children:(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:null===(e=q.result.data)||void 0===e?void 0:e.content.replace(new RegExp(je.quotes,"gi"),(function(e){return'<b class="highlight-text">'.concat(e,"</b>")}))}})})]})}),(0,s.jsx)(S.JX,{span:24,children:(0,s.jsx)(S.Vp,{color:"processing",children:je.category_id})})]})})},Fe=function(){return(0,s.jsx)(N.Z,{modal:{title:"Article List ".concat(ie.desc?"("+Object.keys(ie.desc).map((function(e){return e+": "+ie.desc[e]}))+")":""),visible:ae&&!$.loading&&!X.loading,closable:!0,onCancel:Ce},onLoading:"geo"==ie.type?X.loading:$.loading,data:"geo"==ie.type?X.result.data?X.result.data.map((function(e){return{id:e.article_id,title:e.title,content:e.content,detail:e}})):[]:$.result.data?$.result.data.map((function(e){return{id:e.article_id,title:e.title,content:e.content,detail:e}})):[],pagination:{showSizeChanger:!0,total:"geo"==ie.type?X.result.recordsTotal:$.result.recordsTotal,showTotal:function(e){return"Total ".concat(e," data")},defaultPageSize:ie.maxSize?$.maxSize:$.max_size,defaultCurrent:ie.page+1,onChange:function(e,t){return Te((0,r.Z)((0,n.Z)({},ie),{page:e-1,maxSize:t}))}}})};return(0,s.jsx)("div",{className:p()["command-wrapper"],children:(0,s.jsx)("div",{className:p().toprow,children:(0,s.jsx)("div",{className:p().topcol,children:(0,s.jsxs)(S.X2,{children:[(0,s.jsxs)(S.JX,{xs:24,md:24,lg:24,xl:24,children:[(0,s.jsx)(P,{data:ee.result.data?ee.result.data.map((function(e){return e})):[],children:(0,s.jsxs)("div",{className:g()["list-item"],children:[(0,s.jsx)("div",{className:g()["item-total"],children:(null===W||void 0===W||null===(e=W.result)||void 0===e?void 0:e.data)?W.result.data.chart_bar.reduce((function(e,t){return{doc_count:e.doc_count+t.doc_count}})).doc_count:0}),(0,s.jsx)("div",{className:g()["item-label"],children:"Total Article"})]})}),(0,s.jsx)("p",{style:{marginBottom:"12px"}}),(0,s.jsx)(S.Zb,{children:(0,s.jsx)(O.default,{})}),(0,s.jsx)("p",{style:{marginBottom:"12px"}})]}),(0,s.jsx)(S.JX,{xs:24,md:24,lg:8,xl:8,children:(0,s.jsx)(S.X2,{children:(0,s.jsx)(S.JX,{span:24,children:(0,s.jsx)(S.Zb,{onLoading:L.loading,className:p()["dcc-card"],children:L.result.total_word?(0,s.jsx)(B,{className:p()["chart-word"],options:{series:[{type:"wordcloud",data:L.result.data?L.result.data.map((function(e){return{name:e.name,weight:e.weight,color:"rgba(25, 144, 255,".concat(e.weight>20?1:e.weight<=15?.3:1,")")}})):[],style:{fontFamily:"Noto Sans, sans-serif",textTransform:"capitalize",color:"white"},minFontSize:10}],chart:{backgroundColor:"#2b2d3e"}}}):(0,s.jsxs)(S.X2,{children:[(0,s.jsx)(S.JX,{children:"Please select date for backtrack:"}),(0,s.jsxs)(S.JX,{children:[(0,s.jsx)(S.Mt,{onChange:function(e){return ge(e.format("YYYY-MM-DD"))}}),(0,s.jsx)(S.zx,{onClick:function(){var e;(e={backtrack_date:he},new Promise((function(t,a){var n=JSON.parse(localStorage.getItem("userToken"));return(0,F.mD)("dashboard/wordcloud/register",n.token,e).then((function(e){return t(e)}))}))).then((function(e){return e.json()})).then((function(e){"vdadi successfully registered..."==e.message?(S.t6.success({message:"Success backtrack"}),t(J({start_date:R.result.start_date,end_date:R.result.end_date,total_word:40}))):S.t6.error({message:"Error when add backtrack date"})})).catch((function(e){return S.t6.error({message:"Error when add backtrack date"})}))},children:"Submit"})]})]})})})})}),(0,s.jsxs)(S.JX,{xs:24,md:24,lg:16,xl:16,children:[(0,s.jsx)("div",{className:p().botrow,children:(0,s.jsx)(S.X2,{children:(0,s.jsx)(S.JX,{xs:24,md:24,lg:24,xl:24,children:(0,s.jsx)(S.Zb,{onLoading:Q.loading,children:(0,s.jsx)(M,{charts:{series:Q.result.data?function(e){var t=[],a=[],n=[],r=[];return e.forEach((function(e){e.tones.forEach((function(e){e.negative>-1?t.push(e.negative):e.positive>-1?a.push(e.positive):e.neutral>-1?n.push(e.neutral):r.push(void 0==e["media favorability index"]?0:e["media favorability index"])}))})),[{name:"Negative",data:t},{name:"Neutral",data:n},{name:"Positive",data:a}]}(Q.result.data):[],chartOptions:{stacked:!0,events:{dataPointSelection:function(e,t,a){Te({type:"media",page:0,maxSize:10,order_by:"datee",order:"desc",data:{x:a.dataPointIndex,y:a.seriesIndex}})}}},options:{title:{text:"Top 10 Media",floating:!1,offsetY:5,align:"left",style:{color:"#FFFFFF"}},colors:(0,i.Z)(H.X6.colors).concat(["#A020F0"]),plotOptions:H.X6.plotOptions,xaxis:{categories:Q.result.data?Q.result.data.map((function(e){return e.media_name})):[],labels:{style:{colors:"#FFFFFF"}}},yaxis:{labels:{style:{colors:"#FFFFFF"}}},legend:{position:"top",horizontalAlign:"right",markers:{height:10,width:10,offsetY:0}},tooltip:{theme:"dark",fillSeriesColor:!1}}}})})})})}),(0,s.jsx)("p",{style:{marginBottom:"12px"}}),(0,s.jsx)(Xe,{}),(0,s.jsx)(A.Z,{chartList:ce,setChartList:le,spokepersonStatisticClick:U,dataList:xe,paginationHandler:function(e,a){t((0,E.AY)((0,r.Z)((0,n.Z)({},R.result),{page:e-1,max_size:a,tone:"all",influencer:xe.influencer_name,order:"desc"}))),_e((0,r.Z)((0,n.Z)({},xe),{page:e-1,max_size:a}))},setDataList:_e,handleClickChart:function(e){t((0,E.gG)({article_id:e.article_id})),(0,G.Mr)({article_id:e.article_id}).then((function(e){return e.json()})).then((function(t){be(t.data),ye(e),me(!0)})).catch((function(e){return console.log(e)}))}}),(0,s.jsx)(Fe,{})]})]})})})})};R.layout=function(e){return(0,s.jsx)(u,{children:e})};var U=R},36093:function(e,t,a){"use strict";a.d(t,{V:function(){return c},c:function(){return o}});var n=a(47568),r=a(97582),i=a(9926),s=a(74034),o=(a(49552),function(e){return function(){var t=(0,n.Z)((function(t,a){var n,o,c;return(0,r.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),t({type:i.mT}),n=JSON.parse(localStorage.getItem("userToken")),[4,(0,s.SD)("dashboard/top-issue",n.token,e)];case 1:return[4,(o=a.sent()).json()];case 2:return o=a.sent(),t({type:i.dO,result:o}),[3,4];case 3:return c=a.sent(),t({type:i.bO,result:c}),[3,4];case 4:return[2]}}))}));return function(e,a){return t.apply(this,arguments)}}()}),c=function(e){return new Promise((function(t,a){var n=JSON.parse(localStorage.getItem("userToken"));return(0,s._o)("issue/update/",n.token,e).then((function(e){return t(e)}))}))}},80052:function(e){e.exports={"media-list-wrapper":"commandMediaList_media-list-wrapper__mhDt0","list-item":"commandMediaList_list-item__3r5rz","item-image":"commandMediaList_item-image__S5HM9","item-label":"commandMediaList_item-label__OlT1U","item-total":"commandMediaList_item-total__po_jr"}},18598:function(e){e.exports={"command-wrapper":"command_command-wrapper__5CIGT",toprow:"command_toprow__eJBL_",topcol:"command_topcol__t2px3",leftcol:"command_leftcol__V_D1B",midcol:"command_midcol__a1_mM","chart-word":"command_chart-word__xp_YZ",rightcol:"command_rightcol__wK5eJ",botrow:"command_botrow__H_P8u"}}},function(e){e.O(0,[840,874,62,883,774,888,179],(function(){return t=6621,e(e.s=t);var t}));var t=e.O();_N_E=t}]);