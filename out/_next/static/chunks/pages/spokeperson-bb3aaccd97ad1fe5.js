(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[341],{14083:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/spokeperson",function(){return t(54168)}])},4792:function(e,n,t){"use strict";t.d(n,{$E:function(){return r},X6:function(){return o},ON:function(){return i}});var r={title:{text:"title",align:"left",offsetY:5,floating:!0,style:{fontSize:"14px",fontWeight:400,color:"#263238"}},tooltip:{shared:!1},markers:{size:6,hover:{sizeOffset:0}},stroke:{width:4,lineCap:"butt"},colors:["#06d6a0","#1990ff","#ff6b6b"],legend:{position:"bottom",horizontalAlign:"center",markers:{width:15,height:4,radius:0,offsetY:-2}}},o={chartOptions:{stacked:!0},colors:["#ff6b6b","#1990ff","#06d6a0"],title:{text:"title",align:"left",offsetY:5,floating:!0,style:{fontSize:"14px",fontWeight:400,color:"#263238"}},plotOptions:{bar:{horizontal:!0,borderRadius:6}},xaxis:{categories:["Media A","Media B","Media C","Media D"]},legend:{position:"bottom",horizontalAlign:"center",markers:{width:8,height:8,radius:2,offsetY:0}}},i={chart:{sparkline:{enabled:!0}},options:{grid:{show:!1},yaxis:{show:!0},legend:{show:!1}}}},54168:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return X}});var r=t(85893),o=function(e){var n=e.children;return(0,r.jsx)("div",{children:n})},i=t(67294),a=t(86031),u=t(13448),s=t(4792),c=t(48513);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){l(e,n,t[n])}))}return e}var d=function(e){var n=e.className,t=e.cards,o=e.charts;return(0,r.jsx)(a.Zb,f({},t,{children:(0,r.jsx)(a._W,f({className:n,type:"bar"},o))}))};function p(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){p(e,n,t[n])}))}return e}function g(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var h=function(e){var n=e.cards,t=e.tables;g(e,["cards","tables"]);return(0,r.jsx)(a.Zb,m({},n,{children:(0,r.jsx)(a.iA,m({},t))}))},x=t(58497),v=t(25617),b=t(87661),k=t(78539),S=t(51518),y=t(66938),j=t(86706),w=t(43109),O=t(60011),_=t(66876),P=t(34058),T=t(98361),I=t(68822),N=t(58742);function J(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function z(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){J(e,n,t[n])}))}return e}var D={tablet:"(min-width: 300px) and (max-width: 500px)",desktop:"(min-width: 1024px)"},E=function(){var e,n=(0,i.useState)(),t=n[0],o=n[1],l=(0,i.useState)({page:0,max_size:10}),f=l[0],p=l[1],m=(0,i.useState)({page:0,max_size:10}),g=m[0],J=m[1],E=(0,v.I0)(),X=(0,v.v9)((function(e){return e.spokeperson})),C=X.spokepersonList,H=X.spokepersonStatistic,L=X.spokepersonDetail,A=X.spokepersonStatisticClick,M=(0,v.v9)((function(e){return e.filter})).filter,B=(0,i.useState)(!0),Y=(B[0],B[1],(0,i.useState)(!1)),R=Y[0],V=Y[1],W=(0,i.useState)({}),q=W[0],G=W[1],F=(0,i.useState)(!1),K=F[0],U=F[1],$=(0,i.useState)(!1),Q=$[0],ee=$[1],ne=(0,i.useState)([]),te=(ne[0],ne[1]),re=(0,i.useState)(!1),oe=(re[0],re[1],(0,i.useState)("")),ie=(oe[0],oe[1],(0,i.useState)("")),ae=(ie[0],ie[1],(0,i.useState)(!1)),ue=(ae[0],ae[1],(0,i.useState)(!1)),se=ue[0],ce=ue[1],le=[{img:k.Z,name:"Airlangga"},{img:k.Z,name:"Menko Airlangga"},{img:k.Z,name:"Menteri Koordinator Bidang Perekonomian Airlangga Hartarto"},{img:S.Z,name:"Edwin"},{img:y.Z,name:"Erick"},{img:j.Z,name:"Haru"},{img:w.Z,name:"Jasmin"},{img:O.Z,name:"Rully"},{img:_.Z,name:"Sayed"},{img:P.Z,name:"Sunarso"},{img:T.Z,name:"Toni"}];(0,i.useEffect)((function(){(0,c.Z)(D,o)}),[t]),(0,i.useEffect)((function(){E((0,b.UV)(z({},M.result,{page:0,max_size:10}))),E((0,b.rG)(z({},M.result,{limit:10,page:0,max_size:10}))).catch((function(e){return console.log(e)}))}),[M]);var fe=function(){var e,n;return(0,r.jsx)(a.dy,{title:q.influencer_name,placement:"right",visible:K&&!L.loading,onClose:function(){U(!1),G({})},children:(0,r.jsxs)(a.X2,{children:[(0,r.jsxs)(a.JX,{xs:24,sm:24,md:12,lg:12,xl:12,children:[(0,r.jsx)(a.TH,{title:"date:",content:q.datee}),(0,r.jsx)(a.TH,{title:"sentiment:",content:(0,r.jsx)(a.Vp,{style:{margin:0},color:"1"==q.tone?"success":"-1"==q.tone?"error":"processing",children:1==q.tone?"Positive":-1==q.tone?"Negative":"Neutral"})})]}),(0,r.jsx)(a.JX,{xs:24,sm:24,md:12,lg:12,xl:12,children:(0,r.jsx)(a.TH,{title:"media:",content:"".concat(q.media)})}),(0,r.jsx)(a.JX,{span:24,children:(0,r.jsxs)(a.X2,{children:[(0,r.jsx)(a.JX,{span:24,children:(0,r.jsx)("div",{style:{overflowY:"scroll",maxHeight:300,border:"1px dashed rgba(54, 65, 76, 0.3)",padding:6,borderRadius:3},children:q.quotes})}),(0,r.jsx)(a.JX,{span:24,children:(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:null===(e=L.result.data)||void 0===e?void 0:e.content.replace(new RegExp(q.quotes,"gi"),(function(e){return'<b class="highlight-text">'.concat(e,"</b>")}))}})})]})}),(0,r.jsx)(a.JX,{span:24,children:null===(n=q.category_id)||void 0===n?void 0:n.map((function(e){return(0,r.jsx)(a.Vp,{color:"processing",children:e},e)}))})]})})},de=function(e){var n=e.data,o=e.props,i={display:"-webkit-box",maxWidth:"80%",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",textAlign:"center"};return(0,r.jsx)(r.Fragment,{children:H.loading?(0,r.jsx)(a.gb,{}):(0,r.jsx)(a.X2,{align:"middle",justify:"tablet"==t?"start":"space-around",children:n.map((function(e,n){return(0,r.jsx)(a.JX,{xs:6,sm:4,md:2,lg:2,xl:2,children:(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[(0,r.jsx)(a.Zb,z({onLoading:H.loading},o,{hoverable:!0,style:{height:65,width:65},cover:e.image,onClick:function(){E((0,b.AY)(z({},M.result,{page:0,max_size:10,tone:"all",influencer:e.label||e.influencer_name,order:"desc"}))),p(z({},f,e)),ee(!0)}})),(0,r.jsx)("div",{style:i,children:e.label})]})},n)}))})})};return(0,r.jsxs)(a.X2,{children:[(0,r.jsx)(a.JX,{span:24,children:(0,r.jsxs)(a.X2,{align:"middle",justify:"center",children:[(0,r.jsx)(a.JX,{xs:24,sm:24,md:24,lg:24,xl:24,children:(0,r.jsx)(a.Zb,{title:"spokeperson",children:(0,r.jsx)(de,{data:H.result.data?H.result.data.map((function(e){le.findIndex((function(n){return n.name==e.influencer_name}));return{label:e.influencer_name,image:(0,r.jsx)(a.u,{title:e.influencer_name,placement:"bottom",children:(0,r.jsx)(a.Ee,{src:e.image?e.image:I.Z,url:e.image?"https://demo.digivla.id":null,layout:"fill",objectFit:"cover",alt:"person",priority:"true"})},e.influencer_name)}})):[]})})}),(0,r.jsx)(a.JX,{xs:24,sm:24,md:24,lg:24,xl:24,children:(0,r.jsx)(d,{cards:{title:"spokeperson breakdown",onLoading:H.loading,shadow:!0,extra:(0,r.jsx)(a.zx,{size:"small",type:"link",onClick:function(){V(!R)},children:"view"})},charts:{series:[{name:"negative",data:H.result.data?H.result.data.map((function(e){return e.count.negative})):[]},{name:"neutral",data:H.result.data?H.result.data.map((function(e){return e.count.netral})):[]},{name:"positive",data:H.result.data?H.result.data.map((function(e){return e.count.positive})):[]}],events:{dataPointSelection:function(e,n,t){E((0,b.AY)(z({},M.result,{page:0,max_size:10,tone:t.seriesIndex-1,influencer:H.result.data[t.dataPointIndex].influencer_name,order:"desc"}))),ee(!0),p(z({},f,H.result.data[t.dataPointIndex]))}},chartOptions:{stacked:!0},options:{colors:s.X6.colors,plotOptions:{bar:{horizontal:R,borderRadius:6}},xaxis:{categories:H.result.data?H.result.data.map((function(e){return e.influencer_name})):[]},legend:s.X6.legend}}})})]})}),(0,r.jsx)(a.JX,{span:24,children:(0,r.jsx)(h,{cards:{onLoading:C.loading,title:"spokeperson list",extra:"Total: ".concat(null===(e=C.result.data)||void 0===e?void 0:e.length)},tables:{data:C.result.data?C.result.data:[],rowKey:function(e){return e.quotes},expandable:{expandedRowRender:function(e){return(0,r.jsx)("p",{style:{margin:0},children:e.quotes})},rowExpandable:function(e){return"Not Expandable"!==e.influencer_name}},pagination:{showSizeChanger:!0,total:C.result.recordsTotal,showTotal:function(e){return"Total ".concat(e," article")},current:g.page+1,pageSize:g.max_size,onChange:function(e,n){E((0,b.UV)(z({},M.result,{page:e-1,max_size:n}))),J({page:e-1,max_size:n})}},column:[{title:"Spokeperson List",render:function(e){return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(a.TH,{title:"Date",content:e.datee}),(0,r.jsx)(a.TH,{title:"Media",content:e.media}),(0,r.jsx)(a.TH,{title:"Spokeperson",content:e.influencer_name}),(0,r.jsx)(a.TH,{title:"tone",content:e.tone}),(0,r.jsx)(a.TH,{title:"action",type:"action",children:(0,r.jsx)(a.zx,{size:"small",icons:"EditTwotone"})})]})},responsive:["xs"]},{title:"Date",dataIndex:"datee",key:"datee",width:100,responsive:["md"],sorter:function(e,n){return e.datee-n.datee}},{title:"Name",dataIndex:"influencer_name",key:"influencer_name",ellipsis:!0,responsive:["md"],sorter:function(e,n){return e.influencer_name.length-n.influencer_name.length}},{title:"Media",dataIndex:"media",key:"media_id",responsive:["md"],sorter:function(e,n){return e.media_id-n.media_id}},{title:"Tone",dataIndex:"tones",key:"tones",width:100,responsive:["md"],sorter:function(e,n){return e.tones-n.tones},render:function(e,n){return(0,r.jsx)(a.Vp,{color:0==n.tone?"processing":1==n.tone?"success":"error",children:n.tone<0?"Negative":n.tone>0?"Positive":"Neutral"})}},{title:"Action",key:"action",width:60,align:"center",responsive:["md"],render:function(e,n){return(0,r.jsx)(a.TH,{type:"action",children:(0,r.jsx)(a.zx,{size:"small",icons:"EditOutlined",onClick:function(){G(n),U(!0),E((0,b.gG)({article_id:n.article_id}))}})})}}]}})}),(0,r.jsx)(fe,{}),(0,r.jsx)(x.Z,{chartList:Q,setChartList:ee,spokepersonStatisticClick:A,dataList:f,paginationHandler:function(e,n){E((0,b.AY)(z({},M.result,{page:e-1,max_size:n,tone:"all",influencer:f.label||f.influencer_name,order:"desc"}))),p(z({},f,{page:e-1,max_size:n}))},setDataList:p,handleClickChart:function(e){E((0,b.gG)({article_id:e.article_id})),(0,N.Mr)({article_id:e.article_id}).then((function(e){return e.json()})).then((function(n){G(e),U(!0),te(n.data)})).catch((function(e){return console.log(e)}))}}),(0,r.jsx)("div",{style:{position:"absolute",zIndex:999,right:20,bottom:"tablet"==t?"30%":100},children:(0,r.jsx)(a.zx,{style:Z,loading:se,onClick:function(e){e.preventDefault(),ce(!0),(0,b.G5)(z({},M.result)).then((function(e){return e.json()})).then((function(e){200==e.code?(window.open(e.data.filepath),ce(!1)):(u.Z.error({message:"Error when download excel"}),ce(!1))})).catch((function(e){u.Z.error({message:"Error when download excel"}),ce(!1)}))},type:"primary",icons:"DownloadOutlined",shape:"round",children:"Download"})})]})};E.layout=o;var X=E,Z={boxShadow:"3px 0px 20px -12px rgba(54, 65, 76, 0.5)"}},58742:function(e,n,t){"use strict";t.d(n,{Dc:function(){return f},e9:function(){return d},rt:function(){return p},L5:function(){return m},eq:function(){return g},Tf:function(){return h},_$:function(){return x},k5:function(){return v},M9:function(){return b},Mr:function(){return k},r8:function(){return S},jX:function(){return y},Nu:function(){return j},yz:function(){return w},aB:function(){return O},n3:function(){return _},HG:function(){return P},Lj:function(){return T},cK:function(){return I},tI:function(){return N},Y:function(){return J},HX:function(){return z}});var r=t(35666),o=t.n(r),i=t(5032),a=t(74034);t(49552);function u(e,n,t,r,o,i,a){try{var u=e[i](a),s=u.value}catch(c){return void t(c)}u.done?n(s):Promise.resolve(s).then(r,o)}function s(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){u(i,r,o,a,s,"next",e)}function s(e){u(i,r,o,a,s,"throw",e)}a(void 0)}))}}function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){c(e,n,t[n])}))}return e}var f=function(e){return s(o().mark((function n(t,r){var u,s;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t({type:i.i4}),u=JSON.parse(localStorage.getItem("userToken")),n.next=5,(0,a.SD)("user/editing/",u.token,l({},e,{tone:e.tonee}));case 5:return s=n.sent,n.next=8,s.json();case 8:s=n.sent,t({type:i.If,result:s}),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),t({type:i.yb,result:n.t0});case 15:case"end":return n.stop()}}),n,null,[[0,12]])})))},d=function(e){return function(n,t){n({type:i.If,result:e})}},p=function(){return s(o().mark((function e(n,t){var r,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:i.Ev}),r=JSON.parse(localStorage.getItem("userToken")),e.next=5,(0,a.Be)("issue/list/",r.token);case 5:return u=e.sent,e.next=8,u.json();case 8:u=e.sent,n({type:i.Lj,result:u}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),n({type:i.QB,result:e.t0});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))},m=function(e){return new Promise((function(n,t){var r=JSON.parse(localStorage.getItem("userToken"));return(0,a.SD)("user/editing/send-mail",r.token,e).then((function(e){return n(e)}))}))},g=function(e){return new Promise((function(n,t){var r=JSON.parse(localStorage.getItem("userToken"));return(0,a.SD)("user/download/docxs",r.token,e).then((function(e){return n(e)}))}))},h=function(e){return new Promise((function(n,t){var r=JSON.parse(localStorage.getItem("userToken"));return(0,a.SD)("user/download/pdfs",r.token,e).then((function(e){return n(e)}))}))},x=function(e){return new Promise((function(n,t){var r=JSON.parse(localStorage.getItem("userToken"));return(0,a.SD)("user/title/update",r.token,e).then((function(e){return n(e)}))}))},v=function(e){return new Promise((function(n,t){var r=JSON.parse(localStorage.getItem("userToken"));return(0,a.SD)("user/summary/update",r.token,e).then((function(e){return n(e)}))}))},b=function(e){return new Promise((function(n,t){var r=JSON.parse(localStorage.getItem("userToken"));return(0,a.SD)("user/tone/update",r.token,e).then((function(e){return n(e)}))}))},k=function(e){return new Promise((function(n,t){var r=JSON.parse(localStorage.getItem("userToken"));return(0,a.SD)("user/keywords-by-article-id/",r.token,e).then((function(e){return n(e)}))}))},S=function(e){return new Promise((function(n,t){var r=JSON.parse(localStorage.getItem("userToken"));return(0,a.SD)("user/tone/multiple/update",r.token,e).then((function(e){return n(e)}))}))},y=function(e){return new Promise((function(n,t){var r=JSON.parse(localStorage.getItem("userToken"));return(0,a.SD)("user/article/delete",r.token,e).then((function(e){return setTimeout((function(){return n(e)}),1e3)}))}))},j=function(e){return new Promise((function(n,t){var r=JSON.parse(localStorage.getItem("userToken"));return(0,a.SD)("issue/add/",r.token,e).then((function(e){return n(e)}))}))},w=function(e){return new Promise((function(n,t){var r=JSON.parse(localStorage.getItem("userToken"));return(0,a.SD)("user/article/save",r.token,e).then((function(e){return n(e)}))}))},O=function(e){return new Promise((function(n,t){var r=JSON.parse(localStorage.getItem("userToken"));return(0,a.Be)("user/subcategories-distinct/",r.token,e).then((function(e){return n(e)}))}))},_=function(e){return new Promise((function(n,t){var r=JSON.parse(localStorage.getItem("userToken"));return(0,a.SD)("user/article/delete/category",r.token,e).then((function(e){return n(e)}))}))},P=function(){return s(o().mark((function e(n,t){var r,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:i.mk}),r=JSON.parse(localStorage.getItem("userToken")),e.next=5,(0,a.Be)("user/sponsor",r.token);case 5:return u=e.sent,e.next=8,u.json();case 8:u=e.sent,n({type:i.FK,result:u}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),n({type:i.VB,result:e.t0});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))},T=function(){return new Promise((function(e,n){var t=JSON.parse(localStorage.getItem("userToken"));return(0,a.Be)("user/sponsor",t.token).then((function(n){return e(n)}))}))},I=function(e){return new Promise((function(n,t){var r=JSON.parse(localStorage.getItem("userToken"));return(0,a.SD)("user/article/sponsor",r.token,e).then((function(e){return n(e)}))}))},N=function(e){return new Promise((function(n,t){var r=JSON.parse(localStorage.getItem("userToken"));return(0,a.SD)("user/sponsor",r.token,e).then((function(e){return n(e)}))}))},J=function(e){return new Promise((function(n,t){var r=JSON.parse(localStorage.getItem("userToken"));return(0,a._o)("user/sponsor",r.token,e).then((function(e){return n(e)}))}))},z=function(e){return new Promise((function(n,t){var r=JSON.parse(localStorage.getItem("userToken"));return(0,a.Y2)("user/sponsor",r.token,e).then((function(e){return n(e)}))}))}}},function(e){e.O(0,[62,774,888,179],(function(){return n=14083,e(e.s=n);var n}));var n=e.O();_N_E=n}]);